import MDXCodeBlock from 'MDXCodeBlock';

import arrayMapJs from '../setup/src/array-map.js';
import arrayMapTs from '../setup/src/array-map.ts';
import mapSpec from '../setup/src/mapSpec';

This question is pretty straightforward and just tests that you know how to access the array values within `Array.prototype` methods (using `this`).

## Solution

Initialize a new array to store the mapped results. As we loop through the array (via `this`), call the callback on each array element with the following parameters: `element`, `index`, `array`, and `this`. This can be done by either using `Function.prototype.call` or `Function.prototype.apply`.

<MDXCodeBlock languages={{ jsx: arrayMapJs, tsx: arrayMapTs }} />

## Edge cases

- Passing the `index` and `array` to the map callback.
- Calling the map callback with the correct `this` if `thisArg` is specified.
- Sparse arrays (e.g. `[1, 2, , 4]`). The empty values should be ignored while traversing the array.

## Notes

Mutating the array in the map callback is a bad idea and can cause unintended consequences. It is a positive signal to mention that mutation of the array within the callback is possible. The provided solution follows the TC39 specification for array mutation scenarios:

- The range of elements processed by `map` is set before the first callback is called.
- Elements appended to the array after the call to `map` begins will not be visited by the callback.
- If existing elements of the array are changed, their value as passed to the callback will be the value at the time `map` visits them.
- Elements that are deleted after the call to `map` begins and before being visited are not visited.

The `thisArg` doesn't do anything if the callback is defined as an arrow function as arrow functions don't have their own bindings to `this`.

## One-liner solution

You can cheat the autograder by doing this:

```js
Array.prototype.myMap = Array.prototype.map;
```

## Spec solution

Here's a solution that is based off the [`Array.prototype.map` ECMAScript specification](https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.map).

<MDXCodeBlock>{mapSpec}</MDXCodeBlock>

## Resources

- [`Array.prototype.map` | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)
- [`Array.prototype.map` ECMAScript specification](https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.map)

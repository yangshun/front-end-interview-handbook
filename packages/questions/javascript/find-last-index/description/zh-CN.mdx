---
title: 查找最后一个索引
excerpt: 实现一个函数，该函数返回数组中满足提供的测试函数的最后一个元素的索引
---

实现一个函数 `findLastIndex(array, predicate, [fromIndex=array.length-1])`，它接受一个值数组、一个函数 `predicate` 和一个可选的 `fromIndex` 数字参数，并返回数组中满足提供的测试函数 `predicate` 的最后一个元素的索引。`array` 的元素从**右向左**迭代。

## 参数

1. `array` *(Array)*: 要检查的数组。
2. `predicate` *(Function)*: 每次迭代调用的函数。该函数使用三个参数调用：*(value, index, array)*。
3. `[fromIndex=array.length-1]` *(number)*: 开始搜索的索引。

## 返回值

*(number)*: 返回找到的元素的索引，否则返回 `-1`。

## 例子

```js
const arr = [5, 4, 3, 2, 1];

// 搜索数组中大于 3 的最后一个值并返回索引。
findLastIndex(arr, (num) => num > 3); // => 1

// 从索引 3（包括）开始搜索。
findLastIndex(arr, (num) => num > 1, 3); // => 3

// 从索引 3（包括）开始搜索。
findLastIndex(arr, (num) => num < 1, 3); // => -1
```

## 边缘情况

您的函数应该处理负索引和超出范围的索引。

* 负数：负整数从数组中的最后一个项目开始倒数。`-1` 表示数组中的最后一个元素，`-2` 表示倒数第二个元素，依此类推。
* 负数和超出范围：如果给定的负整数的绝对值大于数组的长度，则搜索开始默认为数组中的第一个项目。
* 超出范围：如果 `index >= array.length`，则从最后一个索引开始。

```js
const arr = [5, 4, 3, 2, 1];

// 从索引 2 开始搜索。
findLastIndex(arr, (num) => num > 2, -3); // => 2

findLastIndex(arr, (num) => num % 2 === 0, -3); // => 1

// 如果 fromIndex >= array.length，则从最后一个索引开始。
findLastIndex(arr, (num) => num > 0, 10); // => 4

// 负数和超出范围，从数组中的第一个项目开始搜索。
findLastIndex(arr, (num) => num > 2, -10); // => 0
```

## 资源

* [Lodash `_.findLastIndex`](https://lodash.com/docs/#findLastIndex)

---
title: 查找最后一个索引
excerpt: 实现一个函数，该函数返回数组中满足提供的测试函数的最后一个元素的索引
---

实现一个函数`findLastIndex(array, predicate, [fromIndex=array.length-1])`，它接受一个值数组、一个函数`predicate`和一个可选的`fromIndex`数字参数。`findLastIndex`从**右向左**迭代`array`的元素。

当从`fromIndex`**向后迭代**时，该函数返回满足`predicate`的第一个元素的索引。

## 参数

1. `array` *(Array)*: 要检查的数组。
2. `predicate` *(Function)*: 每次迭代调用的函数。
3. `[fromIndex=array.length-1]` *(number)*: 开始搜索的索引**从**（向左）。

Predicate 签名：`predicate`函数使用三个参数调用：`(value, index, array)`。

* `value`：当前正在迭代的元素。
* `index`：当前元素的索引。
* `array`：原始输入数组。

## 返回值

*(number)*: 返回找到的元素的索引，否则返回 `-1`。

## 例子

```js
const arr = [5, 4, 3, 2, 1]; // 索引：0, 1, 2, 3, 4

// 搜索大于 3 的元素，从末尾开始（索引 4）。
findLastIndex(arr, (num) => num > 3); // => 1

// 从索引 3 开始向后搜索。
// 检查索引 3：2 > 1 为真。停止。
findLastIndex(arr, (num) => num > 1, 3); // => 3

// 从索引 3 开始向后搜索。
// 检查索引 3：2 < 1 为假。
// 检查索引 2：3 < 1 为假。
// 检查索引 1：4 < 1 为假。
// 检查索引 0：5 < 1 为假。到达开头，未找到任何元素。
findLastIndex(arr, (num) => num < 1, 3); // => -1
```

## 边缘情况

您的函数应处理负数和超出范围的`fromIndex`值。

* 负`fromIndex`：负整数从数组中的最后一个项目开始倒数。`-1`表示数组中的最后一个元素，`-2`表示倒数第二个元素，依此类推。
* 负数超出范围：如果从负`fromIndex`解析的索引小于 0（例如，对于长度为 5 的数组，`fromIndex`为 -10），则搜索从索引 0 开始。
* 正数和超出范围：如果`fromIndex >= array.length`，则搜索从最后一个索引（`array.length - 1`）开始。

```js
const arr = [5, 4, 3, 2, 1]; 索引 0, 1, 2, 3, 4

// fromIndex = -3 解析为索引 2。
// 检查索引 2：3 > 2 为真。停止。
findLastIndex(arr, (num) => num > 2, -3); // => 2

// fromIndex = -3 解析为索引 2。
// 检查索引 2：3 % 2 === 0 为假。
// 检查索引 1：4 % 2 === 0 为真。停止。
findLastIndex(arr, (num) => num % 2 === 0, -3); // => 1

// 如果 fromIndex >= array.length，则从最后一个索引开始。
findLastIndex(arr, (num) => num > 0, 10); // => 4

// 负数且超出范围，从数组中的第一个项目开始搜索。
// 检查索引 0：5 > 2 为真
findLastIndex(arr, (num) => num > 0, -10); // => 0

```

## 资源

* [Lodash `_.findLastIndex`](https://lodash.com/docs/#findLastIndex)

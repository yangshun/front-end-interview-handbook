import MDXCodeBlock from 'MDXCodeBlock';

import filterJs from '../setup/src/array-filter.js';
import filterTs from '../setup/src/array-filter.ts';
import filterSpec from '../setup/src/filterSpec';

This question is pretty straightforward and just tests that you know how to access the array values within `Array.prototype` methods (using `this`).

## Solution

Initialize a new array to store the filtered results. As we loop through the array (via `this`), call the callback on each array element with the following parameters: `element`, `index`, `array`, and `this`. This be done by either using `Function.prototype.call` or `Function.prototype.apply`.

If the callback evaluates to `true`, push the element into the `results`.

<MDXCodeBlock languages={{ jsx: filterJs, tsx: filterTs }} />

## Edge cases

- Passing the `index` and `array` to the filter callback.
- Invoking the filter callback with the correct `this` if `thisArg` is specified.
- Sparse arrays, e.g. `[1, 2, , 4]`. The empty values should be ignored while traversing the array.

## Notes

Mutating the array in the filter callback is a bad idea and can cause unintended consequences. It is a positive signal to mention that mutation of the array within the callback is possible. The provided solution follows the TC39 specification for array mutation scenarios:

- The range of elements processed by `filter` is set before the first callback is called.
- Elements appended to the array after the call to `filter` begins will not be visited by the callback.
- If existing elements of the array are changed, their value as passed to the callback will be the value at the time `filter` visits them.
- Elements that are deleted after the call to `filter` begins and before being visited are not visited.

The `thisArg` doesn't do anything if the callback is defined as an arrow function as arrow functions don't have their own bindings to `this`.

## One-liner solution

You can cheat the autograder by doing this:

```js
Array.prototype.myFilter = Array.prototype.filter;
```

## Spec solution

Here's a solution that is based off the [`Array.prototype.filter` ECMAScript specification](https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.filter).

<MDXCodeBlock>{filterSpec}</MDXCodeBlock>

## Resources

- [`Array.prototype.filter` | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)
- [`Array.prototype.filter` ECMAScript specification](https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.filter)

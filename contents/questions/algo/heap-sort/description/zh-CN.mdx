---
title: 堆排序
excerpt: 实现一个执行堆排序的函数
---

实现一个执行堆排序的函数。该函数应接收一个整数数组，并返回一个按升序排序的整数数组。输入数组将就地修改。

## 例子

```js
heapSort([9, 3, 6, 2, 1, 11]); // [1, 2, 3, 6, 9, 11]
heapSort([12, 16, 14, 1, 2, 3]); // [1, 2, 3, 12, 14, 16]
```

## 回顾

堆排序是一种基于比较的排序算法，它迭代地将未排序的数组构建成一个最大堆数据结构，以识别最大元素，并逐步将其交换到未排序数组的末尾，从而构建一个已排序的数组。

### 最大堆

要理解堆排序，我们需要首先理解堆数据结构：

* 二叉堆是一个部分排序的完整二叉树，它满足堆属性，类似于二叉搜索树，但具有不同的排序方式。
* 堆属性 = 父节点和子节点之间的特定关系，它指定了它们的顺序。一个例子是最大堆属性，它指定所有父节点必须 >= 其子节点。同一级别的子节点之间的顺序无关紧要。因此，最大的节点总是在顶部，最小的节点在底部。同一级别的节点是无序的：![最大堆图示](/img/questions/heap-sort/max-heap-property.png)
* 完整二叉树 = 树的所有级别都已完全填充。如果最后一层部分填充，则首先从左到右填充。
* 堆经常实现为数组。我们可以使用以下公式来计算堆的数组表示形式中父节点、左子节点和右子节点的索引：
  * 左子节点索引 = 2 \* parentIdx + 1
  * 右子节点索引 = 2 \* parentIdx + 2

<img alt="最大堆数组表示" className="mx-auto w-full max-w-5xl" src="/img/questions/heap-sort/max-heap-array-representation.png" />

### 堆排序的工作原理

堆排序本质上通过以下步骤工作：

<img alt="堆排序步骤" className="mx-auto w-full max-w-5xl" src="/img/questions/heap-sort/heap-sort-steps.png" />

import TestCases from '../../../test-cases.mdx';
import A11y from '../../../a11y.mdx';

## 解决方案

### 状态

我们需要两个状态变量：`tasks` 和 `newTask`。

`tasks`：由于存在可以修改的任务列表，我们需要将其作为组件状态的一部分。如果要重新排序任务列表，我们需要为每个项目指定一个键。这允许 Svelte 跟踪项目的重新排序，并相应地重新排序 DOM 元素，而不是盲目地更新 DOM 元素。我们不能使用任务的文本作为键，因为它们不能保证是唯一的。通常，最可靠的方法是为每个任务生成一个唯一的 ID。像 [`uuid`](https://github.com/uuidjs/uuid) 这样的库会进入你的脑海，但在这种情况下，一个简单的递增计数器就足够了。由于我们希望 `id` 是全局唯一的，因此它在模块脚本中初始化，在组件脚本之外。

`newTask`：这是表示我们在输入字段中创建新任务的文本的状态。当用户单击提交按钮时，我们将使用此状态变量的值在 `tasks` 数组中添加一个新任务。

### 添加任务

新任务应添加到 `tasks` 数组的末尾。我们可以根据 `newTask` 的值构造一个新任务对象。要更新 `tasks` 数组，我们可以直接修改 `tasks` 数组或创建一个新数组并将其分配给 `tasks` 变量。由于 Svelte 通过赋值语句跟踪更改，如果我们调用 `tasks.push()` 直接修改数组，我们需要添加另一个赋值来提示 Svelte `tasks` 变量已更改。这可以像将 `tasks` 分配给自己一样简单，`tasks = tasks`。

在使用 `newTask` 值添加新任务后，我们应该通过将 `newTask` 设置为空字符串 `''` 来清除下一个任务的输入。

### 删除任务

为每个任务对象提供唯一的 `id` 可以简化这里的事情，因为我们可以通过现有列表找到并删除与要删除的 `id` 对应的任务。在找到要删除的任务对象的索引后，您可以使用 `Array.prototype.splice` 删除该索引处的元素。

<A11y />

<TestCases />

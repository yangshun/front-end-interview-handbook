## 解决方案

我们将在[数据表解决方案](/questions/user-interface/data-table/solution)的基础上进行构建。

对分页数据表的一个常见后续问题是添加排序功能，按可用列对数据进行排序。

### 状态

允许排序的数据表所需的新数据是按其排序的列和排序方向。 有两种方法来表示此配置：

* **单个值**：封装在一个值中（例如`name-asc`、`name-desc`等）。
* **两个值**：分离排序字段（例如`name`、`age`等）和排序方向（`asc`和`desc`）。

这两种方法都是可行的，但使用两个单独的字段可能更清晰。

这些状态值通过单击表头来设置/切换。

### 排序

我们实现了一个函数`sortUsers`，它接受用户列表、当前的排序字段和排序方向。 它将返回按指定字段按该顺序排序的用户列表。

执行排序的一种基本方法是为每个可能的字段使用一个switch-case语句，并在case中实现排序逻辑。 回想一下，表中存在两种值类型——`name`和`occupation`的字符串，以及`id`和`age`的数字。 字符串排序必须通过`String.prototype.toLocaleCompare()`完成，不应使用`>`和`<`运算符。

就像分页一样，当页面大小更改时，页码设置为 1，当排序字段或方向更改时，也应重置页面大小。

### 与分页集成

排序必须在分页之前完成。 集成只是在将排序后的用户列表传递给`paginateUsers()`之前对用户进行排序。

排序和分页函数都将在渲染路径中被调用，并且返回的用户`pageUsers`是在考虑排序后要渲染的当前用户页面。 渲染代码不需要更改太多。

## 后续步骤

分页和排序只是数据表的初始步骤。 数据表还可以支持：

* 过滤每列/字段
* 从远程 API 获取排序、分页和过滤的数据
* 考虑添加新字段的难易程度：
  * 如果要显示新字段，您需要在多少个地方进行更改？
  * 当前组件与用户的字段非常耦合，您如何修改该组件以使其与数据无关？
  * 如果要显示非文本字段怎么办？

如果您有时间，请查看[TanStack Table](https://tanstack.com/table/)，了解哪些功能进入生产就绪的数据表库以及数据表的复杂程度。

import TestCases from '../../../test-cases.mdx';
import Notes from '../../../notes.mdx';

## 解决方案

我们可以将解决方案分成两部分，更新循环和渲染。

### 更新循环

我们需要一个计时器来刷新页面，并每秒显示当前时间。要创建计时器，我们可以使用`setInterval`

请记住注册一个回调函数到`onUnmounted`生命周期钩子，以清除计时器，避免内存泄漏。

将JavaScript `Date`对象存储为状态，因为它包含我们需要的所有数据。

为了更好的可重用性，可以将这些逻辑抽象成一个自定义的`useCurrentDate`组合函数。我们可以使用`onScopeDispose`来代替`unmounted`生命周期钩子，因为此方法可以在可重用的组合函数中用作`onUnmounted`的替代方法。

为了更好的可重用性，可以将这些逻辑抽象成一个自定义的`useCurrentDate` hook。

这部分与[数字时钟](/questions/user-interface/digital-clock)问题完全相同。

### 渲染

为了使时钟更具可重用性和可定制性，我们可以将时钟大小作为属性。然后，时钟指针可以是时钟大小的比例。

为了在正确的位置渲染时钟指针，我们使用`position: absolute`和CSS transforms的组合：

1. `position: absolute`，`top`和`left`为时钟大小的一半，使指针从时钟的中心开始。但是，指针将指向下方。
2. 在时钟上使用`transform: rotate(180deg)`，使指针指向上方。如果我们在指针的旋转角度上增加180度的偏移量，则此步骤是可选的。
3. 使用`transform-origin: center top`使指针绕时钟中心旋转。
4. 在指针上使用`transform: rotate(Xdeg)`将它们旋转到最终角度。

<TestCases />

<Notes />

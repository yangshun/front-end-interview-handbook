import TestCases from '../../../test-cases.mdx';
import Notes from '../../../notes.mdx';

## 解决方案

我们可以将解决方案分成两部分，更新循环和渲染。

### 更新循环

我们需要一个计时器来刷新页面，并每秒显示当前时间。要创建计时器，我们可以使用`setInterval`

请记住注册一个回调函数到`onUnmounted`生命周期钩子，以清除计时器，避免内存泄漏。

将 JavaScript `Date` 对象存储为状态，因为它包含我们需要的所有数据。

为了更好地重用，可以将这些逻辑抽象成一个自定义的`useCurrentDate`组合函数。我们可以使用`onScopeDispose`来代替`unmounted`生命周期钩子，因为此方法可以用作可重用组合函数中`onUnmounted`的替代方法。

这部分与[模拟时钟](/questions/user-interface/analog-clock)问题完全相同。

### 渲染

现在我们可以在`Clock`组件中访问最新的`Date`，我们可以渲染它。首先为`Digit`和`Separator`创建两个较小的组件。

* `Digit`：使用分段显示渲染 0-9 的数字。我们使用两个正方形`<div>`和 CSS 边框来实现效果。对于每个数字，创建一个需要显示的边框配置，并检索该数字的配置。
* `Separator`：渲染看起来像冒号的两个圆圈。

要获得小时/分钟/秒的第一位数字，我们可以除以 10 并向下取整。要获得第二位数字，我们对 10 取模，只留下个位的值。

<TestCases />

<Notes />

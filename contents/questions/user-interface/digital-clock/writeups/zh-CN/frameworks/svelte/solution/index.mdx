import TestCases from '../../../test-cases.mdx';
import Notes from '../../../notes.mdx';

## 解决方案

### 应用结构

该应用程序被分解成模块化组件，使其更易于理解和维护：

* `App.svelte`：这是导入并渲染 `Clock` 组件的主组件。
* `Clock.svelte`：表示显示当前时间的数字时钟，以小时、分钟和秒为单位。
* `Digit.svelte`：渲染时钟的单个数字，使用 0 到 9 的数字的独特表示。
* `Separator.svelte`：渲染小时、分钟和秒之间的冒号 (:) 分隔符。

### 时钟组件

时钟的主要功能存在于 `Clock.svelte` 组件中：

#### 状态管理

* `date`：维护当前日期和时间。它每 100 毫秒更新一次，以确保时钟的时间准确。
* 响应式语句 (`$: ...`)：只要底层 `date` 发生变化，就会自动更新派生值，例如 `hours`、`minutes`、`seconds` 和 `dateTimeDisplay`。这确保了显示的时间始终与当前时间匹配。
* `padTwoDigit`：一个实用函数，用于通过用前导零填充来格式化个位数。

#### 渲染

时钟时间使用单个数字和分隔符显示。对于时间的每个组成部分（小时、分钟、秒），将数字分成十位和个位，并且使用 `Digit` 组件渲染每个数字。分隔符使用 `Separator` 组件插入这些组件之间。

样式使时钟具有黑色背景、白色数字和灰色边框。Flexbox 用于将数字和分隔符对齐在一行中，并且它们在父容器中居中对齐。

#### 生命周期

`onMount`：初始化一个间隔计时器，该计时器每 100 毫秒更新一次 `date`。这种频繁的更新可确保显示的时间精确到秒。重要的是，当组件被销毁或从 DOM 中移除时，间隔被清除，以避免潜在的内存泄漏或不必要的操作。

### 数字组件

`Digit.svelte` 组件是数字 0 到 9 的创意表示：

#### 状态管理

* `number`：表示需要显示的数字（从 0 到 9）。
* `NUMBER_TO_CLASSES`：一个映射，定义了每个数字应该显示数字正方形的哪一侧。它允许对每个数字进行独特的数字表示。
* 响应式语句 (`$: ...`)：根据提供的 `number` 确定应该显示的边。

#### 渲染

每个数字都表示为两个正方形（顶部和底部）。每个正方形都可以在其顶部、右侧、左侧或底部显示边框，从而呈现数字的外观。例如，数字 '8' 在两个正方形的所有边上显示边框，而数字 '1' 仅显示右侧边框。

CSS 自定义属性（变量）用于定义段的大小和颜色，从而易于自定义。

### 分隔符组件

`Separator.svelte` 组件很简单。它垂直对齐渲染两个点，模拟数字时钟中看到的冒号（:）。点的尺寸和颜色由 `Digit` 组件中使用的相同 CSS 自定义属性控制。

总之，这个 Svelte 应用程序提供了一种干净且模块化的方法来渲染数字时钟。每个组件都有明确的职责，使解决方案高效且易于理解。

<TestCases />

<Notes />

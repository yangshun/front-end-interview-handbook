import TestCases from '../../../test-cases.mdx';

## 解决方案

### 状态

该代码使用几个状态变量来管理游戏状态和用户交互。以下是每个状态变量及其用途的说明：

* `wordOfTheDay`：此状态变量存储玩家需要猜测的随机选择的单词。它使用来自预定义列表 `WORDS` 的随机单词进行初始化。它用于比较玩家的猜测并确定他们是否正确猜出了单词。
* `gameState`：此状态变量表示游戏的总状态。它可能有三个可能的值：
  * `GAME_STATE.IN_PROGRESS`：游戏仍在进行中，玩家可以继续进行猜测。
  * `GAME_STATE.GUESSED_CORRECTLY`：玩家在允许的尝试次数内正确猜出了单词。
  * `GAME_STATE.NO_MORE_GUESSES`：玩家在没有正确猜出单词的情况下用完了所有尝试。
* `gridState`：此状态变量是一个二维数组，表示网格的状态，其中每个单元格代表单词中的一个字母。它存储一个具有两个属性的对象：`char`（字母）和 `state`（字母猜测的状态）。`gridState` 使用 `getInitialGridState` 函数进行初始化。
* `position`：此状态变量表示光标在网格中的当前位置。它是一个包含行和列索引的 2 元素数组。初始位置设置为 `INITIAL_CURSOR_POSITION`，即 `[0, -1]`（在第一个单元格之前）。
* `letterGuessState`：此状态变量是一个对象，用于跟踪玩家所做的每个字母猜测的状态。对象的键是猜测的字母，值是相应的猜测状态 (`LETTER_GUESS_STATE`)。`getInitialLetterGuessState` 函数对其进行初始化。虚拟键盘使用此值来确定渲染按键的颜色。

### 渲染

该解决方案大量使用 CSS 变量来使用相关的状态颜色渲染猜测中的字母和虚拟键盘。由于颜色值在 UI 的多个部分中使用，因此使用了 CSS 变量。

### `addLetter`

当按下字母键时，将调用此函数。如果行中有可用空间，它会将按下的字母添加到当前光标位置的网格中。

### `deleteLetter`

当按下退格键时，将调用此函数。它将删除网格中当前光标位置的字母。如果当前行中没有字母，则调用此函数将不起作用。

### `checkWord`

此函数是所有函数中最复杂的函数。当按下 Enter 键以检查当前行中的单词是否正确时，将调用它。此函数有几个主要部分：

1. 首先，检查每个字母是否完全匹配。网格和字母猜测的状态更新为 `'CORRECT'`。如果所有字母都匹配，我们可以终止该函数并结束游戏。
2. 接下来，我们更新剩余字符的状态。剩余字符可以是以下之一：
   * 存在：如果字符存在于 `letterFreq` 中，并且 `letterFreq.get(char)` 为 0，则表示它已在上一步中被标记为 `'CORRECT'`。正值表示该字符存在但不在正确的位置。我们需要使用频率而不是简单地检查字符的存在，因为一个单词可以使用相同的字符多次。这些字符将被标记为 `'PRESENT'`。
   * 缺席：该字符根本不存在于 `letterFreq` 中，或者值为 0（相同的字母在另一个位置被正确使用），我们可以将其标记为 `'ABSENT'`。
3. 最后，如果所有猜测都用完了而没有找到正确的单词，则游戏结束并显示正确的单词。否则，光标将移动到下一行。

### `resetGame`

当调用此函数时，它会将游戏状态重置为其初始值。它设置了当天的新单词，重置了字母网格、光标位置、游戏状态和字母猜测状态。

<TestCases />

import TestCases from '../../../test-cases.mdx';
import A11y from '../../../a11y.mdx';
import Notes from '../../../notes.mdx';

## 解决方案

以下解释假设您对[Transfer List 的 React 解决方案](/questions/user-interface/transfer-list/react/solution)有很好的理解。

### 状态

状态结构保持不变，`Map` 的选择足够灵活，可以处理将项目添加到列表的新用例。

### 渲染

这个问题的主要补充是：

#### 输入表单

我们将把`<input>`包裹在一个`<form>`中，用于内置的键盘处理、a11y 和 UX。

#### 批量选择复选框

您是否知道 HTML 复选框实际上有 3 种状态？它们是选中、未选中和不确定。不确定状态不常用，无法通过 HTML 属性设置。因此，我们需要获取对复选框实例的引用，并执行 `checkboxInputElement.indeterminate = true`。这可以通过 React 中的 `useRef` 钩子完成。

我们可以编写一个名为 `determineListSelectionState` 的新函数，该函数接受 `items` 并确定列表的选择状态，即未选择任何项目、选择了某些项目或选择了所有项目。通过这种选择。通过这种状态，我们可以为批量选择复选框呈现适当的外观。此状态对于确定单击/触发批量选择复选框时发生的情况也很有用。我们可以创建一个名为 `setAllItemsSelectionState` 的新函数，以返回一组新的列表项，这些列表项设置为特定的选择状态。

<TestCases />

<A11y />

<Notes />

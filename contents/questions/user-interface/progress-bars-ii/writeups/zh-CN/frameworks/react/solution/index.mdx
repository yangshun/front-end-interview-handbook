import TestCases from '../../../test-cases.mdx';

**注意：**此解决方案基于[进度条](/questions/user-interface/progress-bars)的解决方案构建，因此请务必先查看该问题的解决方案。

## 解决方案

该问题可以分为两部分：(1) 状态，(2) 转换的编排。

### 状态

除了我们需要显示的进度条数量之外，我们还需要知道当前有多少进度条已填满，以及哪些进度条可以开始填满。我们引入一个新的数值变量状态 `numFilledUpBars` 来跟踪已填满的进度条数量。任何索引大于 `numFilledUpBars` 的进度条都不应开始填充。为了知道何时增加 `numFilledUpBars`，我们将向 `ProgressBar` 添加一个 `onCompleted` 属性，该属性在进度条已满时触发。

### 转换的编排

使用 `numFilledUpBars` 状态，我们将确定一个 `isEmpty` 值，该值将作为属性传递给 `ProgressBar`。`isEmpty={true}` 的 `ProgressBar` 不应开始动画。

我们可以使用 React DOM 元素上的 `onTransitionEnd` 属性来检测 CSS 转换何时完成，并触发 `onCompleted` 属性。在主 `App` 中，每当触发 `onCompleted` 回调时，`numFilledUpBars` 就会增加。

<TestCases />

import TestCases from '../../../test-cases.mdx';
import A11y from '../../../a11y.mdx';

## 解决方案

总的来说，这个问题最棘手的部分是选择正确的数据结构来使用，考虑到我们需要对数据进行的操作。

### 状态

直观的做法是为每个列表使用数组，因为数组是表示有序项目列表最自然的数据结构。但是，如果使用数组，标记项目为已选中/未选中以及从列表中删除项目将需要 O(N) 时间。

由于项目是唯一的，`Map` 数据结构是可行的，因为它为我们提供了 O(1) 的访问、插入和删除项目。此外，JavaScript `Map` 是有序的，因此可以保留项目顺序。键将是项目名称，值是一个布尔值，指示该项目是否被选中/选中。我们总共只需要两个 JavaScript `Map`，每个列表一个。

### 渲染

渲染传输列表的 UI 并没有什么特别之处。Flexbox 可以帮助我们渲染这三列。由于列的 UI 和功能是相同的，我们可以定义一个名为 `ItemList.svelte` 的组件，该组件绑定到项目列表，显示和操作列表本身。

要确定按钮是否应被禁用：

* 转移所有按钮：检查源列表是否为空。
* 转移选定按钮：编写一个辅助函数 `hasNoSelectedItems`，以计算源列表是否有任何选定项目，并禁用转移按钮。

### 转移项目

我们可以为每个所需的转移功能编写一个函数，该函数接受源/目标列表及其各自的 setter。这些函数减少了代码重复，如果将来有两列以上，可以轻松重用。

* `transferAllItems`：将源列表和目标列表中的项目组合起来，创建一个新的目标列表。
* `transferSelectedItems`：通过从源列表中删除选定项目并将它们添加到目标列表中，将选定项目从源列表移动到目标列表。

<TestCases />

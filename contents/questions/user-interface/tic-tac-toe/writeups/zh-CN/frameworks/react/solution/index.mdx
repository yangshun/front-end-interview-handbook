import TestCases from '../../../test-cases.mdx';
import A11y from '../../../a11y.mdx';

## 解决方案

### 渲染

为了使棋盘具有响应性，代码中使用了 CSS Grid。 CSS Grid 是一个强大的布局系统，允许创建二维网格布局。 以下是使用 CSS Grid 使游戏板具有响应性的方法：

1. 网格容器：游戏板被包裹在一个带有类名`board`的`<div>`元素中。 此元素用作单元格的网格容器。
2. 网格模板列：为了定义网格中列的数量和宽度，将`display: grid`和`grid-template-columns: repeat(3, 1fr)`应用于网格容器。 此规则将网格容器设置为使用网格布局，并指定它应该有三列，宽度相等。 `repeat(3, 1fr)`语法表示重复列大小定义 (`1fr`) 三次。
3. 单元格大小调整：网格中的每个单元格都由一个带有类名“cell”的`<button>`元素表示。 以下 CSS 规则定义了单元格的大小和外观：
   * 使用`min()`函数设置`font-size`属性。 它确保单元格的字体大小具有响应性，并根据视口的可用宽度进行调整。 `48px`值是后备大小，`10vw`表示视口宽度的 10%。
   * `aspect-ratio`属性设置为`1 / 1`，确保每个单元格保持正方形，而不管其内容如何。
4. 响应式行为：通过使用 CSS Grid 并根据视口宽度定义单元格大小，游戏板变得具有响应性。 随着视口宽度的减小，网格布局会进行调整，并且单元格会相应地调整其大小。 `font-size`属性中的`min()`函数确保字体大小在较小的屏幕上不会变得太大，从而提供更好的用户体验。

总的来说，CSS Grid 通过定义列数并根据可用空间调整单元格大小，为游戏板提供了灵活且响应迅速的布局。 这使得游戏板能够在不同的屏幕尺寸和设备上保持其结构和可用性。

### 状态

有两个核心状态：

1. `board` - 一个表示游戏板状态的数组。 它被初始化为长度为 9 的`null`值数组。 数组的每个元素对应于游戏板上的一个单元格，并且可以具有三个值之一：`'X'`、`'O'`或`null`，分别表示玩家 X、O 或空单元格所做的标记。 使用`setBoard`函数更新状态。
2. `xIsPlaying` - 一个布尔值，指示当前是否轮到玩家 X。 它被初始化为`true`。 使用`setIsXPlaying`函数更新状态。

### `determineWinner`

`determineWinner`函数负责根据棋盘的当前状态确定井字游戏中是否有获胜者，方法是遍历所有可能的获胜组合并检查每个组合中的单元格是否具有相同的标记。 如果找到获胜线，则返回获胜标记，如果没有获胜者，则返回`null`。

该函数接受一个`board`参数，该参数是一个表示游戏板状态的数组。 它遍历`CELLS_IN_A_LINE`数组，该数组包含形成井字游戏中获胜线的所有可能的单元格索引组合。 每个组合由三个索引组成，表示一行、一列或对角线中的单元格。 由于棋盘大小相对较小，因此可以枚举所有可能的组合。 如果棋盘大小较大，则此方法将无法很好地扩展。

在循环内部，当前单元格索引的组合被解构为三个变量：`x`、`y`和`z`。 这些变量表示需要检查是否相等的单元格的索引。

然后，该函数检查`board`数组中索引`x`、`y`和`z`处的值是否不为`null`（表示单元格不为空）并且都彼此相等。 如果满足此条件，则表示单元格中的标记形成了一条获胜线。 如果找到获胜线，则该函数返回获胜标记的值（`'X'`或`'O'`）。 这表示哪个玩家赢得了比赛。

如果在检查所有组合后未找到获胜线，则该函数返回`null`，表示还没有获胜者。

<TestCases />

<A11y />

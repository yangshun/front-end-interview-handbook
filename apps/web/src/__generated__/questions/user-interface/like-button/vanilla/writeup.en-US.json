{
  "skeleton": "var Component=(()=>{var f=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),T=(t,e)=>{for(var i in e)r(t,i,{get:e[i],enumerable:!0})},a=(t,e,i,h)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of b(e))!x.call(t,o)&&o!==i&&r(t,o,{get:()=>e[o],enumerable:!(h=m(e,o))||h.enumerable});return t};var d=(t,e,i)=>(i=t!=null?f(k(t)):{},a(e||!t||!t.__esModule?r(i,\"default\",{value:t,enumerable:!0}):i,t)),j=t=>a(r({},\"__esModule\",{value:!0}),t);var c=w((I,l)=>{l.exports=_jsx_runtime});var L={};T(L,{default:()=>q});var s=d(c());var n=d(c());function u(t){let e=Object.assign({p:\"p\",img:\"img\",code:\"code\",h2:\"h2\",ul:\"ul\",li:\"li\",strong:\"strong\",h3:\"h3\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Create a Like button which appearance changes based on the following states:\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/img/questions/like-button/like-button-states.png\",alt:\"Like Button States\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The heart and spinner icons are provided for your convenience. The focus of this question is on the handling of the various states, not so much on being pixel perfect. As for colors, you can use \",(0,n.jsx)(e.code,{children:\"#f00\"}),\" for the red and \",(0,n.jsx)(e.code,{children:\"#888\"}),\" for the gray.\"]}),`\n`,(0,n.jsx)(e.h2,{children:\"Requirements\"}),`\n`,(0,n.jsx)(e.p,{children:\"In the button's default state, when it is clicked, it goes into the loading state and a request is made to the provided back end API which has a 50% chance of succeeding/failing.\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Success response\"}),': If the request was successful, the button changes to the \"Liked\" state.']}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Failure response\"}),': Otherwise it returns to the \"Default\"/\"Hovered\" state depending on whether the cursor is still over the button. The error message from the back end API should be shown below the button.']}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:'If the user clicks on a button in the \"Liked\" state, the reverse happens.'}),`\n`,(0,n.jsx)(e.h2,{children:\"Submission API\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"URL: \",(0,n.jsx)(e.code,{children:\"https://questions.greatfrontend.com/api/questions/like-button\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"HTTP Method: \",(0,n.jsx)(e.code,{children:\"POST\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Content Type: \",(0,n.jsx)(e.code,{children:\"json\"})]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"Parameters\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The following fields are accepted in the \",(0,n.jsx)(e.strong,{children:\"request body\"}),\":\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"action\"}),\": A string of either \",(0,n.jsx)(e.code,{children:\"'like'\"}),\" or \",(0,n.jsx)(e.code,{children:\"'unlike'\"}),\" depending on the desired action.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"Response\"}),`\n`,(0,n.jsx)(e.p,{children:\"The API has a 50% chance of succeeding (HTTP 200) or failing (HTTP 500) so as to make it easy for you to test the request failure cases. It returns a JSON payload of the following shape depending on the outcome.\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Success\"}),\": \",(0,n.jsx)(e.code,{children:\"{ message: 'Success!' }\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Failure\"}),\": \",(0,n.jsx)(e.code,{children:\"{ message: 'Unknown error during attempted {{action}}. Please try again later.!' }\"})]}),`\n`]})]})}function y(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(u,t)})):u(t)}var g=y;function p(t){return(0,s.jsx)(g,{})}function P(t={}){let{wrapper:e}=t.components||{};return e?(0,s.jsx)(e,Object.assign({},t,{children:(0,s.jsx)(p,t)})):p(t)}var q=P;return j(L);})();\n;return Component;",
  "solution": "var Component=(()=>{var w=Object.create;var l=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty;var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),v=(t,e)=>{for(var o in e)l(t,o,{get:e[o],enumerable:!0})},d=(t,e,o,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let h of x(e))!I.call(t,h)&&h!==o&&l(t,h,{get:()=>e[h],enumerable:!(c=k(e,h))||c.enumerable});return t};var a=(t,e,o)=>(o=t!=null?w(j(t)):{},d(e||!t||!t.__esModule?l(o,\"default\",{value:t,enumerable:!0}):o,t)),y=t=>d(l({},\"__esModule\",{value:!0}),t);var r=_((O,u)=>{u.exports=_jsx_runtime});var U={};v(U,{default:()=>C});var n=a(r());var i=a(r());function f(t){let e=Object.assign({h2:\"h2\",ul:\"ul\",li:\"li\"},t.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{children:\"Test cases\"}),`\n`,(0,i.jsxs)(e.ul,{children:[`\n`,(0,i.jsxs)(e.li,{children:['\"Default\" state',`\n`,(0,i.jsxs)(e.ul,{children:[`\n`,(0,i.jsx)(e.li,{children:'Hovering the button should show the \"Hovered\" state.'}),`\n`,(0,i.jsxs)(e.li,{children:[\"Clicking on the button should show a loading spinner.\",`\n`,(0,i.jsxs)(e.ul,{children:[`\n`,(0,i.jsx)(e.li,{children:'If the request succeeds, the button should transition into the \"Liked\" state.'}),`\n`,(0,i.jsx)(e.li,{children:'If the request fails, the button should go back to the \"Default\" state and an error message is shown below the button.'}),`\n`]}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,i.jsxs)(e.li,{children:['\"Liked\" state',`\n`,(0,i.jsxs)(e.ul,{children:[`\n`,(0,i.jsx)(e.li,{children:\"Hovering the button in this state is undefined behavior. It's fine to not show any difference when hovering.\"}),`\n`,(0,i.jsxs)(e.li,{children:[\"Clicking on the button should show a loading spinner.\",`\n`,(0,i.jsxs)(e.ul,{children:[`\n`,(0,i.jsx)(e.li,{children:'If the request succeeds, the button should transition into the \"Default\" state.'}),`\n`,(0,i.jsx)(e.li,{children:'If the request fails, the button should go back to the \"Liked\" state and an error message is shown below the button.'}),`\n`]}),`\n`]}),`\n`]}),`\n`]}),`\n`]})]})}function M(t={}){let{wrapper:e}=t.components||{};return e?(0,i.jsx)(e,Object.assign({},t,{children:(0,i.jsx)(f,t)})):f(t)}var m=M;var s=a(r());function g(t){let e=Object.assign({h2:\"h2\",ul:\"ul\",li:\"li\"},t.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{children:\"Notes\"}),`\n`,(0,s.jsxs)(e.ul,{children:[`\n`,(0,s.jsx)(e.li,{children:\"Some users might have the habit of double clicking on UI elements. By disabling the button after the first click, we avoid running into the situation where multiple requests are pending at the same time which is probably unintended and can lead to confusing outcomes.\"}),`\n`]})]})}function q(t={}){let{wrapper:e}=t.components||{};return e?(0,s.jsx)(e,Object.assign({},t,{children:(0,s.jsx)(g,t)})):g(t)}var b=q;function p(t){let e=Object.assign({h2:\"h2\",p:\"p\",h3:\"h3\",code:\"code\",ul:\"ul\",li:\"li\",ol:\"ol\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"Solution\"}),`\n`,(0,n.jsx)(e.p,{children:\"The focus of this question is in the handling of the various states when there's a pending request.\"}),`\n`,(0,n.jsx)(e.h3,{children:\"Initialization\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"To make the \",(0,n.jsx)(e.code,{children:\"likeButton\"}),\" function component-ized, the function takes in two elements, the button element and the error message element. It will be on the developer to ensure that separate instances of DOM elements are passed into the function if there are multiple Like buttons on the page.\"]}),`\n`,(0,n.jsx)(e.h3,{children:\"Data Model\"}),`\n`,(0,n.jsx)(e.p,{children:\"We'll need a few state variables:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"liked\"}),\": Tracks whether the button is in the default state or the liked state. Since there are only two states, we can use a boolean type to represent it.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"isPending\"}),\": Determines if there's a pending background request.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"errorMessage\"}),\": Error message obtained from the back end when the API request fails.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"Making Back End API Requests\"}),`\n`,(0,n.jsx)(e.p,{children:\"Writing code to make back end requests is pretty standard, in general you should use the following flow:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Set the UI to show a loading state.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Clear the error message.\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"Make the back end request via \",(0,n.jsx)(e.code,{children:\"fetch\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Determine if the request has succeeded.\",`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"If the response has succeeded, update the UI to indicate success.\"}),`\n`,(0,n.jsx)(e.li,{children:\"If the response has failed, update the UI to indicate failure by showing an error message.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.li,{children:\"Remove the loading state.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The above is captured in the \",(0,n.jsx)(e.code,{children:\"likeUnlikeAction\"}),\" function.\"]}),`\n`,(0,n.jsx)(e.h3,{children:\"Rendering\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Within the button, there are two elements which change often, the icon and the label. Hence we can create two inner \",(0,n.jsx)(e.code,{children:\"span\"}),\"s to contain those elements.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"We define two functions for rendering:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"init\"}),\": Renders the class names and the elements that don't change. As the name suggests, this function is only being initially and only once.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"update\"}),\": Updates the UI to reflect the latest state. This function is being called whenever the UI needs to be updated.\"]}),`\n`]}),`\n`,(0,n.jsx)(m,{}),`\n`,(0,n.jsx)(b,{})]})}function D(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(p,t)})):p(t)}var C=D;return y(U);})();\n;return Component;"
}
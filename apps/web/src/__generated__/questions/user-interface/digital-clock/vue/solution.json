{
  "author": "willnguyen1312",
  "files": {
    "/package.json": {
      "code": "{\n  \"name\": \"@gfe-questions/digital-clock-vue-solution\",\n  \"author\": \"willnguyen1312\",\n  \"version\": \"0.0.1\",\n  \"main\": \"/src/main.js\",\n  \"scripts\": {\n    \"serve\": \"vue-cli-service serve\",\n    \"build\": \"vue-cli-service build\"\n  },\n  \"dependencies\": {\n    \"core-js\": \"3.32.2\",\n    \"vue\": \"3.3.4\"\n  },\n  \"devDependencies\": {\n    \"@vue/cli-plugin-babel\": \"5.0.8\",\n    \"@vue/cli-service\": \"5.0.8\"\n  }\n}\n"
    },
    "/public/index.html": {
      "code": "<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width,initial-scale=1.0\" />\n    <title>Vue</title>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n    <!-- Built files will be auto injected -->\n  </body>\n</html>\n"
    },
    "/src/App.vue": {
      "code": "<script setup>\nimport Clock from './Clock.vue';\n</script>\n\n<template>\n  <div class=\"wrapper\">\n    <Clock />\n  </div>\n</template>\n\n<style>\n.wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</style>\n"
    },
    "/src/Clock.vue": {
      "code": "<script setup>\nimport { computed } from 'vue';\nimport Digit from './Digit.vue';\nimport Separator from './Separator.vue';\nimport { useCurrentDate } from './composables';\n\nfunction padTwoDigit(number) {\n  return number >= 10 ? String(number) : `0${number}`;\n}\n\nconst currentDate = useCurrentDate();\n\nconst currentTime = computed(() => {\n  const currentDateValue = currentDate.value;\n  let hours = currentDateValue.getHours() % 12;\n  hours = hours === 0 ? 12 : hours;\n  const minutes = currentDateValue.getMinutes();\n  const seconds = currentDateValue.getSeconds();\n  return {\n    hours,\n    minutes,\n    seconds,\n  };\n});\n\nconst dateTimeDisplay = computed(() => {\n  const { minutes, seconds } = currentTime.value;\n  return `${padTwoDigit(\n    currentDate.value.getHours(),\n  )}:${padTwoDigit(minutes)}:${padTwoDigit(seconds)}`;\n});\n</script>\n\n<template>\n  <!-- Use a <time> element with `datetime` attribute set\n   to the current time in 24-hour format so that\n   screen readers can read this component. -->\n  <time class=\"clock\" :dateTime=\"dateTimeDisplay\">\n    <Digit :number=\"parseInt(currentTime.hours / 10, 10)\" />\n    <Digit :number=\"currentTime.hours % 10\" />\n    <Separator />\n    <Digit\n      :number=\"parseInt(currentTime.minutes / 10, 10)\" />\n    <Digit :number=\"currentTime.minutes % 10\" />\n    <Separator />\n    <Digit\n      :number=\"parseInt(currentTime.seconds / 10, 10)\" />\n    <Digit :number=\"currentTime.seconds % 10\" />\n  </time>\n</template>\n\n<style>\n.clock {\n  --segment-width: 10px;\n  --segment-size: 40px;\n  --segment-color: #fff;\n\n  background-color: #000;\n  border: 10px solid #ccc;\n  border-radius: 10px;\n  display: flex;\n  gap: 10px;\n  padding: 20px;\n}\n</style>\n"
    },
    "/src/composables.js": {
      "code": "import { getCurrentScope, onScopeDispose, ref } from 'vue';\n\nexport function useCurrentDate() {\n  const date = ref(new Date());\n\n  const timer = setInterval(() => {\n    date.value = new Date();\n  }, 100);\n\n  if (getCurrentScope()) {\n    onScopeDispose(() => {\n      clearInterval(timer);\n    });\n  }\n\n  return date;\n}\n"
    },
    "/src/Digit.vue": {
      "code": "<script setup>\nimport { computed } from 'vue';\n\nconst ALL_SIDES = [\n  'digit-square-border-top',\n  'digit-square-border-left',\n  'digit-square-border-right',\n  'digit-square-border-bottom',\n];\n\nconst NUMBER_TO_CLASSES = {\n  0: {\n    top: [\n      'digit-square-border-top',\n      'digit-square-border-left',\n      'digit-square-border-right',\n    ],\n    bottom: [\n      'digit-square-border-bottom',\n      'digit-square-border-left',\n      'digit-square-border-right',\n    ],\n  },\n  1: {\n    top: ['digit-square-border-right'],\n    bottom: ['digit-square-border-right'],\n  },\n  2: {\n    top: [\n      'digit-square-border-top',\n      'digit-square-border-right',\n      'digit-square-border-bottom',\n    ],\n    bottom: [\n      'digit-square-border-top',\n      'digit-square-border-left',\n      'digit-square-border-bottom',\n    ],\n  },\n  3: {\n    top: [\n      'digit-square-border-top',\n      'digit-square-border-right',\n      'digit-square-border-bottom',\n    ],\n    bottom: [\n      'digit-square-border-top',\n      'digit-square-border-right',\n      'digit-square-border-bottom',\n    ],\n  },\n  4: {\n    top: [\n      'digit-square-border-left',\n      'digit-square-border-right',\n      'digit-square-border-bottom',\n    ],\n    bottom: [\n      'digit-square-border-right',\n      'digit-square-border-top',\n    ],\n  },\n  5: {\n    top: [\n      'digit-square-border-top',\n      'digit-square-border-left',\n      'digit-square-border-bottom',\n    ],\n    bottom: [\n      'digit-square-border-top',\n      'digit-square-border-right',\n      'digit-square-border-bottom',\n    ],\n  },\n  6: {\n    top: [\n      'digit-square-border-top',\n      'digit-square-border-left',\n      'digit-square-border-bottom',\n    ],\n    bottom: ALL_SIDES,\n  },\n  7: {\n    top: [\n      'digit-square-border-top',\n      'digit-square-border-right',\n    ],\n    bottom: ['digit-square-border-right'],\n  },\n  8: {\n    top: ALL_SIDES,\n    bottom: ALL_SIDES,\n  },\n  9: {\n    top: ALL_SIDES,\n    bottom: [\n      'digit-square-border-top',\n      'digit-square-border-right',\n      'digit-square-border-bottom',\n    ],\n  },\n};\n\nconst props = defineProps({\n  number: Number,\n});\n\nconst topClasses = computed(\n  () => NUMBER_TO_CLASSES[props.number].top,\n);\nconst bottomClasses = computed(\n  () => NUMBER_TO_CLASSES[props.number].bottom,\n);\n</script>\n\n<template>\n  <div>\n    <div\n      :class=\"[\n        'digit-square',\n        'digit-square-top',\n        ...topClasses,\n      ]\" />\n    <div\n      :class=\"[\n        'digit-square',\n        'digit-square-bottom',\n        ...bottomClasses,\n      ]\" />\n  </div>\n</template>\n\n<style>\n.digit-square {\n  border-style: solid;\n  border-color: transparent;\n  border-width: var(--segment-width);\n  box-sizing: border-box;\n  height: var(--segment-size);\n  width: var(--segment-size);\n}\n\n.digit-square-top {\n  border-bottom-width: calc(var(--segment-width) / 2);\n}\n\n.digit-square-bottom {\n  border-top-width: calc(var(--segment-width) / 2);\n}\n\n.digit-square-border-top {\n  border-top-color: var(--segment-color);\n}\n\n.digit-square-border-left {\n  border-left-color: var(--segment-color);\n}\n\n.digit-square-border-right {\n  border-right-color: var(--segment-color);\n}\n\n.digit-square-border-bottom {\n  border-bottom-color: var(--segment-color);\n}\n</style>\n"
    },
    "/src/main.js": {
      "code": "import { createApp } from 'vue';\nimport App from './App.vue';\n\nimport './styles.css';\n\ncreateApp(App).mount('#app');\n"
    },
    "/src/Separator.vue": {
      "code": "<template>\n  <div class=\"separator\">\n    <div class=\"separator-dot\" />\n    <div class=\"separator-dot\" />\n  </div>\n</template>\n\n<style>\n.separator {\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n}\n\n.separator-dot {\n  background-color: var(--segment-color);\n  border-radius: var(--segment-width);\n  height: var(--segment-width);\n  width: var(--segment-width);\n}\n</style>\n"
    },
    "/src/styles.css": {
      "code": "body {\n  font-family: sans-serif;\n}\n"
    }
  },
  "workspace": {
    "visibleFiles": [
      "/src/App.vue",
      "/src/Clock.vue",
      "/src/Digit.vue",
      "/src/Separator.vue",
      "/src/composables.js"
    ],
    "activeFile": "/src/Clock.vue",
    "environment": "vue-cli"
  },
  "writeup": "var Component=(()=>{var y=Object.create;var a=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),k=(t,e)=>{for(var c in e)a(t,c,{get:e[c],enumerable:!0})},l=(t,e,c,h)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of v(e))!j.call(t,i)&&i!==c&&a(t,i,{get:()=>e[i],enumerable:!(h=w(e,i))||h.enumerable});return t};var d=(t,e,c)=>(c=t!=null?y(x(t)):{},l(e||!t||!t.__esModule?a(c,\"default\",{value:t,enumerable:!0}):c,t)),D=t=>l(a({},\"__esModule\",{value:!0}),t);var s=_((X,m)=>{m.exports=_jsx_runtime});var S={};k(S,{default:()=>M});var n=d(s());var r=d(s());function u(t){let e=Object.assign({h2:\"h2\",ul:\"ul\",li:\"li\"},t.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{children:\"Test cases\"}),`\n`,(0,r.jsxs)(e.ul,{children:[`\n`,(0,r.jsx)(e.li,{children:\"See that the clock updates every second.\"}),`\n`,(0,r.jsx)(e.li,{children:\"Observe the clock for at least 10 seconds to see that each digit is displayed correctly.\"}),`\n`]})]})}function C(t={}){let{wrapper:e}=t.components||{};return e?(0,r.jsx)(e,Object.assign({},t,{children:(0,r.jsx)(u,t)})):u(t)}var p=C;var o=d(s());function f(t){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\"},t.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{children:\"Notes\"}),`\n`,(0,o.jsx)(e.p,{children:\"The update frequency of the timer depends on how accurate we want the clock to be. The maximum we can set is 1000ms, however, the clock's accuracy might be off by 1000ms in the case we load the page on the last millisecond of the second. However, using too small of an interval can be quite expensive. Hence a middleground we've chosen is 100ms. The clock can only ever be off by 100ms, which is not very noticeable by humans.\"}),`\n`,(0,o.jsx)(e.p,{children:\"The current date/time should be polled in each loop, as opposed to recording the time when the clock was first rendered and incrementing based on the interval duration of the timer because the invocations of the loop can be delayed by processes hogging the main thread and the loop may not run at every fixed interval.\"}),`\n`,(0,o.jsx)(e.h2,{children:\"Accessibility\"}),`\n`,(0,o.jsxs)(e.p,{children:[\"For a11y reasons, use a \",(0,o.jsx)(e.code,{children:\"<time>\"}),\" element with \",(0,o.jsx)(e.code,{children:\"datetime\"}),\" attribute set to the current time in 24-hour format so that screen readers can read this component. Otherwise the component will be ignored by screen readers, which is bad. Add the \",(0,o.jsx)(e.code,{children:\"aria-hidden\"}),\" attribute to the internals of \",(0,o.jsx)(e.code,{children:\"<time>\"}),\" since they are for presentation purposes and not useful to screen readers.\"]})]})}function F(t={}){let{wrapper:e}=t.components||{};return e?(0,o.jsx)(e,Object.assign({},t,{children:(0,o.jsx)(f,t)})):f(t)}var b=F;function g(t){let e=Object.assign({h2:\"h2\",p:\"p\",h3:\"h3\",code:\"code\",a:\"a\",ul:\"ul\",li:\"li\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"Solution\"}),`\n`,(0,n.jsx)(e.p,{children:\"We can separate out the solution into two parts, the update loop and the rendering.\"}),`\n`,(0,n.jsx)(e.h3,{children:\"Update loop\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"We need a timer to refresh the page and display the current time every second. To create the timer, we can use a \",(0,n.jsx)(e.code,{children:\"setInterval\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Do remember to register a callback to \",(0,n.jsx)(e.code,{children:\"onUnmounted\"}),\" lifecycle hook to clear the timer to avoid memory leaks.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Store the JavaScript \",(0,n.jsx)(e.code,{children:\"Date\"}),\" object as state as it contains all the data we need.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"For better reusability, these logic can be abstracted into a custom \",(0,n.jsx)(e.code,{children:\"useCurrentDate\"}),\" composable. We can use \",(0,n.jsx)(e.code,{children:\"onScopeDispose\"}),\" as a replacement for \",(0,n.jsx)(e.code,{children:\"unmounted\"}),\" lifecycle hook since this method can be used as a replacement for \",(0,n.jsx)(e.code,{children:\"onUnmounted\"}),\" in reusable composition functions.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"This part is exactly the same as the \",(0,n.jsx)(e.a,{href:\"/questions/user-interface/analog-clock\",children:\"Analog Clock\"}),\" question.\"]}),`\n`,(0,n.jsx)(e.h3,{children:\"Rendering\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Now that we have access to the most updated \",(0,n.jsx)(e.code,{children:\"Date\"}),\" in the \",(0,n.jsx)(e.code,{children:\"Clock\"}),\" component, we can render it. Firstly create two smaller components for the \",(0,n.jsx)(e.code,{children:\"Digit\"}),\" and \",(0,n.jsx)(e.code,{children:\"Separator\"}),\".\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"Digit\"}),\": renders numbers from 0-9 using the segment display. We make use of two square \",(0,n.jsx)(e.code,{children:\"<div>\"}),\"s and CSS borders to achieve the effect. For each number, create a configuration of the borders that need to be shown and retrieve the configuration for that number.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"Separator\"}),\": renders the two circles that look like colons.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"To get the first digit of an hour/minute/second, we can divide by 10 and round it down. To get the second digit, we do modulo 10 to leave only the value in the ones-place.\"}),`\n`,(0,n.jsx)(p,{}),`\n`,(0,n.jsx)(b,{})]})}function T(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(g,t)})):g(t)}var M=T;return D(S);})();\n;return Component;"
}
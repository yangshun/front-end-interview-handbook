{
  "author": "tanhauhau",
  "files": {
    "/package.json": {
      "code": "{\n  \"name\": \"@gfe-questions/job-board-svelte-solution\",\n  \"author\": \"tanhauhau\",\n  \"version\": \"0.0.1\",\n  \"main\": \"src/index.js\",\n  \"dependencies\": {\n    \"svelte\": \"^3.58.0\"\n  }\n}\n"
    },
    "/public/index.html": {
      "code": "<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf8\" />\n    <meta name=\"viewport\" content=\"width=device-width\" />\n    <title>Svelte</title>\n    <link rel=\"stylesheet\" href=\"public/bundle.css\" />\n  </head>\n\n  <body>\n    <script src=\"bundle.js\"></script>\n  </body>\n</html>\n"
    },
    "/src/App.svelte": {
      "code": "<script>\n  import JobPosting from './JobPosting.svelte';\n  const PAGE_SIZE = 6;\n  let pageCount = 1;\n  let jobIdsCache = null;\n\n  async function fetchJobIds(currPage) {\n    let jobs = jobIdsCache;\n    if (!jobs) {\n      const res = await fetch(\n        'https://hacker-news.firebaseio.com/v0/jobstories.json',\n      );\n      jobIdsCache = jobs = await res.json();\n    }\n    const start = currPage * PAGE_SIZE;\n    const end = start + PAGE_SIZE;\n    return jobs.slice(start, end);\n  }\n\n  async function fetchJobs(currPage) {\n    const jobIdsForPage = await fetchJobIds(currPage);\n    const jobsForPage = await Promise.all(\n      jobIdsForPage.map((jobId) =>\n        fetch(\n          `https://hacker-news.firebaseio.com/v0/item/${jobId}.json`,\n        ).then((res) => res.json()),\n      ),\n    );\n    return jobsForPage;\n  }\n</script>\n\n<div class=\"app\">\n  <h1 class=\"title\">Hacker News Jobs Board</h1>\n\n  <div>\n    <div class=\"jobs\" role=\"list\">\n      {#each { length: pageCount } as _, page}\n        {#await fetchJobs(page)}\n          <p class=\"loading\">Loading...</p>\n        {:then jobs}\n          {#each jobs as job}\n            <JobPosting {...job} />\n          {/each}\n          {#if page === pageCount - 1 && jobs.length === PAGE_SIZE}\n            <button\n              class=\"load-more-button\"\n              on:click={() => pageCount++}>\n              Load more jobs\n            </button>\n          {/if}\n        {/await}\n      {/each}\n    </div>\n  </div>\n</div>\n\n<style>\n  .app {\n    max-width: 600px;\n    margin: 0 auto;\n  }\n\n  .title {\n    font-size: 24px;\n    font-weight: bold;\n    color: #ff6600;\n    margin-bottom: 24px;\n  }\n\n  .jobs {\n    display: grid;\n    row-gap: 16px;\n  }\n  .loading {\n    color: #4d4d4d;\n    font-weight: bold;\n    font-size: 18px;\n  }\n\n  .load-more-button {\n    background-color: #ff6600;\n    border: none;\n    border-radius: 4px;\n    color: #fff;\n    margin-top: 20px;\n    padding: 8px 12px;\n  }\n\n  .load-more-button:not(:disabled) {\n    cursor: pointer;\n  }\n\n  .load-more-button:hover {\n    background-color: #e65c00;\n  }\n</style>\n"
    },
    "/src/index.js": {
      "code": "import App from './App.svelte';\nimport './styles.css';\n\nconst app = new App({\n  target: document.body,\n});\n\nexport default app;\n"
    },
    "/src/JobPosting.svelte": {
      "code": "<script>\n  export let url;\n  export let title;\n  export let time;\n  export let by;\n</script>\n\n<div class=\"post\" role=\"listitem\">\n  <h2 class=\"post__title\">\n    {#if url}\n      <a\n        href={url}\n        target=\"_blank\"\n        rel=\"noopener\">\n        {title}\n      </a>\n    {:else}\n      {title}\n    {/if}\n  </h2>\n  <p class=\"post__metadata\">\n    By {by} &middot; {new Date(\n      time * 1000,\n    ).toLocaleString()}\n  </p>\n</div>\n\n<style>\n  .post {\n    background-color: #fff;\n    border: 1px solid #dcdcdc;\n    border-radius: 4px;\n    padding: 16px;\n    display: grid;\n    row-gap: 8px;\n  }\n\n  .post__title {\n    font-size: 16px;\n    font-weight: bold;\n    margin-top: 0;\n  }\n\n  .post__metadata {\n    font-size: 14px;\n    color: #444;\n  }\n</style>\n"
    },
    "/src/styles.css": {
      "code": "body {\n  font-family: sans-serif;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  background-color: #f6f6ef;\n  color: #000;\n  font-family: sans-serif;\n  font-size: 16px;\n  padding: 16px;\n}\n"
    }
  },
  "workspace": {
    "visibleFiles": [
      "/src/App.svelte",
      "/src/JobPosting.svelte",
      "/src/styles.css"
    ],
    "activeFile": "/src/App.svelte",
    "environment": "svelte"
  },
  "writeup": "var Component=(()=>{var j=Object.create;var c=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty;var k=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),x=(n,e)=>{for(var a in e)c(n,a,{get:e[a],enumerable:!0})},l=(n,e,a,d)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let h of y(e))!I.call(n,h)&&h!==a&&c(n,h,{get:()=>e[h],enumerable:!(d=w(e,h))||d.enumerable});return n};var s=(n,e,a)=>(a=n!=null?j(v(n)):{},l(e||!n||!n.__esModule?c(a,\"default\",{value:n,enumerable:!0}):a,n)),_=n=>l(c({},\"__esModule\",{value:!0}),n);var r=k((M,u)=>{u.exports=_jsx_runtime});var A={};x(A,{default:()=>T});var t=s(r());var i=s(r());function g(n){let e=Object.assign({h2:\"h2\",ol:\"ol\",li:\"li\",code:\"code\"},n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{children:\"Test cases\"}),`\n`,(0,i.jsxs)(e.ol,{children:[`\n`,(0,i.jsx)(e.li,{children:'Initial Loading: Verify that when the page loads, the message \"Loading...\" is displayed until the job IDs are fetched from the Hacker News API.'}),`\n`,(0,i.jsx)(e.li,{children:\"Job Postings: Once the job IDs are fetched, check that the job postings are rendered correctly. Verify that the job title, poster, and timestamp are displayed accurately for each job posting.\"}),`\n`,(0,i.jsxs)(e.li,{children:[\"Click on a job title and ensure that it opens the correct URL in a new tab or window if there's a \",(0,i.jsx)(e.code,{children:\"url\"}),\" field in the job details.\"]}),`\n`,(0,i.jsx)(e.li,{children:'Pagination: Click the \"Load more\" button and verify that additional job postings are fetched and displayed. Repeat this step multiple times to ensure that pagination works correctly.'}),`\n`,(0,i.jsx)(e.li,{children:'Button State: Check that the \"Load more\" button is disabled while job details are being fetched to prevent multiple requests. Verify that the button becomes enabled again once the fetching process is complete.'}),`\n`,(0,i.jsx)(e.li,{children:'Keyboard Navigation: Use only the keyboard to navigate through the job postings and interact with the \"Load more\" button. Ensure that all interactive elements are accessible and usable without requiring a mouse.'}),`\n`]})]})}function C(n={}){let{wrapper:e}=n.components||{};return e?(0,i.jsx)(e,Object.assign({},n,{children:(0,i.jsx)(g,n)})):g(n)}var b=C;var o=s(r());function f(n){let e=Object.assign({h2:\"h2\",ul:\"ul\",li:\"li\"},n.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{children:\"Notes\"}),`\n`,(0,o.jsxs)(e.ul,{children:[`\n`,(0,o.jsx)(e.li,{children:\"Note that we aren't handling any API failure cases here. It'd be good for you to handle them!\"}),`\n`]})]})}function D(n={}){let{wrapper:e}=n.components||{};return e?(0,o.jsx)(e,Object.assign({},n,{children:(0,o.jsx)(f,n)})):f(n)}var p=D;function m(n){let e=Object.assign({h2:\"h2\",h3:\"h3\",p:\"p\",ul:\"ul\",li:\"li\",code:\"code\",h4:\"h4\"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{children:\"Solution\"}),`\n`,(0,t.jsx)(e.h3,{children:\"Variables\"}),`\n`,(0,t.jsx)(e.p,{children:\"The Svelte code introduces the following variables to manage the application's behavior and data flow:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:\"PAGE_SIZE\"}),\": A constant that defines the number of jobs to be displayed on each page.\"]}),`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:\"pageCount\"}),\": This variable maintains the number of pages the user has navigated through, which determines the set of job details to be fetched.\"]}),`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:\"jobIdsCache\"}),\": It acts as a cache to store the array of job IDs from the Hacker News API. This avoids fetching the same data multiple times and impr oves the application's performance.\"]}),`\n`]}),`\n`,(0,t.jsx)(e.h3,{children:\"Fetching Data\"}),`\n`,(0,t.jsx)(e.h4,{children:(0,t.jsx)(e.code,{children:\"fetchJobIds\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"This asynchronous function retrieves a list of job IDs from the Hacker News API based on the current page (\",(0,t.jsx)(e.code,{children:\"currPage\"}),\"). If the \",(0,t.jsx)(e.code,{children:\"jobIdsCache\"}),\" is empty (i.e., data hasn't been fetched before), the function fetches the job IDs from the API and then updates the \",(0,t.jsx)(e.code,{children:\"jobIdsCache\"}),\" with the fetched data. After this, the function calculates the start and end indices for the current page based on the \",(0,t.jsx)(e.code,{children:\"PAGE_SIZE\"}),\" and slices the array to return the relevant set of job IDs.\"]}),`\n`,(0,t.jsx)(e.h4,{children:(0,t.jsx)(e.code,{children:\"fetchJobs\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"Another asynchronous function, \",(0,t.jsx)(e.code,{children:\"fetchJobs\"}),\", is tasked with fetching the details for each job based on the job IDs obtained from \",(0,t.jsx)(e.code,{children:\"fetchJobIds\"}),\". It first fetches the job IDs for the current page and then, using \",(0,t.jsx)(e.code,{children:\"Promise.all\"}),\", it initiates multiple requests to the Hacker News API to get the details for each job. Once all the promises are resolved, it returns an array of job details which are then rendered on the page.\"]}),`\n`,(0,t.jsx)(e.h3,{children:\"Rendering\"}),`\n`,(0,t.jsx)(e.p,{children:\"Some notable aspects of the rendering code include:\"}),`\n`,(0,t.jsxs)(e.h4,{children:[(0,t.jsx)(e.code,{children:\"{#each}\"}),\" Block:\"]}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[\"The \",(0,t.jsx)(e.code,{children:\"{#each}\"}),\" block is used to iterate over a range defined by the \",(0,t.jsx)(e.code,{children:\"pageCount\"}),\". For each page, it fetches and renders the job postings corresponding to that page. This is achieved by the line \",(0,t.jsx)(e.code,{children:\"{#each { length: pageCount } as _, page}\"}),\". Here, the \",(0,t.jsx)(e.code,{children:\"_\"}),\" is a placeholder (which we aren't using), and \",(0,t.jsx)(e.code,{children:\"page\"}),\" gives us the current page number.\"]}),`\n`,(0,t.jsxs)(e.li,{children:[\"Inside this block, another block \",(0,t.jsx)(e.code,{children:\"{#await fetchJobs(page)}\"}),\" is used. The \",(0,t.jsx)(e.code,{children:\"{#await}\"}),\" block in Svelte is a special construct designed to handle promises. It shows the \",(0,t.jsx)(e.code,{children:\"loading\"}),\" message while the promise (in this case, fetching job details) is unresolved. Once the promise is resolved, the \",(0,t.jsx)(e.code,{children:\"{:then jobs}\"}),\" block is executed, rendering the list of jobs for the current page using the \",(0,t.jsx)(e.code,{children:\"JobPosting\"}),\" component.\"]}),`\n`]}),`\n`,(0,t.jsx)(e.h4,{children:'\"Load More\" Button:'}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[\"Within the \",(0,t.jsx)(e.code,{children:\"{#each}\"}),\" block, after listing the jobs for the current page, there's a conditional \",(0,t.jsx)(e.code,{children:\"{#if}\"}),' block that checks whether the \"Load more jobs\" button should be displayed. This condition evaluates to true if the current page is the last loaded page and the number of jobs fetched for that page equals ',(0,t.jsx)(e.code,{children:\"PAGE_SIZE\"}),\" (indicating there might be more jobs to load). This is achieved by the condition \",(0,t.jsx)(e.code,{children:\"{#if page === pageCount - 1 && jobs.length === PAGE_SIZE}\"}),\".\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:['The \"Load more jobs\" button, when clicked, increments the ',(0,t.jsx)(e.code,{children:\"pageCount\"}),\", effectively adding another page to our \",(0,t.jsx)(e.code,{children:\"{#each}\"}),\" block and triggering the fetching and rendering of the next set of job postings. This is a neat trick to implement pagination without having to deal with complex state management. The button's behavior is governed by the line \",(0,t.jsx)(e.code,{children:\"on:click={() => pageCount++}\"}),\".\"]}),`\n`]}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:\"By utilizing the above constructs, the Svelte application achieves an efficient paginated rendering of job postings, seamlessly integrating data fetching with user interactions.\"}),`\n`,(0,t.jsx)(b,{}),`\n`,(0,t.jsx)(p,{})]})}function P(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(m,n)})):m(n)}var T=P;return _(A);})();\n;return Component;"
}
{
  "skeleton": "var Component=(()=>{var u=Object.create;var r=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),x=(t,e)=>{for(var o in e)r(t,o,{get:e[o],enumerable:!0})},h=(t,e,o,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of j(e))!w.call(t,i)&&i!==o&&r(t,i,{get:()=>e[i],enumerable:!(l=f(e,i))||l.enumerable});return t};var c=(t,e,o)=>(o=t!=null?u(g(t)):{},h(e||!t||!t.__esModule?r(o,\"default\",{value:t,enumerable:!0}):o,t)),k=t=>h(r({},\"__esModule\",{value:!0}),t);var a=y((M,d)=>{d.exports=_jsx_runtime});var _={};x(_,{default:()=>C});var s=c(a());var n=c(a());function p(t){let e=Object.assign({p:\"p\",img:\"img\",h2:\"h2\",ul:\"ul\",li:\"li\",code:\"code\",h3:\"h3\",a:\"a\",pre:\"pre\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Build a job board that displays the latest job postings fetched from the Hacker News API, with each posting displaying the job title, poster, and date posted.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/img/questions/job-board/job-board-example.png\",alt:\"Job board example\"})}),`\n`,(0,n.jsx)(e.h2,{children:\"Requirements\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"The page should show 6 jobs on initial load with a button to load more postings.\"}),`\n`,(0,n.jsx)(e.li,{children:`Clicking on the \"Load more\" button will load the next page of 6 postings. The button does not appear if there aren't any more postings to load.`}),`\n`,(0,n.jsxs)(e.li,{children:[\"If there's a \",(0,n.jsx)(e.code,{children:\"url\"}),\" field returned for the job details, make the job title a link that opens the job details page in a new window when clicked.\"]}),`\n`,(0,n.jsx)(e.li,{children:\"The timestamp can be formatted in any way you like.\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{children:\"API\"}),`\n`,(0,n.jsx)(e.p,{children:\"Hacker News has a public API to fetch jobs by Y Combinator companies. There's no single API that fetches a list of jobs together with the data, so you will have to make separate requests to fetch the necessary data and combine them to be displayed.\"}),`\n`,(0,n.jsx)(e.h3,{children:\"Job Stories\"}),`\n`,(0,n.jsx)(e.p,{children:\"Fetches a list of job posting IDs.\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"URL: \",(0,n.jsx)(e.a,{href:\"https://hacker-news.firebaseio.com/v0/jobstories.json\",children:\"https://hacker-news.firebaseio.com/v0/jobstories.json\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"HTTP Method: \",(0,n.jsx)(e.code,{children:\"GET\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Content Type: \",(0,n.jsx)(e.code,{children:\"json\"})]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Sample response:\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`[35908337, 35904973, 35900922, 35893439, 35890114, 35880345, ...]\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"Job Details\"}),`\n`,(0,n.jsx)(e.p,{children:\"Fetches job posting details given its ID.\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"URL: \",(0,n.jsx)(e.code,{children:\"https://hacker-news.firebaseio.com/v0/item/{id}.json\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"HTTP Method: \",(0,n.jsx)(e.code,{children:\"GET\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Content Type: \",(0,n.jsx)(e.code,{children:\"json\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Sample response for \",(0,n.jsx)(e.a,{href:\"https://hacker-news.firebaseio.com/v0/item/35908337.json\",children:\"https://hacker-news.firebaseio.com/v0/item/35908337.json\"}),\":\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-json\",children:`{\n  \"by\": \"jamilbk\",\n  \"id\": 35908337,\n  \"score\": 1,\n  \"time\": 1683838872,\n  \"title\": \"Firezone (YC W22) is hiring Elixir and Rust engineers\",\n  \"type\": \"job\",\n  \"url\": \"https://www.ycombinator.com/companies/firezone/jobs\"\n}\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"Notes\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"The focus of this question is on functionality and not on styling, but feel free to beautify the page.\"}),`\n`,(0,n.jsx)(e.li,{children:\"To improve the user experience and avoid overfetching, you may want to limit the number of job details fetched to the number of jobs visible on the page.\"}),`\n`]})]})}function T(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(p,t)})):p(t)}var m=T;function b(t){return(0,s.jsx)(m,{})}function v(t={}){let{wrapper:e}=t.components||{};return e?(0,s.jsx)(e,Object.assign({},t,{children:(0,s.jsx)(b,t)})):b(t)}var C=v;return k(_);})();\n;return Component;",
  "solution": "var Component=(()=>{var j=Object.create;var r=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var I=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var k=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),D=(n,e)=>{for(var a in e)r(n,a,{get:e[a],enumerable:!0})},l=(n,e,a,d)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of w(e))!v.call(n,s)&&s!==a&&r(n,s,{get:()=>e[s],enumerable:!(d=y(e,s))||d.enumerable});return n};var c=(n,e,a)=>(a=n!=null?j(I(n)):{},l(e||!n||!n.__esModule?r(a,\"default\",{value:n,enumerable:!0}):a,n)),x=n=>l(r({},\"__esModule\",{value:!0}),n);var h=k((A,u)=>{u.exports=_jsx_runtime});var P={};D(P,{default:()=>J});var t=c(h());var o=c(h());function b(n){let e=Object.assign({h2:\"h2\",ol:\"ol\",li:\"li\",code:\"code\"},n.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{children:\"Test cases\"}),`\n`,(0,o.jsxs)(e.ol,{children:[`\n`,(0,o.jsx)(e.li,{children:'Initial Loading: Verify that when the page loads, the message \"Loading...\" is displayed until the job IDs are fetched from the Hacker News API.'}),`\n`,(0,o.jsx)(e.li,{children:\"Job Postings: Once the job IDs are fetched, check that the job postings are rendered correctly. Verify that the job title, poster, and timestamp are displayed accurately for each job posting.\"}),`\n`,(0,o.jsxs)(e.li,{children:[\"Click on a job title and ensure that it opens the correct URL in a new tab or window if there's a \",(0,o.jsx)(e.code,{children:\"url\"}),\" field in the job details.\"]}),`\n`,(0,o.jsx)(e.li,{children:'Pagination: Click the \"Load more\" button and verify that additional job postings are fetched and displayed. Repeat this step multiple times to ensure that pagination works correctly.'}),`\n`,(0,o.jsx)(e.li,{children:'Button State: Check that the \"Load more\" button is disabled while job details are being fetched to prevent multiple requests. Verify that the button becomes enabled again once the fetching process is complete.'}),`\n`,(0,o.jsx)(e.li,{children:'Keyboard Navigation: Use only the keyboard to navigate through the job postings and interact with the \"Load more\" button. Ensure that all interactive elements are accessible and usable without requiring a mouse.'}),`\n`]})]})}function L(n={}){let{wrapper:e}=n.components||{};return e?(0,o.jsx)(e,Object.assign({},n,{children:(0,o.jsx)(b,n)})):b(n)}var f=L;var i=c(h());function g(n){let e=Object.assign({h2:\"h2\",ul:\"ul\",li:\"li\"},n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{children:\"Notes\"}),`\n`,(0,i.jsxs)(e.ul,{children:[`\n`,(0,i.jsx)(e.li,{children:\"Note that we aren't handling any API failure cases here. It'd be good for you to handle them!\"}),`\n`]})]})}function T(n={}){let{wrapper:e}=n.components||{};return e?(0,i.jsx)(e,Object.assign({},n,{children:(0,i.jsx)(g,n)})):g(n)}var p=T;function m(n){let e=Object.assign({h2:\"h2\",p:\"p\",ol:\"ol\",li:\"li\",h3:\"h3\",ul:\"ul\",code:\"code\",h4:\"h4\",a:\"a\"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{children:\"Solution\"}),`\n`,(0,t.jsx)(e.p,{children:\"The high level approach to solving this question is to break down the solution into smaller parts/steps:\"}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsx)(e.li,{children:\"Fetch the list of all job IDs.\"}),`\n`,(0,t.jsx)(e.li,{children:\"With the list of job IDs, fetch job details for the current page of job IDs.\"}),`\n`,(0,t.jsx)(e.li,{children:\"Present the jobs data in a card format.\"}),`\n`,(0,t.jsx)(e.li,{children:'Trigger the fetching of job details again when the \"Load more jobs\" button is pressed.'}),`\n`]}),`\n`,(0,t.jsx)(e.h3,{children:\"State\"}),`\n`,(0,t.jsx)(e.p,{children:\"The code utilizes several state variables to manage the application's behavior and data flow:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:\"fetchingJobDetails\"}),': Keeps track of whether job details are currently being fetched from the API. It is used to disable the \"Load more\" button and provide feedback to the user during the fetching process.']}),`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:\"page\"}),': The current page number which determines which set of job IDs and details to fetch. It is incremented when the user clicks on the \"Load more\" button.']}),`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:\"jobIds\"}),\": An array of job IDs retrieved from the Hacker News API. It is initially set to \",(0,t.jsx)(e.code,{children:\"null\"}),\" and later populated with data from the API. It allows for pagination and fetching job details based on the IDs.\"]}),`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:\"jobs\"}),\": Maintains an array of job objects containing details like job title, author, time, and URL. It is initially an empty array and is updated when fetching job details from the API.\"]}),`\n`]}),`\n`,(0,t.jsx)(e.h3,{children:\"Rendering\"}),`\n`,(0,t.jsx)(e.p,{children:\"Some notable aspects of the rendering code include:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[\"The use of CSS Grid for the list of posts: The job postings are displayed in a grid layout using the \",(0,t.jsx)(e.code,{children:\"display: grid\"}),\" CSS property. This is a convenient way to allow consistent spacing between job postings.\"]}),`\n`,(0,t.jsx)(e.li,{children:'Styling of the \"Load more\" button: The \"Load more\" button is styled with a specific background color, border, and padding to make it visually prominent. The button also changes color on hover to provide visual feedback to the user.'}),`\n`]}),`\n`,(0,t.jsx)(e.h3,{children:\"Fetching Data\"}),`\n`,(0,t.jsx)(e.h4,{children:(0,t.jsx)(e.code,{children:\"fetchJobIds\"})}),`\n`,(0,t.jsx)(e.p,{children:\"This asynchronous method is responsible for fetching the current page's list of job IDs from the Hacker News API and is called with the current page number as an argument.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Since the API only has a single endpoint to fetch all the top job listings, we only need to fetch the list once and save it as \",(0,t.jsx)(e.code,{children:\"jobIds\"}),\" in state by making a \",(0,t.jsx)(e.code,{children:\"GET\"}),\" request to the API endpoint. Once the job IDs are retrieved, it slices the array based on the current page and returns the relevant subset of job IDs. Subsequent calls to this function will just be slicing the array without fetching the data again.\"]}),`\n`,(0,t.jsx)(e.h4,{children:(0,t.jsx)(e.code,{children:\"fetchJobs\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"This asynchronous method fetches the job details based on the job IDs obtained from the \",(0,t.jsx)(e.code,{children:\"fetchJobIds\"}),\" method. It is called with the current page number as an argument. Inside the method, it calls \",(0,t.jsx)(e.code,{children:\"fetchJobIds(currPage)\"}),\" to get the job IDs for the current page then sets the \",(0,t.jsx)(e.code,{children:\"fetchingJobDetails\"}),\" state variable to \",(0,t.jsx)(e.code,{children:\"true\"}),\" to indicate that job details are being fetched. Using \",(0,t.jsx)(e.code,{children:\"Promise.all\"}),\", it makes multiple GET requests to the Hacker News API to fetch the details of each job, using the current page's job IDs. Once the job details are obtained, it updates the \",(0,t.jsx)(e.code,{children:\"jobs\"}),\" state variable by appending the newly-fetched jobs to the existing ones. Finally, it sets \",(0,t.jsx)(e.code,{children:\"fetchingJobDetails\"}),\" back to false to indicate that the fetching process is complete.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"The \",(0,t.jsx)(e.code,{children:\"useEffect\"}),\" hook is responsible for triggering the \",(0,t.jsx)(e.code,{children:\"fetchJobs\"}),\" method whenever the \",(0,t.jsx)(e.code,{children:\"page\"}),' state variable changes. It ensures that when the page number is updated (e.g., when the user clicks the \"Load more\" button), the ',(0,t.jsx)(e.code,{children:\"fetchJobs\"}),\" method is called to fetch the corresponding job details for the new page. It's recommended to use \",(0,t.jsx)(e.code,{children:\"useEffect\"}),\" to sync the jobs details data with the current page instead of triggering \",(0,t.jsx)(e.code,{children:\"fetchJobs\"}),' on clicking the \"Load more\" button because it can easily extend to additional sources of pagination, such as infinite scrolling, additional pagination buttons, etc.']}),`\n`,(0,t.jsxs)(e.p,{children:[\"In React, \",(0,t.jsxs)(e.a,{href:\"https://react.dev/reference/react/useEffect#my-effect-runs-twice-when-the-component-mounts\",children:[(0,t.jsx)(e.code,{children:\"useEffect\"}),\" (and hence \",(0,t.jsx)(e.code,{children:\"fetchJobs\"}),\") runs twice on component mount during development in Strict Mode\"]}),\". Does this mean the fetched jobs details are added twice to the jobs array? Thankfully, since the value of \",(0,t.jsx)(e.code,{children:\"jobs\"}),\" within the closure of \",(0,t.jsx)(e.code,{children:\"fetchJobs\"}),\" is the same, the resulting \",(0,t.jsx)(e.code,{children:\"combinedJobs\"}),\" will be the same, assuming the results for the API stays the same between requests.\"]}),`\n`,(0,t.jsx)(e.h3,{children:\"Handling race conditions\"}),`\n`,(0,t.jsx)(e.p,{children:\"When dealing with async requests, race conditions can happen which can lead to bugs:\"}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[\"Request completing after the component has unmounted. We can use a \",(0,t.jsx)(e.code,{children:\"ref\"}),\" in React to track component mount status and ignore requests that complete after the component is no longer mounted.\"]}),`\n`,(0,t.jsxs)(e.li,{children:[\"Requests not returning in order. Out-of-order requests is mostly not a problem in this app because we only allow fetching one page of jobs at a single time. Job details for a page are fetched in parallel and are only added after all the requests are completed. \",(0,t.jsx)(e.code,{children:\"fetchJobs\"}),\" being called twice by \",(0,t.jsx)(e.code,{children:\"useEffect\"}),\" on mount has a race condition problem but it has been handled as mentioned above.\"]}),`\n`]}),`\n`,(0,t.jsx)(f,{}),`\n`,(0,t.jsx)(p,{})]})}function _(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(m,n)})):m(n)}var J=_;return x(P);})();\n;return Component;"
}
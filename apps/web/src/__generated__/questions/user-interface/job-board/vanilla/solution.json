{
  "author": "dhillon",
  "files": {
    "/index.html": {
      "code": "<!doctype html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1.0\" />\n  </head>\n  <body>\n    <div class=\"app\">\n      <h1 class=\"title\">Hacker News Jobs Board</h1>\n      <p class=\"loading\">Loading...</p>\n      <div id=\"job-list-container\" hidden>\n        <div class=\"jobs\" role=\"list\"></div>\n        <button class=\"load-more-button\"></button>\n      </div>\n    </div>\n    <template id=\"job-posting-template\">\n      <div class=\"post\" role=\"listitem\">\n        <h2 class=\"post__title\"></h2>\n        <p class=\"post__metadata\">\n          By <span class=\"post__author\"></span> &middot;\n          <span class=\"post__timestamp\"></span>\n        </p>\n      </div>\n    </template>\n    <script src=\"src/index.js\"></script>\n  </body>\n</html>\n"
    },
    "/package.json": {
      "code": "{\n  \"name\": \"@gfe-questions/job-board-vanilla-solution\",\n  \"author\": \"dhillon\",\n  \"version\": \"0.0.1\",\n  \"private\": true,\n  \"devDependencies\": {\n    \"parcel\": \"2.9.3\"\n  },\n  \"source\": \"index.html\",\n  \"scripts\": {\n    \"start\": \"parcel\",\n    \"build\": \"parcel build\"\n  }\n}\n"
    },
    "/src/index.js": {
      "code": "import './styles.css';\n\n(() => {\n  const PAGE_SIZE = 6;\n  const $loadingEl = document.querySelector('.loading');\n  const $jobListContainerEl = document.querySelector(\n    '#job-list-container',\n  );\n  const $jobList = document.querySelector('.jobs');\n  const $loadMoreButtonEl = document.querySelector(\n    '.load-more-button',\n  );\n  let jobIds = null;\n  let page = 0;\n\n  async function fetchJobIds(currPage) {\n    let jobs = jobIds;\n    if (!jobs) {\n      const res = await fetch(\n        'https://hacker-news.firebaseio.com/v0/jobstories.json',\n      );\n      jobIds = await res.json();\n    }\n\n    const start = currPage * PAGE_SIZE;\n    const end = start + PAGE_SIZE;\n\n    return jobIds.slice(start, end);\n  }\n\n  async function fetchJobs(currPage) {\n    const jobIdsForPage = await fetchJobIds(currPage);\n\n    setFetchingJobDetails(true);\n    const jobsForPage = await Promise.all(\n      jobIdsForPage.map((jobId) =>\n        fetch(\n          `https://hacker-news.firebaseio.com/v0/item/${jobId}.json`,\n        ).then((res) => res.json()),\n      ),\n    );\n    appendJobs(jobsForPage);\n\n    setFetchingJobDetails(false);\n\n    $loadingEl.hidden = true;\n    $jobListContainerEl.hidden = false;\n  }\n\n  function setFetchingJobDetails(fetching) {\n    $loadMoreButtonEl.disabled = fetching;\n    $loadMoreButtonEl.textContent = fetching\n      ? 'Loading...'\n      : 'Load more';\n  }\n\n  function appendJobs(jobs) {\n    const $fragmentEl = document.createDocumentFragment();\n    $fragmentEl.append(...jobs.map(createJobPostingEl));\n    $jobList.append($fragmentEl);\n  }\n\n  function createJobPostingEl(job) {\n    const $templateEl = document.getElementById(\n      'job-posting-template',\n    );\n    const $post = $templateEl.content.cloneNode(true);\n\n    if (job.url) {\n      const $link = document.createElement('a');\n      $link.href = job.url;\n      $link.textContent = job.title;\n      $post\n        .querySelector('.post__title')\n        .appendChild($link);\n    } else {\n      $post.querySelector('.post__title').textContent =\n        job.title;\n    }\n\n    $post.querySelector('.post__author').textContent =\n      job.by;\n    $post.querySelector('.post__timestamp').textContent =\n      new Date(job.time * 1000).toLocaleString();\n\n    return $post;\n  }\n\n  $loadMoreButtonEl.addEventListener('click', () => {\n    fetchJobs(++page);\n  });\n\n  fetchJobs(page);\n})();\n"
    },
    "/src/styles.css": {
      "code": "* {\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  background-color: #f6f6ef;\n  color: #000;\n  font-family: sans-serif;\n  font-size: 16px;\n  padding: 16px;\n}\n\na {\n  color: inherit;\n  text-decoration: none;\n}\n\na:hover {\n  text-decoration: underline;\n}\n\n.app {\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.title {\n  font-size: 24px;\n  font-weight: bold;\n  color: #ff6600;\n  margin-bottom: 24px;\n}\n\n.jobs {\n  display: grid;\n  row-gap: 16px;\n}\n\n.post {\n  background-color: #fff;\n  border: 1px solid #dcdcdc;\n  border-radius: 4px;\n  padding: 16px;\n  display: grid;\n  row-gap: 8px;\n}\n\n.post__title {\n  font-size: 16px;\n  font-weight: bold;\n  margin-top: 0;\n}\n\n.post__metadata {\n  font-size: 14px;\n  color: #444;\n}\n\n.loading {\n  color: #4d4d4d;\n  font-weight: bold;\n  font-size: 18px;\n}\n\n.load-more-button {\n  background-color: #ff6600;\n  border: none;\n  border-radius: 4px;\n  color: #fff;\n  margin-top: 20px;\n  padding: 8px 12px;\n}\n\n.load-more-button:not(:disabled) {\n  cursor: pointer;\n}\n\n.load-more-button:hover {\n  background-color: #e65c00;\n}\n"
    }
  },
  "workspace": {
    "visibleFiles": [
      "/index.html",
      "/src/index.js",
      "/src/styles.css"
    ],
    "activeFile": "/src/index.html",
    "environment": "parcel"
  },
  "writeup": "var Component=(()=>{var j=Object.create;var r=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var I=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var D=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),v=(n,e)=>{for(var a in e)r(n,a,{get:e[a],enumerable:!0})},d=(n,e,a,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of w(e))!x.call(n,s)&&s!==a&&r(n,s,{get:()=>e[s],enumerable:!(l=y(e,s))||l.enumerable});return n};var c=(n,e,a)=>(a=n!=null?j(I(n)):{},d(e||!n||!n.__esModule?r(a,\"default\",{value:n,enumerable:!0}):a,n)),k=n=>d(r({},\"__esModule\",{value:!0}),n);var h=D((F,u)=>{u.exports=_jsx_runtime});var P={};v(P,{default:()=>C});var t=c(h());var i=c(h());function b(n){let e=Object.assign({h2:\"h2\",ol:\"ol\",li:\"li\",code:\"code\"},n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{children:\"Test cases\"}),`\n`,(0,i.jsxs)(e.ol,{children:[`\n`,(0,i.jsx)(e.li,{children:'Initial Loading: Verify that when the page loads, the message \"Loading...\" is displayed until the job IDs are fetched from the Hacker News API.'}),`\n`,(0,i.jsx)(e.li,{children:\"Job Postings: Once the job IDs are fetched, check that the job postings are rendered correctly. Verify that the job title, poster, and timestamp are displayed accurately for each job posting.\"}),`\n`,(0,i.jsxs)(e.li,{children:[\"Click on a job title and ensure that it opens the correct URL in a new tab or window if there's a \",(0,i.jsx)(e.code,{children:\"url\"}),\" field in the job details.\"]}),`\n`,(0,i.jsx)(e.li,{children:'Pagination: Click the \"Load more\" button and verify that additional job postings are fetched and displayed. Repeat this step multiple times to ensure that pagination works correctly.'}),`\n`,(0,i.jsx)(e.li,{children:'Button State: Check that the \"Load more\" button is disabled while job details are being fetched to prevent multiple requests. Verify that the button becomes enabled again once the fetching process is complete.'}),`\n`,(0,i.jsx)(e.li,{children:'Keyboard Navigation: Use only the keyboard to navigate through the job postings and interact with the \"Load more\" button. Ensure that all interactive elements are accessible and usable without requiring a mouse.'}),`\n`]})]})}function _(n={}){let{wrapper:e}=n.components||{};return e?(0,i.jsx)(e,Object.assign({},n,{children:(0,i.jsx)(b,n)})):b(n)}var g=_;var o=c(h());function p(n){let e=Object.assign({h2:\"h2\",ul:\"ul\",li:\"li\"},n.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{children:\"Notes\"}),`\n`,(0,o.jsxs)(e.ul,{children:[`\n`,(0,o.jsx)(e.li,{children:\"Note that we aren't handling any API failure cases here. It'd be good for you to handle them!\"}),`\n`]})]})}function T(n={}){let{wrapper:e}=n.components||{};return e?(0,o.jsx)(e,Object.assign({},n,{children:(0,o.jsx)(p,n)})):p(n)}var m=T;function f(n){let e=Object.assign({h2:\"h2\",h3:\"h3\",p:\"p\",ul:\"ul\",li:\"li\",code:\"code\",h4:\"h4\"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{children:\"Solution\"}),`\n`,(0,t.jsx)(e.h3,{children:\"State\"}),`\n`,(0,t.jsx)(e.p,{children:\"The code utilizes several state variables to manage the application's behavior and data flow:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:\"jobIds\"}),\": This variable stores an array of job IDs retrieved from the Hacker News API. It is initially set to \",(0,t.jsx)(e.code,{children:\"null\"}),\" and later populated with data from the API. It allows for pagination and fetching job details based on the IDs.\"]}),`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:\"page\"}),': This variable keeps track of the current page number, determining which set of job IDs and details to fetch. It is incremented when the user clicks on the \"Load more\" button.']}),`\n`]}),`\n`,(0,t.jsx)(e.h3,{children:\"Rendering\"}),`\n`,(0,t.jsx)(e.p,{children:\"Some notable aspects of the rendering code include:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[\"The use of CSS Grid for the list of posts: The job postings are displayed in a grid layout using the \",(0,t.jsx)(e.code,{children:\"display: grid\"}),\" CSS property. This is a convenient way to allow consistent spacing between job postings.\"]}),`\n`,(0,t.jsx)(e.li,{children:'Styling of the \"Load more\" button: The \"Load more\" button is styled with a specific background color, border, and padding to make it visually prominent. The button also changes color on hover to provide visual feedback to the user.'}),`\n`]}),`\n`,(0,t.jsx)(e.h3,{children:\"Fetching Data\"}),`\n`,(0,t.jsx)(e.h4,{children:(0,t.jsx)(e.code,{children:\"fetchJobIds\"})}),`\n`,(0,t.jsx)(e.p,{children:\"This asynchronous method is responsible for fetching the current page's list of job IDs from the Hacker News API and is called with the current page number as an argument.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Since the API only has a single endpoint to fetch all the top job listings, we only need to fetch the list once and save it as \",(0,t.jsx)(e.code,{children:\"jobIds\"}),\" in state by making a \",(0,t.jsx)(e.code,{children:\"GET\"}),\" request to the API endpoint. Once the job IDs are retrieved, it slices the array based on the current page and returns the relevant subset of job IDs. Subsequent calls to this function will just be slicing the array without fetching the data again.\"]}),`\n`,(0,t.jsx)(e.h4,{children:(0,t.jsx)(e.code,{children:\"fetchJobs\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"This asynchronous method fetches the job details based on the job IDs obtained from the \",(0,t.jsx)(e.code,{children:\"fetchJobIds\"}),\" method. It is called with the current page number as an argument. Inside the method, it calls \",(0,t.jsx)(e.code,{children:\"fetchJobIds(currPage)\"}),\" to get the job IDs for the current page then calls \",(0,t.jsx)(e.code,{children:\"setFetchingJobDetails\"}),\" with \",(0,t.jsx)(e.code,{children:\"true\"}),\" to indicate that job details are being fetched. Using \",(0,t.jsx)(e.code,{children:\"Promise.all\"}),\", it makes multiple GET requests to the Hacker News API to fetch the details of each job, using the current page's job IDs. Once the job details are obtained, it appends the new jobs to the bottom of the job list. Finally, it calls \",(0,t.jsx)(e.code,{children:\"setFetchingJobDetails\"}),\" with \",(0,t.jsx)(e.code,{children:\"false\"}),\" to indicate that the fetching process is complete.\"]}),`\n`,(0,t.jsx)(e.p,{children:'This function is called when the page first loads and when the \"Load more\" button is pressed.'}),`\n`,(0,t.jsx)(g,{}),`\n`,(0,t.jsx)(m,{})]})}function L(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(f,n)})):f(n)}var C=L;return k(P);})();\n;return Component;"
}
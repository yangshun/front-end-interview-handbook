{
  "author": "tanhauhau",
  "files": {
    "/package.json": {
      "code": "{\n  \"name\": \"@gfe-questions/grid-lights-svelte-solution\",\n  \"author\": \"tanhauhau\",\n  \"version\": \"0.0.1\",\n  \"main\": \"src/index.js\",\n  \"dependencies\": {\n    \"svelte\": \"^3.58.0\"\n  }\n}\n"
    },
    "/public/index.html": {
      "code": "<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf8\" />\n    <meta name=\"viewport\" content=\"width=device-width\" />\n    <title>Svelte</title>\n    <link rel=\"stylesheet\" href=\"public/bundle.css\" />\n  </head>\n\n  <body>\n    <script src=\"bundle.js\"></script>\n  </body>\n</html>\n"
    },
    "/src/App.svelte": {
      "code": "<script>\n  import './styles.css';\n\n  // Make it easy to visualize the board.\n  // Customize the board rendering just by changing\n  // this 2D array. Note that all rows have to\n  // contain the same number of elements in order\n  // for the grid to render properly.\n  const config = [\n    [1, 1, 1],\n    [1, 0, 1],\n    [1, 1, 1],\n  ];\n\n  let order = [];\n  let isDeactivating = false;\n\n  // If necessary, disable clicking during deactivation is playing.\n  function deactivateCells() {\n    isDeactivating = true;\n    const timer = setInterval(() => {\n      // Remove the last item.\n      order = order.slice(0, -1);\n\n      if (order.length === 0) {\n        clearInterval(timer);\n        isDeactivating = false;\n      }\n    }, 300);\n  }\n</script>\n\n<div class=\"wrapper\">\n  <div\n    class=\"grid\"\n    style:grid-template-columns=\"repeat({config[0].length},\n    1fr)\">\n    {#each config.flat(1) as value, index}\n      {#if value}\n        <button\n          aria-label=\"Cell {index}\"\n          type=\"button\"\n          class=\"cell\"\n          class:cell--activated={/*\n           Lookup efficiency can be improved by using\n           a separate set/dict but that's overkill given\n           the low number of cells.\n          */\n          order.includes(index)}\n          on:click={() => {\n            // Add index to order array.\n            order = [...order, index];\n\n            // All the cells have been activated, we can proceed\n            // to deactivate them one by one.\n            if (\n              order.length ===\n              config.flat(1).filter(Boolean).length\n            ) {\n              deactivateCells();\n            }\n          }}\n          disabled={/* disabled prevents cells from responding to clicks. */\n          order.includes(index) || isDeactivating} />\n      {:else}\n        <span />\n      {/if}\n    {/each}\n  </div>\n  <!-- Helper to show the state -->\n  <pre>order array: {order.join(', ')}</pre>\n</div>\n\n<style>\n  .wrapper {\n    align-items: center;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n    justify-content: center;\n  }\n\n  .grid {\n    --spacing: 20px;\n    display: grid;\n    max-width: 300px;\n    width: 100%;\n    padding: var(--spacing);\n    gap: var(--spacing);\n    border: 1px solid #000;\n  }\n\n  .cell {\n    background-color: transparent;\n    border: 1px solid #000;\n    height: 0;\n    /* Make height and width equal */\n    padding-bottom: 100%;\n  }\n\n  .cell--activated {\n    background-color: green;\n  }\n</style>\n"
    },
    "/src/index.js": {
      "code": "import App from './App.svelte';\nimport './styles.css';\n\nconst app = new App({\n  target: document.body,\n});\n\nexport default app;\n"
    },
    "/src/styles.css": {
      "code": "body {\n  font-family: sans-serif;\n}\n"
    }
  },
  "workspace": {
    "visibleFiles": [
      "/src/App.svelte",
      "/src/styles.css"
    ],
    "activeFile": "/src/App.svelte",
    "environment": "svelte"
  },
  "writeup": "var Component=(()=>{var w=Object.create;var l=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),_=(t,e)=>{for(var a in e)l(t,a,{get:e[a],enumerable:!0})},s=(t,e,a,h)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!j.call(t,c)&&c!==a&&l(t,c,{get:()=>e[c],enumerable:!(h=v(e,c))||h.enumerable});return t};var o=(t,e,a)=>(a=t!=null?w(x(t)):{},s(e||!t||!t.__esModule?l(a,\"default\",{value:t,enumerable:!0}):a,t)),k=t=>s(l({},\"__esModule\",{value:!0}),t);var d=S((O,g)=>{g.exports=_jsx_runtime});var A={};_(A,{default:()=>W});var n=o(d());var r=o(d());function u(t){let e=Object.assign({h2:\"h2\",ul:\"ul\",li:\"li\"},t.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{children:\"Test cases\"}),`\n`,(0,r.jsxs)(e.ul,{children:[`\n`,(0,r.jsxs)(e.li,{children:[\"Click on a cell, it should turn green.\",`\n`,(0,r.jsxs)(e.ul,{children:[`\n`,(0,r.jsx)(e.li,{children:\"Clicking on cells that are already green should not have any effect.\"}),`\n`]}),`\n`]}),`\n`,(0,r.jsx)(e.li,{children:\"After clicking all 8 cells, the cells should be deactivated in reverse.\"}),`\n`]})]})}function C(t={}){let{wrapper:e}=t.components||{};return e?(0,r.jsx)(e,Object.assign({},t,{children:(0,r.jsx)(u,t)})):u(t)}var p=C;var i=o(d());function m(t){let e=Object.assign({h2:\"h2\",p:\"p\",ul:\"ul\",li:\"li\",code:\"code\"},t.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{children:\"Accessibility\"}),`\n`,(0,i.jsx)(e.p,{children:\"While a11y is not the focus of this question, there are some things we can do to improve both the a11y and user experience of this app.\"}),`\n`,(0,i.jsxs)(e.ul,{children:[`\n`,(0,i.jsxs)(e.li,{children:[\"Use \",(0,i.jsx)(e.code,{children:\"<button>\"}),\"s to render the grid cells so that they are focusable via \",(0,i.jsx)(\"kbd\",{children:\"Tab\"}),\" and activated via \",(0,i.jsx)(\"kbd\",{children:\"Space\"}),\" and \",(0,i.jsx)(\"kbd\",{children:\"Enter\"}),\". With this, we can activate the grid entirely using the keyboard.\"]}),`\n`,(0,i.jsxs)(e.li,{children:[\"All buttons should have labels, so we add \",(0,i.jsx)(e.code,{children:\"aria-label\"}),\" with the index to describe the cell. The label can be further improved by calling out the column and row numbers instead.\"]}),`\n`,(0,i.jsxs)(e.li,{children:[\"It also helps to \",(0,i.jsx)(e.code,{children:\"disable\"}),\" the button for activated cells and while deactivating, so that the cells can no longer be focused or respond to clicks.\"]}),`\n`]})]})}function D(t={}){let{wrapper:e}=t.components||{};return e?(0,i.jsx)(e,Object.assign({},t,{children:(0,i.jsx)(m,t)})):m(t)}var f=D;function b(t){let e=Object.assign({h2:\"h2\",p:\"p\",h3:\"h3\",a:\"a\",pre:\"pre\",code:\"code\",ul:\"ul\",li:\"li\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"Solution\"}),`\n`,(0,n.jsx)(e.p,{children:\"The question can be split into two parts: (1) Rendering, (2) State, and (3) Deactivation.\"}),`\n`,(0,n.jsx)(e.h3,{children:\"Rendering\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Since we're required to render a 3x3 grid of cells, CSS Grid is literally the best tool for the job. We can definitely use other approaches but CSS Grid is a forward-looking technology we should master. If you're unfamiliar with CSS Grids, \",(0,n.jsx)(e.a,{href:\"https://cssgridgarden.com/\",children:\"Grid Garden\"}),\" is an interactive game for you to learn about it.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The following CSS will render a 3x3 grid with 20px of padding and spacing between the cells.\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-css\",children:`.grid {\n  --spacing: 20px;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  padding: var(--spacing);\n  gap: var(--spacing);\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"To create cells that are perfect squares, we can set the height of the cells to be 0 and make one of the vertical paddings 100% (\",(0,n.jsx)(e.code,{children:\"padding-bottom: 100%\"}),\"), which sets the total height of the cell to be the same as the width.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Remember that we have an odd requirement of the middle cell to be omitted? We can create a declarative and flexible rendering approach where we define a 2D array of 1s and 0s (\",(0,n.jsx)(e.code,{children:\"config\"}),\") and the grid will be rendered according to the configuration. Because of this, we have to define the \",(0,n.jsx)(e.code,{children:\"grid-template-columns\"}),\" as an inline style that uses the \",(0,n.jsx)(e.code,{children:\"config\"}),\"'s number of columns when rendering the CSS grid.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Activating/deactivating the cells can be done by adding a new class for the activated state which adds \",(0,n.jsx)(e.code,{children:\"background-color: green\"}),\" and toggling that class.\"]}),`\n`,(0,n.jsx)(e.h3,{children:\"State\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Only one state is needed, \",(0,n.jsx)(e.code,{children:\"order\"}),\", which is the order that the cells were clicked. Assuming we flatten the 2D \",(0,n.jsx)(e.code,{children:\"config\"}),\" array into a single dimension, each cell will correspond to an index. We can store this list of indices in the \",(0,n.jsx)(e.code,{children:\"order\"}),\" array, adding to it when a cell is clicked.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Whether the cell is lit up can be determined by whether the cell's index exists in the \",(0,n.jsx)(e.code,{children:\"order\"}),\" array.\"]}),`\n`,(0,n.jsx)(e.h3,{children:\"Deactivation\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Deactivation happens when all the cells have been activated. We know this has happened by comparing the number of items in the \",(0,n.jsx)(e.code,{children:\"order\"}),\" array vs the number of 1s in the \",(0,n.jsx)(e.code,{children:\"config\"}),\"; when they are the same, we can start deactivating the cells.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"We can use \",(0,n.jsx)(e.code,{children:\"setInterval\"}),\" with a duration of 300ms and remove the last value of the \",(0,n.jsx)(e.code,{children:\"order\"}),\" array by using \",(0,n.jsx)(e.code,{children:\"order.pop()\"}),\" each time the interval callback is invoked. When the \",(0,n.jsx)(e.code,{children:\"order\"}),\" array is empty, we can clear the interval timer.\"]}),`\n`,(0,n.jsx)(p,{}),`\n`,(0,n.jsx)(f,{}),`\n`,(0,n.jsx)(e.h2,{children:\"Resources\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://cssgridgarden.com/\",children:\"Grid Garden - A game for learning CSS grid\"})}),`\n`]})]})}function M(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(b,t)})):b(t)}var W=M;return k(A);})();\n;return Component;"
}
{
  "skeleton": "var Component=(()=>{var b=Object.create;var r=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var j=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),_=(e,n)=>{for(var o in n)r(e,o,{get:n[o],enumerable:!0})},l=(e,n,o,s)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let i of x(n))!y.call(e,i)&&i!==o&&r(e,i,{get:()=>n[i],enumerable:!(s=f(n,i))||s.enumerable});return e};var d=(e,n,o)=>(o=e!=null?b(g(e)):{},l(n||!e||!e.__esModule?r(o,\"default\",{value:e,enumerable:!0}):o,e)),C=e=>l(r({},\"__esModule\",{value:!0}),e);var c=j((v,u)=>{u.exports=_jsx_runtime});var q={};_(q,{default:()=>T});var a=d(c());var t=d(c());function h(e){let n=Object.assign({p:\"p\",img:\"img\",h2:\"h2\",ul:\"ul\",li:\"li\",a:\"a\"},e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:\"Build a counter with a history of the changes and ability to undo/redo actions.\"}),`\n`,(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:\"/img/questions/undoable-counter/undoable-counter-example.png\",alt:\"Undoable Counter Example\"})}),`\n`,(0,t.jsx)(n.h2,{children:\"Requirements\"}),`\n`,(0,t.jsxs)(n.ul,{children:[`\n`,(0,t.jsx)(n.li,{children:\"The counter starts at 0.\"}),`\n`,(0,t.jsxs)(n.li,{children:['There buttons \"/2\", \"-1\", \"+1\", \"x2\" apply the respective operations to the current count.',`\n`,(0,t.jsxs)(n.ul,{children:[`\n`,(0,t.jsx)(n.li,{children:\"A row is added to the history table, showing the operation, count before the operation, count after.\"}),`\n`]}),`\n`]}),`\n`,(0,t.jsx)(n.li,{children:'The \"Undo\" button undoes the last action and updates the count.'}),`\n`,(0,t.jsx)(n.li,{children:'The \"Redo\" button applies the last undo-ed action, if any.'}),`\n`,(0,t.jsx)(n.li,{children:\"Clicking on the modification buttons should clear any undo-ed actions and they cannot be redo-ed.\"}),`\n`,(0,t.jsx)(n.li,{children:'The \"Reset\" button resets the counter to 0 and clears all history.'}),`\n`]}),`\n`,(0,t.jsx)(n.h2,{children:\"Source\"}),`\n`,(0,t.jsxs)(n.p,{children:[\"This question is adapted from \",(0,t.jsx)(n.a,{href:\"https://frontendeval.com/questions/undoable-counter?tab=question\",children:\"FrontendEval's Undoable Counter\"}),\".\"]})]})}function w(e={}){let{wrapper:n}=e.components||{};return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(h,e)})):h(e)}var p=w;function m(e){return(0,a.jsx)(p,{})}function M(e={}){let{wrapper:n}=e.components||{};return n?(0,a.jsx)(n,Object.assign({},e,{children:(0,a.jsx)(m,e)})):m(e)}var T=M;return C(q);})();\n;return Component;",
  "solution": "var Component=(()=>{var g=Object.create;var h=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var j=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),O=(t,e)=>{for(var i in e)h(t,i,{get:e[i],enumerable:!0})},s=(t,e,i,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of w(e))!x.call(t,c)&&c!==i&&h(t,c,{get:()=>e[c],enumerable:!(a=v(e,c))||a.enumerable});return t};var l=(t,e,i)=>(i=t!=null?g(T(t)):{},s(e||!t||!t.__esModule?h(i,\"default\",{value:t,enumerable:!0}):i,t)),C=t=>s(h({},\"__esModule\",{value:!0}),t);var d=j((A,u)=>{u.exports=_jsx_runtime});var M={};O(M,{default:()=>I});var n=l(d());var o=l(d());function p(t){let e=Object.assign({h2:\"h2\",ul:\"ul\",li:\"li\"},t.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{children:\"Test cases\"}),`\n`,(0,o.jsxs)(e.ul,{children:[`\n`,(0,o.jsx)(e.li,{children:\"Verify that the counter starts at 0.\"}),`\n`,(0,o.jsxs)(e.li,{children:['Click the \"/2\", \"-1\", \"+1\", \"x2\" buttons multiple times. Observe that:',`\n`,(0,o.jsxs)(e.ul,{children:[`\n`,(0,o.jsx)(e.li,{children:\"The counter should update with the correct value after performing the operation.\"}),`\n`,(0,o.jsx)(e.li,{children:\"The history table should have a row added to the top showing the operation, count before the operation and the count after.\"}),`\n`]}),`\n`]}),`\n`,(0,o.jsxs)(e.li,{children:['Click the \"Undo\" button multiple times. Observe that:',`\n`,(0,o.jsxs)(e.ul,{children:[`\n`,(0,o.jsx)(e.li,{children:'The counter should update with the correct \"old\" value.'}),`\n`,(0,o.jsx)(e.li,{children:\"The top row is removed from the history table.\"}),`\n`]}),`\n`]}),`\n`,(0,o.jsxs)(e.li,{children:['Click the \"Redo\" button multiple times. Observe that:',`\n`,(0,o.jsxs)(e.ul,{children:[`\n`,(0,o.jsx)(e.li,{children:'The counter should update with the correct \"new\" value.'}),`\n`,(0,o.jsx)(e.li,{children:\"The history table should have the redo-ed row added back to it.\"}),`\n`]}),`\n`]}),`\n`,(0,o.jsxs)(e.li,{children:['Click the \"Reset\" button. Observe that:',`\n`,(0,o.jsxs)(e.ul,{children:[`\n`,(0,o.jsx)(e.li,{children:'The \"Undo\" and \"Redo\" buttons should be disabled.'}),`\n`,(0,o.jsx)(e.li,{children:\"The history table should have nothing in it.\"}),`\n`,(0,o.jsx)(e.li,{children:\"The counter should reset to 0.\"}),`\n`]}),`\n`]}),`\n`,(0,o.jsxs)(e.li,{children:['Click the \"/2\", \"-1\", \"+1\", \"x2\" buttons after undoing some actions.',`\n`,(0,o.jsxs)(e.ul,{children:[`\n`,(0,o.jsx)(e.li,{children:\"The undo-ed actions can no longer do redo-ed.\"}),`\n`,(0,o.jsx)(e.li,{children:'The \"Redo\" button should be disabled.'}),`\n`]}),`\n`]}),`\n`,(0,o.jsxs)(e.li,{children:[\"a11y\",`\n`,(0,o.jsxs)(e.ul,{children:[`\n`,(0,o.jsx)(e.li,{children:\"Use Tab to cycle through the buttons.\"}),`\n`,(0,o.jsx)(e.li,{children:\"Be able to use both Spacebar and Enter to interact with the page.\"}),`\n`]}),`\n`]}),`\n`]})]})}function _(t={}){let{wrapper:e}=t.components||{};return e?(0,o.jsx)(e,Object.assign({},t,{children:(0,o.jsx)(p,t)})):p(t)}var m=_;var r=l(d());function f(t){let e=Object.assign({h2:\"h2\",p:\"p\"},t.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{children:\"User Experience\"}),`\n`,(0,r.jsx)(e.p,{children:'The \"Undo\" and \"Redo\" buttons are disabled when there is nothing to undo or redo. This helps the user understand the state of the application and what actions are possible or not possible.'})]})}function k(t={}){let{wrapper:e}=t.components||{};return e?(0,r.jsx)(e,Object.assign({},t,{children:(0,r.jsx)(f,t)})):f(t)}var b=k;function y(t){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\",h3:\"h3\",ul:\"ul\",li:\"li\",pre:\"pre\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"Solution\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"AppComponent\"}),\" has straightforward and clear structure - when we call an action from the template it is instantly called and handled in our \",(0,n.jsx)(e.code,{children:\"UndoableCounterService\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"performOperation\"}),\" function is used to apply an operation to a counter value. It takes two parameters: \",(0,n.jsx)(e.code,{children:\"counter\"}),\" and \",(0,n.jsx)(e.code,{children:\"operationLabel\"}),\". \",(0,n.jsx)(e.code,{children:\"counter\"}),\" is the current value of the counter, and \",(0,n.jsx)(e.code,{children:\"operationLabel\"}),\" is a string that specifies which operation to perform.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"OPERATIONS\"}),\" object is a dictionary that maps operation labels to objects that describe the operation. Each operation object has a type property that specifies the type of operation (increment, decrement, multiply, or divide) and a number property that specifies the operand for the operation.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"performOperation\"}),\" function looks up the operation object for the specified operation label from the \",(0,n.jsx)(e.code,{children:\"OPERATIONS\"}),\" object. For example, if operationLabel is \",(0,n.jsx)(e.code,{children:\"'+1'\"}),\", performOperation will look up the object \",(0,n.jsx)(e.code,{children:\"{ type: 'increment', number: 1 }\"}),\" from the \",(0,n.jsx)(e.code,{children:\"OPERATIONS\"}),\" object and add 1 to the counter.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"onUndo\"}),' - This function that is called when the \"Undo\" button is clicked. It is responsible for undoing the last performed operation and updating the counter and the history accordingly.']}),`\n`,(0,n.jsxs)(e.p,{children:[\"More specifically, \",(0,n.jsx)(e.code,{children:\"onUndo\"}),\" removes the first item from the history array, and sets the counter value to the old counter value of the removed item. The removed item is then added to the undoHistory array, which stores the list of undone operations.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"onRedo\"}),\" - This function is used to redo the last action that was undone by the onUndo function.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"When \",(0,n.jsx)(e.code,{children:\"onRedo\"}),\" is called, it retrieves the most recently undone action from the undoHistory state and sets the counter to the \",(0,n.jsx)(e.code,{children:\"newCounter\"}),\" value of that action. It then removes the undone action from the undoHistory state and adds it back to the history state, effectively reapplying the action.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"onReset\"}),\" - This function resets everything back to the initial state.\"]}),`\n`,(0,n.jsx)(e.h3,{children:\"State\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In our \",(0,n.jsx)(e.code,{children:\"UndoableCounterService\"}),\" we have following state:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"counter\"}),\": The current value for the counter.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"history\"}),\": An array that contains the history of actions. The list of actions are in reverse chronological order.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"undoHistory\"}),\": An array that contains the history of actions have have been undo-ed. The list of actions are in reverse chronological order.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"Rendering\"}),`\n`,(0,n.jsx)(e.p,{children:\"In the template of we have following HTML structure:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"action buttons (undo, redo, reset)\"}),`\n`,(0,n.jsx)(e.li,{children:\"math buttons with current value\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"history of actions (displaying \",(0,n.jsx)(e.code,{children:\"history\"}),\" from the \",(0,n.jsx)(e.code,{children:\"service\"}),\")\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"Models\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Type for operation that is used in \",(0,n.jsx)(e.code,{children:\"OPERATIONS\"}),\".\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-typescript\",children:`export interface Operation {\n  type: string;\n  number: number;\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Type for \",(0,n.jsx)(e.code,{children:\"history\"}),\" and \",(0,n.jsx)(e.code,{children:\"undoHistory\"}),\".\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-typescript\",children:`export interface History {\n  operation: string;\n  oldCounter: number;\n  newCounter: number;\n}\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"Angular Insights\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"You can adopt a more advanced, reactive-like approach using RxJS (without using subscriptions as possible). However, if you opt for subscriptions, remember about destroying them to prevent memory leaks.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"If you're confident with the latest Angular versions, consider using signals standalone API.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"You can try to focus more on keywords such as \",(0,n.jsx)(e.code,{children:\"readonly\"}),\", \",(0,n.jsx)(e.code,{children:\"private\"}),\", \",(0,n.jsx)(e.code,{children:\"public\"}),\" and \",(0,n.jsx)(e.code,{children:\"void\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"If you're creating a bigger application it would be good practice to use styles per component instead of putting all styles in one file.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(m,{}),`\n`,(0,n.jsx)(b,{})]})}function R(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(y,t)})):y(t)}var I=R;return C(M);})();\n;return Component;"
}
{
  "author": "yangshun",
  "files": {
    "/index.html": {
      "code": "<!doctype html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1.0\" />\n  </head>\n  <body>\n    <div id=\"accordion\"></div>\n    <script src=\"src/index.js\"></script>\n  </body>\n</html>\n"
    },
    "/package.json": {
      "code": "{\n  \"name\": \"@gfe-questions/accordion-vanilla-solution\",\n  \"author\": \"yangshun\",\n  \"version\": \"0.0.1\",\n  \"private\": true,\n  \"devDependencies\": {\n    \"parcel\": \"2.9.3\"\n  },\n  \"source\": \"index.html\",\n  \"scripts\": {\n    \"start\": \"parcel\",\n    \"build\": \"parcel build\"\n  }\n}\n"
    },
    "/src/index.js": {
      "code": "import './styles.css';\n\n(() => {\n  function accordion($rootEl, { sections }) {\n    function attachEvents() {\n      // Use Event Delegation.\n      $rootEl.addEventListener('click', (event) => {\n        const target = event.target;\n        if (\n          target.tagName !== 'BUTTON' ||\n          !target.classList.contains('accordion-item-title')\n        ) {\n          return;\n        }\n\n        // Find the icon and toggle the direction.\n        const $icon = target.querySelector(\n          '.accordion-icon',\n        );\n        $icon.classList.toggle('accordion-icon--rotated');\n\n        // Find the accordion contents and toggle the\n        // contents' visibility.\n        const $accordionContents = target.nextSibling;\n        $accordionContents.hidden =\n          !$accordionContents.hidden;\n      });\n    }\n\n    function init() {\n      $rootEl.classList.add('accordion');\n\n      const $accordionSections =\n        document.createDocumentFragment();\n\n      sections.forEach(({ value, title, contents }) => {\n        const $accordionSection =\n          document.createElement('div');\n        $accordionSection.classList.add('accordion-item');\n\n        const $accordionTitleBtn =\n          document.createElement('button');\n        $accordionTitleBtn.classList.add(\n          'accordion-item-title',\n        );\n        $accordionTitleBtn.type = 'button';\n        $accordionTitleBtn.setAttribute(\n          'data-value',\n          value,\n        );\n\n        const $accordionIcon =\n          document.createElement('span');\n        $accordionIcon.classList.add('accordion-icon');\n        $accordionIcon.setAttribute('aria-hidden', 'true');\n\n        $accordionTitleBtn.append(title, $accordionIcon);\n\n        const $accordionSectionContents =\n          document.createElement('div');\n        $accordionSectionContents.classList.add(\n          'accordion-item-contents',\n        );\n        $accordionSectionContents.hidden = true;\n        $accordionSectionContents.textContent = contents;\n\n        $accordionSection.append(\n          $accordionTitleBtn,\n          $accordionSectionContents,\n        );\n        $accordionSections.append($accordionSection);\n      });\n\n      $rootEl.appendChild($accordionSections);\n    }\n\n    init();\n    attachEvents();\n  }\n\n  accordion(document.getElementById('accordion'), {\n    sections: [\n      {\n        value: 'html',\n        title: 'HTML',\n        contents:\n          'The HyperText Markup Language or HTML is the standard markup language for documents designed to be displayed in a web browser.',\n      },\n      {\n        value: 'css',\n        title: 'CSS',\n        contents:\n          'Cascading Style Sheets is a style sheet language used for describing the presentation of a document written in a markup language such as HTML or XML.',\n      },\n      {\n        value: 'javascript',\n        title: 'JavaScript',\n        contents:\n          'JavaScript, often abbreviated as JS, is a programming language that is one of the core technologies of the World Wide Web, alongside HTML and CSS.',\n      },\n    ],\n  });\n})();\n"
    },
    "/src/styles.css": {
      "code": "body {\n  font-family: sans-serif;\n}\n\n.wrapper {\n  align-items: center;\n  display: flex;\n}\n\n.accordion {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n\n.accordion-item {\n  display: flex;\n  flex-direction: column;\n  row-gap: 4px;\n  padding: 4px 0;\n}\n\n.accordion-item:not(:first-child) {\n  border-top: 1px solid #eee;\n}\n\n.accordion-item-title {\n  align-items: center;\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-weight: 500;\n  padding: 4px;\n  justify-content: space-between;\n  text-align: start;\n  display: flex;\n}\n\n.accordion-item-title:hover {\n  background-color: #eee;\n}\n\n.accordion-icon {\n  border: solid currentcolor;\n  border-width: 0 2px 2px 0;\n  display: inline-block;\n  height: 8px;\n  pointer-events: none;\n  transform: translateY(-2px) rotate(45deg);\n  width: 8px;\n}\n\n.accordion-icon--rotated {\n  transform: translateY(2px) rotate(-135deg);\n}\n\n.accordion-item-contents {\n  font-size: 14px;\n  line-height: 1.2em;\n  padding: 4px;\n}\n"
    }
  },
  "workspace": {
    "visibleFiles": [
      "/index.html",
      "/src/index.js",
      "/src/styles.css"
    ],
    "activeFile": "/src/index.html",
    "environment": "parcel"
  },
  "writeup": "var Component=(()=>{var b=Object.create;var l=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),v=(t,e)=>{for(var c in e)l(t,c,{get:e[c],enumerable:!0})},h=(t,e,c,d)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of j(e))!A.call(t,s)&&s!==c&&l(t,s,{get:()=>e[s],enumerable:!(d=x(e,s))||d.enumerable});return t};var a=(t,e,c)=>(c=t!=null?b(y(t)):{},h(e||!t||!t.__esModule?l(c,\"default\",{value:t,enumerable:!0}):c,t)),k=t=>h(l({},\"__esModule\",{value:!0}),t);var r=_((F,u)=>{u.exports=_jsx_runtime});var C={};v(C,{default:()=>D});var n=a(r());var i=a(r());function p(t){let e=Object.assign({h2:\"h2\",ul:\"ul\",li:\"li\"},t.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{children:\"Test cases\"}),`\n`,(0,i.jsxs)(e.ul,{children:[`\n`,(0,i.jsx)(e.li,{children:\"All the provided sections should be displayed.\"}),`\n`,(0,i.jsx)(e.li,{children:\"Clicking on a collapsed section's title should expand it.\"}),`\n`,(0,i.jsx)(e.li,{children:\"Clicking on an expanded section's title should collapse it.\"}),`\n`,(0,i.jsx)(e.li,{children:\"Test that all sections are allowed to expand and collapse independently.\"}),`\n`,(0,i.jsx)(e.li,{children:\"Test that you are able to initialize multiple instances of the component, each with independent states.\"}),`\n`]})]})}function I(t={}){let{wrapper:e}=t.components||{};return e?(0,i.jsx)(e,Object.assign({},t,{children:(0,i.jsx)(p,t)})):p(t)}var m=I;var o=a(r());function f(t){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\",a:\"a\"},t.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{children:\"Accessibility\"}),`\n`,(0,o.jsxs)(e.p,{children:[\"Interactive elements need to be focusable, so we'll use a \",(0,o.jsx)(e.code,{children:\"<button>\"}),\" for the title.\"]}),`\n`,(0,o.jsxs)(e.p,{children:[\"The \",(0,o.jsx)(e.a,{href:\"https://www.w3.org/WAI/ARIA/apg/patterns/accordion\",children:\"ARIA Authoring Practices Guide for Accordion\"}),\" has a long list of guidelines for the ARIA roles, states, and properties to add to the various elements of an accordion. \",(0,o.jsx)(e.a,{href:\"/questions/user-interface/accordion-ii\",children:\"Accordion II\"}),\" and \",(0,o.jsx)(e.a,{href:\"/questions/user-interface/accordion-iii\",children:\"Accordion III\"}),\" will focus on improving the accessibility of the Accordion component.\"]})]})}function M(t={}){let{wrapper:e}=t.components||{};return e?(0,o.jsx)(e,Object.assign({},t,{children:(0,o.jsx)(f,t)})):f(t)}var g=M;function w(t){let e=Object.assign({h2:\"h2\",h3:\"h3\",p:\"p\",code:\"code\",ul:\"ul\",li:\"li\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"Solution\"}),`\n`,(0,n.jsx)(e.h3,{children:\"Config / API Design\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Part of the complexity of building a component is designing the API for it. The \",(0,n.jsx)(e.code,{children:\"accordion\"}),\" function accepts a root element, \",(0,n.jsx)(e.code,{children:\"$rootEl\"}),\", where the accordion sections will be inserted. The second parameter of the \",(0,n.jsx)(e.code,{children:\"accordion\"}),\" function is an object used to store the configuration options. At the bare minimum, we will need the following options:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"items\"}),\": A list of item objects. Each item is an object with the fields:\",`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"value\"}),\": A unique identifier for the accordion item.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"title\"}),\": The text label to show in the accordion title.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"contents\"}),\": The contents to show when the section is expanded.\"]}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Unlike our typical Vanilla JS approach, we opt not to keep any state in JavaScript this time round and instead rely on the DOM to track each accordion section's state and expand/collapse the appropriate elements based on that accordion's state.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"accordion\"}),\" function calls the \",(0,n.jsx)(e.code,{children:\"init\"}),\" and \",(0,n.jsx)(e.code,{children:\"attachEvents\"}),\" functions to set up the accordion component by rendering the DOM elements and attaching the necessary event listeners.\"]}),`\n`,(0,n.jsx)(e.h3,{children:(0,n.jsx)(e.code,{children:\"init\"})}),`\n`,(0,n.jsx)(e.p,{children:\"This function sets up the DOM elements that remain throughout the lifecycle of the component, aka they will never be destroyed. The accordion's sections (titles and contents) are rendered.\"}),`\n`,(0,n.jsx)(e.h3,{children:(0,n.jsx)(e.code,{children:\"attachEvents\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Only a single event listener is necessary in this component, which is the \",(0,n.jsx)(e.code,{children:\"click\"}),\" event, to be added to the root element. We make use of Event Delegation so that only a single event listener has to be added and will work for all of its child contents. However, we have to be careful about checking which element is being clicked on and make sure we're only responding when the title is clicked and not the contents.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"When a click is triggered on the accordion title, we'll need to rotate the icon and toggle the \",(0,n.jsx)(e.code,{children:\"hidden\"}),\" attribute on the accordion contents.\"]}),`\n`,(0,n.jsx)(m,{}),`\n`,(0,n.jsx)(g,{})]})}function T(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(w,t)})):w(t)}var D=T;return k(C);})();\n;return Component;"
}
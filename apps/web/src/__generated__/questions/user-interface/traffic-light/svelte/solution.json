{
  "author": "tanhauhau",
  "files": {
    "/package.json": {
      "code": "{\n  \"name\": \"@gfe-questions/traffic-light-svelte-solution\",\n  \"author\": \"tanhauhau\",\n  \"version\": \"0.0.1\",\n  \"main\": \"src/index.js\",\n  \"dependencies\": {\n    \"svelte\": \"^3.58.0\"\n  }\n}\n"
    },
    "/public/index.html": {
      "code": "<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf8\" />\n    <meta name=\"viewport\" content=\"width=device-width\" />\n    <title>Svelte</title>\n    <link rel=\"stylesheet\" href=\"public/bundle.css\" />\n  </head>\n\n  <body>\n    <script src=\"bundle.js\"></script>\n  </body>\n</html>\n"
    },
    "/src/App.svelte": {
      "code": "<script>\n  import TrafficLight from './TrafficLight.svelte';\n\n  const config = {\n    red: {\n      backgroundColor: 'red',\n      duration: 4000,\n      next: 'green',\n    },\n    yellow: {\n      backgroundColor: 'yellow',\n      duration: 500,\n      next: 'red',\n    },\n    green: {\n      backgroundColor: 'green',\n      duration: 3000,\n      next: 'yellow',\n    },\n  };\n</script>\n\n<div class=\"wrapper\">\n  <TrafficLight {config} />\n  <TrafficLight {config} layout=\"horizontal\" />\n</div>\n\n<style>\n  .wrapper {\n    align-items: center;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n    justify-content: center;\n  }\n</style>\n"
    },
    "/src/index.js": {
      "code": "import App from './App.svelte';\nimport './styles.css';\n\nconst app = new App({\n  target: document.body,\n});\n\nexport default app;\n"
    },
    "/src/styles.css": {
      "code": "body {\n  font-family: sans-serif;\n}\n"
    },
    "/src/TrafficLight.svelte": {
      "code": "<script>\n  import { onDestroy } from 'svelte';\n  export let initialColor = 'green';\n  export let config;\n  export let layout = 'vertical';\n\n  let timerId;\n  let currentColor = initialColor;\n\n  $: setTimer(currentColor);\n\n  function setTimer(color) {\n    const { duration, next } = config[color];\n    timerId = setTimeout(() => {\n      currentColor = next;\n    }, duration);\n  }\n\n  onDestroy(() => {\n    clearTimeout(timerId);\n  });\n</script>\n\n<div\n  aria-live=\"polite\"\n  aria-label={`Current light: ${currentColor}`}\n  class=\"traffic-light-container\"\n  class:traffic-light-container--vertical={layout ===\n    'vertical'}>\n  {#each Object.keys(config) as color}\n    <div\n      aria-hidden={true}\n      class=\"traffic-light\"\n      style:background-color={color === currentColor\n        ? config[color].backgroundColor\n        : undefined} />\n  {/each}\n</div>\n\n<style>\n  .traffic-light-container {\n    background-color: #000;\n    border-radius: 8px;\n    display: flex;\n    padding: 8px;\n    gap: 8px;\n    width: fit-content;\n  }\n\n  .traffic-light-container--vertical {\n    flex-direction: column;\n  }\n\n  .traffic-light {\n    --size: 50px;\n    background-color: #555;\n    border-radius: var(--size);\n    height: var(--size);\n    width: var(--size);\n  }\n</style>\n"
    }
  },
  "workspace": {
    "visibleFiles": [
      "/src/App.svelte",
      "/src/TrafficLight.svelte",
      "/src/styles.css"
    ],
    "activeFile": "/src/TrafficLight.svelte",
    "environment": "svelte"
  },
  "writeup": "var Component=(()=>{var y=Object.create;var h=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var T=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),C=(n,e)=>{for(var o in e)h(n,o,{get:e[o],enumerable:!0})},d=(n,e,o,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of x(e))!w.call(n,c)&&c!==o&&h(n,c,{get:()=>e[c],enumerable:!(s=b(e,c))||s.enumerable});return n};var a=(n,e,o)=>(o=n!=null?y(j(n)):{},d(e||!n||!n.__esModule?h(o,\"default\",{value:n,enumerable:!0}):o,n)),_=n=>d(h({},\"__esModule\",{value:!0}),n);var l=T((k,u)=>{u.exports=_jsx_runtime});var F={};C(F,{default:()=>O});var t=a(l());var r=a(l());function f(n){let e=Object.assign({h2:\"h2\",ul:\"ul\",li:\"li\"},n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{children:\"Test cases\"}),`\n`,(0,r.jsxs)(e.ul,{children:[`\n`,(0,r.jsx)(e.li,{children:\"Observe that each light show up for the specified duration.\"}),`\n`,(0,r.jsx)(e.li,{children:\"Observe that the lights transition to the next state correctly after the specified duration.\"}),`\n`]})]})}function M(n={}){let{wrapper:e}=n.components||{};return e?(0,r.jsx)(e,Object.assign({},n,{children:(0,r.jsx)(f,n)})):f(n)}var m=M;var i=a(l());function p(n){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\"},n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{children:\"Accessibility\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"For a11y reasons, we add an \",(0,i.jsx)(e.code,{children:\"aria-label\"}),\" to the component to indicate the current light and \",(0,i.jsx)(e.code,{children:'aria-live=\"polite\"'}),\" to announce the current active light. The contents of the component (the lights) are for visual purposes and aren't important to screen readers, they can be hidden with \",(0,i.jsx)(e.code,{children:'aria-hidden=\"true\"'}),\".\"]})]})}function S(n={}){let{wrapper:e}=n.components||{};return e?(0,i.jsx)(e,Object.assign({},n,{children:(0,i.jsx)(p,n)})):p(n)}var g=S;function v(n){let e=Object.assign({h2:\"h2\",h3:\"h3\",p:\"p\",ul:\"ul\",li:\"li\",code:\"code\"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{children:\"Solution\"}),`\n`,(0,t.jsx)(e.h3,{children:\"Properties and Reactive Statements\"}),`\n`,(0,t.jsx)(e.p,{children:`In this Svelte code, we're simulating a traffic light behavior. We have a few properties (sometimes called \"props\"):`}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:\"initialColor\"}),\": This is the initial color of the traffic light. Its default value is set to \",(0,t.jsx)(e.code,{children:\"green\"}),\".\"]}),`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:\"config\"}),\": An object that provides configuration for each traffic light color. This includes the duration for which a color should be displayed and the next color that should be shown.\"]}),`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:\"layout\"}),\": Determines the layout orientation of the traffic light, either \",(0,t.jsx)(e.code,{children:\"vertical\"}),\" or \",(0,t.jsx)(e.code,{children:\"horizontal\"}),\". By default, it is set to \",(0,t.jsx)(e.code,{children:\"vertical\"}),\".\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Furthermore, there's a reactive statement \",(0,t.jsx)(e.code,{children:\"$: setTimer(currentColor);\"}),\" that watches the \",(0,t.jsx)(e.code,{children:\"currentColor\"}),\" variable. Anytime \",(0,t.jsx)(e.code,{children:\"currentColor\"}),\" changes, the \",(0,t.jsx)(e.code,{children:\"setTimer\"}),\" function is invoked.\"]}),`\n`,(0,t.jsx)(e.h3,{children:\"Timer Management\"}),`\n`,(0,t.jsx)(e.p,{children:\"The main logic in the code revolves around the timing mechanism:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:\"setTimer\"}),\": This function takes a color as its parameter. It looks up the duration for the given color from the \",(0,t.jsx)(e.code,{children:\"config\"}),\" object and sets a timer (\",(0,t.jsx)(e.code,{children:\"setTimeout\"}),\") for that duration. When the timer expires, the \",(0,t.jsx)(e.code,{children:\"currentColor\"}),\" is updated to the next color as specified in the \",(0,t.jsx)(e.code,{children:\"config\"}),\".\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:\"onDestroy\"}),\": This lifecycle function ensures that when the component is destroyed (or removed from the DOM), any ongoing timers are cleared using \",(0,t.jsx)(e.code,{children:\"clearTimeout(timerId);\"}),\". This is important to prevent unexpected behaviors or memory leaks.\"]}),`\n`]}),`\n`]}),`\n`,(0,t.jsx)(e.h3,{children:\"Rendering\"}),`\n`,(0,t.jsx)(e.p,{children:\"Key rendering features include:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[\"ARIA Accessibility: The traffic light container has \",(0,t.jsx)(e.code,{children:'aria-live=\"polite\"'}),\" which indicates to screen readers that they should notify the user of changes, but not interrupt the current task. This way, users with assistive technologies will be informed about the current state of the traffic light.\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[\"Dynamic Classes: Based on the \",(0,t.jsx)(e.code,{children:\"layout\"}),\" prop, the class \",(0,t.jsx)(e.code,{children:\"traffic-light-container--vertical\"}),\" is conditionally applied to the container to adjust the direction of the traffic lights (vertical or horizontal).\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[\"Color Iteration: Using the \",(0,t.jsx)(e.code,{children:\"{#each ... as color}\"}),\" block, the code iterates over each color in the \",(0,t.jsx)(e.code,{children:\"config\"}),\" object. For each color, a \",(0,t.jsx)(e.code,{children:\"div\"}),\" with class \",(0,t.jsx)(e.code,{children:\"traffic-light\"}),\" is created. If the color matches the \",(0,t.jsx)(e.code,{children:\"currentColor\"}),\", it gets the appropriate background color. If not, it defaults to a dimmed light.\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[\"Styling: The CSS defines the appearance of the traffic light container and individual lights. Notably, it uses CSS variables (e.g., \",(0,t.jsx)(e.code,{children:\"var(--size)\"}),\") for defining dimensions, which offers flexibility in adjusting sizes if needed.\"]}),`\n`]}),`\n`]}),`\n`,(0,t.jsx)(e.h3,{children:\"Conclusion\"}),`\n`,(0,t.jsx)(e.p,{children:\"The Svelte component simulates a traffic light with customizable behavior based on provided configurations. The reactive nature of Svelte is utilized to manage timers and switch light colors seamlessly, while also ensuring proper cleanup of resources when they're no longer needed. On the rendering front, the component employs a combination of Svelte's loop mechanism, conditional styling, and accessibility features to provide a visually appealing and user-friendly experience.\"}),`\n`,(0,t.jsx)(m,{}),`\n`,(0,t.jsx)(g,{})]})}function D(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(v,n)})):v(n)}var O=D;return _(F);})();\n;return Component;"
}
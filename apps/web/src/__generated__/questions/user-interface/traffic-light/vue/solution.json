{
  "author": "willnguyen1312",
  "files": {
    "/package.json": {
      "code": "{\n  \"name\": \"@gfe-questions/traffic-light-vue-solution\",\n  \"author\": \"willnguyen1312\",\n  \"version\": \"0.0.1\",\n  \"main\": \"/src/main.js\",\n  \"scripts\": {\n    \"serve\": \"vue-cli-service serve\",\n    \"build\": \"vue-cli-service build\"\n  },\n  \"dependencies\": {\n    \"core-js\": \"3.32.2\",\n    \"vue\": \"3.3.4\"\n  },\n  \"devDependencies\": {\n    \"@vue/cli-plugin-babel\": \"5.0.8\",\n    \"@vue/cli-service\": \"5.0.8\"\n  }\n}\n"
    },
    "/public/index.html": {
      "code": "<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width,initial-scale=1.0\" />\n    <title>Vue</title>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n    <!-- Built files will be auto injected -->\n  </body>\n</html>\n"
    },
    "/src/App.vue": {
      "code": "<script setup>\nimport TrafficLight from './TrafficLight.vue';\n\nconst config = {\n  red: {\n    backgroundColor: 'red',\n    duration: 4000,\n    next: 'green',\n  },\n  yellow: {\n    backgroundColor: 'yellow',\n    duration: 500,\n    next: 'red',\n  },\n  green: {\n    backgroundColor: 'green',\n    duration: 3000,\n    next: 'yellow',\n  },\n};\n</script>\n\n<template>\n  <div class=\"wrapper\">\n    <TrafficLight\n      :config=\"config\"\n      initialColor=\"green\"\n      layout=\"vertical\" />\n    <TrafficLight\n      :config=\"config\"\n      layout=\"horizontal\"\n      initialColor=\"green\" />\n  </div>\n</template>\n\n<style>\n.wrapper {\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  justify-content: center;\n}\n</style>\n"
    },
    "/src/main.js": {
      "code": "import { createApp } from 'vue';\nimport App from './App.vue';\n\nimport './styles.css';\n\ncreateApp(App).mount('#app');\n"
    },
    "/src/styles.css": {
      "code": "body {\n  font-family: sans-serif;\n}\n"
    },
    "/src/TrafficLight.vue": {
      "code": "<script setup>\nimport { onUnmounted, ref, watchEffect } from 'vue';\nconst props = defineProps({\n  initialColor: String,\n  config: Object,\n  layout: String,\n});\n\nlet timerId;\nconst currentColor = ref(props.initialColor);\n\nfunction setTimer(color) {\n  const { duration, next } = props.config[color];\n  timerId = setTimeout(() => {\n    currentColor.value = next;\n  }, duration);\n}\n\nwatchEffect(() => {\n  setTimer(currentColor.value);\n});\n\nonUnmounted(() => {\n  clearTimeout(timerId);\n});\n</script>\n\n<template>\n  <div\n    aria-live=\"polite\"\n    :aria-label=\"`Current light: ${currentColor}`\"\n    :class=\"[\n      'traffic-light-container',\n      props.layout === 'vertical' &&\n        'traffic-light-container--vertical',\n    ]\">\n    <div\n      v-for=\"color in Object.keys(config)\"\n      :key=\"color\"\n      aria-hidden\n      class=\"traffic-light\"\n      :style=\"{\n        'background-color':\n          color === currentColor\n            ? props.config[color].backgroundColor\n            : undefined,\n      }\" />\n  </div>\n</template>\n\n<style>\n.traffic-light-container {\n  background-color: #000;\n  border-radius: 8px;\n  display: flex;\n  padding: 8px;\n  gap: 8px;\n  width: fit-content;\n}\n\n.traffic-light-container--vertical {\n  flex-direction: column;\n}\n\n.traffic-light {\n  --size: 50px;\n  background-color: #555;\n  border-radius: var(--size);\n  height: var(--size);\n  width: var(--size);\n}\n</style>\n"
    }
  },
  "workspace": {
    "visibleFiles": [
      "/src/App.vue",
      "/src/TrafficLight.vue"
    ],
    "activeFile": "/src/App.vue",
    "environment": "vue-cli"
  },
  "writeup": "var Component=(()=>{var b=Object.create;var a=Object.defineProperty;var j=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty;var v=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),T=(n,e)=>{for(var r in e)a(n,r,{get:e[r],enumerable:!0})},d=(n,e,r,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of w(e))!_.call(n,c)&&c!==r&&a(n,c,{get:()=>e[c],enumerable:!(l=j(e,c))||l.enumerable});return n};var s=(n,e,r)=>(r=n!=null?b(y(n)):{},d(e||!n||!n.__esModule?a(r,\"default\",{value:n,enumerable:!0}):r,n)),M=n=>d(a({},\"__esModule\",{value:!0}),n);var h=v((X,u)=>{u.exports=_jsx_runtime});var L={};T(L,{default:()=>O});var t=s(h());var i=s(h());function m(n){let e=Object.assign({h2:\"h2\",ul:\"ul\",li:\"li\"},n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{children:\"Test cases\"}),`\n`,(0,i.jsxs)(e.ul,{children:[`\n`,(0,i.jsx)(e.li,{children:\"Observe that each light show up for the specified duration.\"}),`\n`,(0,i.jsx)(e.li,{children:\"Observe that the lights transition to the next state correctly after the specified duration.\"}),`\n`]})]})}function F(n={}){let{wrapper:e}=n.components||{};return e?(0,i.jsx)(e,Object.assign({},n,{children:(0,i.jsx)(m,n)})):m(n)}var f=F;var o=s(h());function g(n){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\"},n.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{children:\"Accessibility\"}),`\n`,(0,o.jsxs)(e.p,{children:[\"For a11y reasons, we add an \",(0,o.jsx)(e.code,{children:\"aria-label\"}),\" to the component to indicate the current light and \",(0,o.jsx)(e.code,{children:'aria-live=\"polite\"'}),\" to announce the current active light. The contents of the component (the lights) are for visual purposes and aren't important to screen readers, they can be hidden with \",(0,o.jsx)(e.code,{children:'aria-hidden=\"true\"'}),\".\"]})]})}function C(n={}){let{wrapper:e}=n.components||{};return e?(0,o.jsx)(e,Object.assign({},n,{children:(0,o.jsx)(g,n)})):g(n)}var p=C;function x(n){let e=Object.assign({h2:\"h2\",h3:\"h3\",p:\"p\",pre:\"pre\",code:\"code\",ul:\"ul\",li:\"li\"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{children:\"Solution\"}),`\n`,(0,t.jsx)(e.h3,{children:\"Data Model\"}),`\n`,(0,t.jsx)(e.p,{children:\"Traffic lights are simple state machines where each color is a state and each state is shown for a fixed duration before moving to the next. We can capture the state information (how long to remain in each color for and which color to transition to) using a simple JavaScript object:\"}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:\"language-js\",children:`const config = {\n  red: {\n    duration: 4000,\n    next: 'green',\n  },\n  yellow: {\n    duration: 500,\n    next: 'red',\n  },\n  green: {\n    duration: 3000,\n    next: 'yellow',\n  },\n};\n`})}),`\n`,(0,t.jsxs)(e.p,{children:[\"Within the \",(0,t.jsx)(e.code,{children:\"TrafficLight\"}),\" component, we only need a single state variable, which is the current color. We also set a timer via \",(0,t.jsx)(e.code,{children:\"setTimeout\"}),\" to transition to the next color by looking up the \",(0,t.jsx)(e.code,{children:\"config\"}),\" object to know what the next color is and when to do so. Do remember to clear the timer upon unmounting of the component to prevent update states on unmounted components.\"]}),`\n`,(0,t.jsx)(e.h3,{children:\"Rendering\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"The rendering of this component is pretty straightforward and can be achieved with Flexbox. With Flexbox, it's also easy to change the layout of the lights from a vertical one to a horizontal one just by changing the \",(0,t.jsx)(e.code,{children:\"flex-direction\"}),\" property.\"]}),`\n`,(0,t.jsx)(e.h3,{children:\"Component API\"}),`\n`,(0,t.jsx)(e.p,{children:\"It's a good practice to make components reusable by allowing customization of:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsx)(e.li,{children:\"What the states are.\"}),`\n`,(0,t.jsx)(e.li,{children:\"Next states.\"}),`\n`,(0,t.jsx)(e.li,{children:\"Each state's duration.\"}),`\n`,(0,t.jsx)(e.li,{children:\"The initial state.\"}),`\n`,(0,t.jsx)(e.li,{children:\"Traffic light layout (certain countries use certain layouts).\"}),`\n`]}),`\n`,(0,t.jsxs)(e.p,{children:[\"We also define the color of each light within the \",(0,t.jsx)(e.code,{children:\"config\"}),\" object so that the \",(0,t.jsx)(e.code,{children:\"TrafficLight\"}),\" component is both state and color agnostic. It's even possible to create 2-colored and 4-colored traffic lights just by modifying the \",(0,t.jsx)(e.code,{children:\"config\"}),\" object without having to modify the \",(0,t.jsx)(e.code,{children:\"TrafficLight\"}),\" component's implementation.\"]}),`\n`,(0,t.jsx)(f,{}),`\n`,(0,t.jsx)(p,{})]})}function D(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(x,n)})):x(n)}var O=D;return M(L);})();\n;return Component;"
}
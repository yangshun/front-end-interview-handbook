{
  "description": null,
  "metadata": {
    "access": "free",
    "author": null,
    "companies": [],
    "created": 1630800000,
    "difficulty": "easy",
    "duration": 5,
    "excerpt": null,
    "featured": false,
    "format": "quiz",
    "frameworkDefault": null,
    "frameworks": [],
    "href": "/questions/quiz/how-can-you-test-asynchronous-code-in-javascript",
    "importance": "low",
    "languages": [],
    "nextQuestions": [],
    "published": true,
    "ranking": 999,
    "similarQuestions": [],
    "slug": "how-can-you-test-asynchronous-code-in-javascript",
    "subtitle": null,
    "title": "如何在 JavaScript 中测试异步代码？",
    "topics": [
      "async",
      "javascript",
      "testing"
    ],
    "gitHubEditUrl": "https://github.com/yangshun/top-javascript-interview-questions/blob/main/questions/how-can-you-test-asynchronous-code-in-javascript/zh-CN.mdx"
  },
  "solution": "var Component=(()=>{var l=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty;var u=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),j=(t,e)=>{for(var a in e)s(t,a,{get:e[a],enumerable:!0})},h=(t,e,a,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of f(e))!D.call(t,c)&&c!==a&&s(t,c,{get:()=>e[c],enumerable:!(r=p(e,c))||r.enumerable});return t};var x=(t,e,a)=>(a=t!=null?l(m(t)):{},h(e||!t||!t.__esModule?s(a,\"default\",{value:t,enumerable:!0}):a,t)),y=t=>h(s({},\"__esModule\",{value:!0}),t);var d=u((_,o)=>{o.exports=_jsx_runtime});var M={};j(M,{default:()=>J,frontmatter:()=>g});var n=x(d()),g={title:\"\\u5982\\u4F55\\u5728 JavaScript \\u4E2D\\u6D4B\\u8BD5\\u5F02\\u6B65\\u4EE3\\u7801\\uFF1F\"};function i(t){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\",pre:\"pre\",hr:\"hr\",h3:\"h3\",h4:\"h4\",ul:\"ul\",li:\"li\",a:\"a\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"TL;DR\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8981\\u5728 JavaScript \\u4E2D\\u6D4B\\u8BD5\\u5F02\\u6B65\\u4EE3\\u7801\\uFF0C\\u4F60\\u53EF\\u4EE5\\u4F7F\\u7528 Jest \\u6216 Mocha \\u7B49\\u6D4B\\u8BD5\\u6846\\u67B6\\u3002\\u8FD9\\u4E9B\\u6846\\u67B6\\u63D0\\u4F9B\\u4E86\\u5BF9\\u5904\\u7406\\u5F02\\u6B65\\u64CD\\u4F5C\\u7684\\u5185\\u7F6E\\u652F\\u6301\\u3002\\u4F60\\u53EF\\u4EE5\\u5728\\u6D4B\\u8BD5\\u51FD\\u6570\\u4E2D\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"async\"}),\"/\",(0,n.jsx)(e.code,{children:\"await\"}),\" \\u6216\\u8FD4\\u56DE promise\\u3002\\u4F8B\\u5982\\uFF0C\\u5728 Jest \\u4E2D\\uFF0C\\u4F60\\u53EF\\u4EE5\\u7F16\\u5199\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`test('fetches data successfully', async () => {\n  const data = await fetchData();\n  expect(data).toBeDefined();\n});\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6216\\u8005\\uFF0C\\u4F60\\u53EF\\u4EE5\\u4F7F\\u7528\\u56DE\\u8C03\\u51FD\\u6570\\u548C \",(0,n.jsx)(e.code,{children:\"done\"}),\" \\u51FD\\u6570\\u6765\\u6307\\u793A\\u5F02\\u6B65\\u6D4B\\u8BD5\\u7684\\u7ED3\\u675F\\u3002\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u5982\\u4F55\\u5728 JavaScript \\u4E2D\\u6D4B\\u8BD5\\u5F02\\u6B65\\u4EE3\\u7801\\uFF1F\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5728 JavaScript \\u4E2D\\u6D4B\\u8BD5\\u5F02\\u6B65\\u4EE3\\u7801\\u53EF\\u80FD\\u5177\\u6709\\u6311\\u6218\\u6027\\uFF0C\\u4F46\\u50CF Jest \\u548C Mocha \\u8FD9\\u6837\\u7684\\u73B0\\u4EE3\\u6D4B\\u8BD5\\u6846\\u67B6\\u4E3A\\u5904\\u7406\\u5F02\\u6B65\\u64CD\\u4F5C\\u63D0\\u4F9B\\u4E86\\u5F3A\\u5927\\u7684\\u652F\\u6301\\u3002\\u4EE5\\u4E0B\\u662F\\u6D4B\\u8BD5\\u5F02\\u6B65\\u4EE3\\u7801\\u7684\\u4E00\\u4E9B\\u5E38\\u7528\\u65B9\\u6CD5\\uFF1A\"}),`\n`,(0,n.jsxs)(e.h3,{children:[\"\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"async\"}),\"/\",(0,n.jsx)(e.code,{children:\"await\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6D4B\\u8BD5\\u5F02\\u6B65\\u4EE3\\u7801\\u6700\\u76F4\\u63A5\\u7684\\u65B9\\u6CD5\\u4E4B\\u4E00\\u662F\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"async\"}),\"/\",(0,n.jsx)(e.code,{children:\"await\"}),\"\\u3002\\u8FD9\\u79CD\\u65B9\\u6CD5\\u4F7F\\u4F60\\u7684\\u6D4B\\u8BD5\\u4EE3\\u7801\\u770B\\u8D77\\u6765\\u662F\\u540C\\u6B65\\u7684\\uFF0C\\u8FD9\\u66F4\\u5BB9\\u6613\\u9605\\u8BFB\\u548C\\u7F16\\u5199\\u3002\"]}),`\n`,(0,n.jsx)(e.h4,{children:\"Jest \\u793A\\u4F8B\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// fetchData.js\nexport const fetchData = async () => {\n  const response = await fetch('https://api.example.com/data');\n  return response.json();\n};\n\n// fetchData.test.js\nimport { fetchData } from './fetchData';\n\ntest('fetches data successfully', async () => {\n  const data = await fetchData();\n  expect(data).toBeDefined();\n});\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u8FD4\\u56DE\\u4E00\\u4E2A promise\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5904\\u7406\\u5F02\\u6B65\\u6D4B\\u8BD5\\u7684\\u53E6\\u4E00\\u79CD\\u65B9\\u6CD5\\u662F\\u4ECE\\u4F60\\u7684\\u6D4B\\u8BD5\\u51FD\\u6570\\u4E2D\\u8FD4\\u56DE\\u4E00\\u4E2A promise\\u3002Jest \\u548C Mocha \\u5C06\\u7B49\\u5F85 promise \\u5728\\u5B8C\\u6210\\u6D4B\\u8BD5\\u4E4B\\u524D\\u88AB\\u89E3\\u6790\\u3002\"}),`\n`,(0,n.jsx)(e.h4,{children:\"Jest \\u793A\\u4F8B\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// fetchData.js\nexport const fetchData = () => {\n  return fetch('https://api.example.com/data').then((response) =>\n    response.json(),\n  );\n};\n\n// fetchData.test.js\nimport { fetchData } from './fetchData';\n\ntest('fetches data successfully', () => {\n  return fetchData().then((data) => {\n    expect(data).toBeDefined();\n  });\n});\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u4F7F\\u7528\\u56DE\\u8C03\\u51FD\\u6570\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5BF9\\u4E8E\\u65E7\\u7684\\u4EE3\\u7801\\u5E93\\u6216\\u7279\\u5B9A\\u573A\\u666F\\uFF0C\\u4F60\\u53EF\\u80FD\\u9700\\u8981\\u4F7F\\u7528\\u56DE\\u8C03\\u51FD\\u6570\\u3002\\u5728 Jest \\u4E2D\\uFF0C\\u4F60\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"done\"}),\" \\u51FD\\u6570\\u6765\\u6307\\u793A\\u5F02\\u6B65\\u6D4B\\u8BD5\\u7684\\u7ED3\\u675F\\u3002\"]}),`\n`,(0,n.jsx)(e.h4,{children:\"Jest \\u793A\\u4F8B\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// fetchData.js\nexport const fetchData = (callback) => {\n  fetch('https://api.example.com/data')\n    .then((response) => response.json())\n    .then((data) => callback(null, data))\n    .catch((error) => callback(error));\n};\n\n// fetchData.test.js\nimport { fetchData } from './fetchData';\n\ntest('fetches data successfully', (done) => {\n  fetchData((error, data) => {\n    expect(error).toBeNull();\n    expect(data).toBeDefined();\n    done();\n  });\n});\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u4F7F\\u7528 Mocha\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Mocha \\u4E5F\\u652F\\u6301 \",(0,n.jsx)(e.code,{children:\"async\"}),\"/\",(0,n.jsx)(e.code,{children:\"await\"}),\"\\u3001\\u8FD4\\u56DE promise \\u548C\\u4F7F\\u7528\\u56DE\\u8C03\\u51FD\\u6570\\u3002\\u8FD9\\u662F\\u4E00\\u4E2A\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"async\"}),\"/\",(0,n.jsx)(e.code,{children:\"await\"}),\" \\u548C Mocha \\u7684\\u793A\\u4F8B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// fetchData.js\nexport const fetchData = async () => {\n  const response = await fetch('https://api.example.com/data');\n  return response.json();\n};\n\n// fetchData.test.js\nimport { fetchData } from './fetchData';\nimport { expect } from 'chai';\n\ndescribe('fetchData', () => {\n  it('fetches data successfully', async () => {\n    const data = await fetchData();\n    expect(data).to.be.an('object');\n  });\n});\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u5EF6\\u4F38\\u9605\\u8BFB\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://jestjs.io/docs/asynchronous\",children:\"Jest \\u5173\\u4E8E\\u6D4B\\u8BD5\\u5F02\\u6B65\\u4EE3\\u7801\\u7684\\u6587\\u6863\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://mochajs.org/#asynchronous-code\",children:\"Mocha \\u5173\\u4E8E\\u6D4B\\u8BD5\\u5F02\\u6B65\\u4EE3\\u7801\\u7684\\u6587\\u6863\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Async_await\",children:\"MDN Web Docs \\u5173\\u4E8E async/await\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://www.chaijs.com/\",children:\"Chai \\u65AD\\u8A00\\u5E93\"})}),`\n`]})]})}function w(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(i,t)})):i(t)}var J=w;return y(M);})();\n;return Component;"
}
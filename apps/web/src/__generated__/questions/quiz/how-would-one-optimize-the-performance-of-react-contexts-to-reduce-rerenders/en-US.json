{
  "description": null,
  "metadata": {
    "access": "free",
    "author": null,
    "companies": [],
    "created": 1630800000,
    "difficulty": "medium",
    "duration": 5,
    "excerpt": null,
    "featured": true,
    "format": "quiz",
    "frameworkDefault": "react",
    "frameworks": [
      {
        "framework": "react",
        "href": "/questions/quiz/how-would-one-optimize-the-performance-of-react-contexts-to-reduce-rerenders"
      }
    ],
    "href": "/questions/quiz/how-would-one-optimize-the-performance-of-react-contexts-to-reduce-rerenders",
    "importance": "high",
    "languages": [],
    "nextQuestions": [],
    "published": true,
    "ranking": 320,
    "similarQuestions": [],
    "slug": "how-would-one-optimize-the-performance-of-react-contexts-to-reduce-rerenders",
    "subtitle": null,
    "title": "How would one optimize the performance of React contexts to reduce rerenders?",
    "topics": [
      "react",
      "performance"
    ],
    "gitHubEditUrl": "https://github.com/yangshun/top-reactjs-interview-questions/blob/main/questions/how-would-one-optimize-the-performance-of-react-contexts-to-reduce-rerenders/en-US.mdx"
  },
  "solution": "var Component=(()=>{var u=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),y=(n,e)=>{for(var o in e)c(n,o,{get:e[o],enumerable:!0})},a=(n,e,o,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!v.call(n,r)&&r!==o&&c(n,r,{get:()=>e[r],enumerable:!(s=p(e,r))||s.enumerable});return n};var f=(n,e,o)=>(o=n!=null?u(x(n)):{},a(e||!n||!n.__esModule?c(o,\"default\",{value:n,enumerable:!0}):o,n)),C=n=>a(c({},\"__esModule\",{value:!0}),n);var l=g((j,i)=>{i.exports=_jsx_runtime});var w={};y(w,{default:()=>d,frontmatter:()=>M});var t=f(l()),M={title:\"How would one optimize the performance of React contexts to reduce rerenders?\"};function h(n){let e={a:\"a\",code:\"code\",h2:\"h2\",h3:\"h3\",hr:\"hr\",li:\"li\",p:\"p\",pre:\"pre\",ul:\"ul\",...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{children:\"TL;DR\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"To optimize the performance of React contexts and reduce rerenders, you can use techniques such as memoizing context values, splitting contexts, and using selectors. Memoizing context values with \",(0,t.jsx)(e.code,{children:\"useMemo\"}),\" ensures that the context value only changes when its dependencies change. Splitting contexts allows you to isolate state changes to specific parts of your application. Using selectors with libraries like \",(0,t.jsx)(e.code,{children:\"use-context-selector\"}),\" can help you only rerender components that actually need the updated context value.\"]}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:\"language-javascript\",children:`const value = useMemo(() => ({ state, dispatch }), [state, dispatch]);\n`})}),`\n`,(0,t.jsx)(e.hr,{}),`\n`,(0,t.jsx)(e.h2,{children:\"How to optimize the performance of React contexts to reduce rerenders\"}),`\n`,(0,t.jsx)(e.h3,{children:\"Memoizing context values\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"One of the most effective ways to reduce unnecessary rerenders is to memoize the context value. By using \",(0,t.jsx)(e.code,{children:\"useMemo\"}),\", you can ensure that the context value only changes when its dependencies change.\"]}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:\"language-javascript\",children:`import React, { createContext, useMemo, useState } from 'react';\n\nconst MyContext = createContext();\n\nconst MyProvider = ({ children }) => {\n  const [state, setState] = useState(initialState);\n\n  const value = useMemo(() => ({ state, setState }), [state]);\n\n  return <MyContext.Provider value={value}>{children}</MyContext.Provider>;\n};\n`})}),`\n`,(0,t.jsx)(e.h3,{children:\"Splitting contexts\"}),`\n`,(0,t.jsx)(e.p,{children:\"Another technique is to split your context into multiple smaller contexts. This way, you can isolate state changes to specific parts of your application, reducing the number of components that need to rerender.\"}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:\"language-javascript\",children:`const UserContext = createContext();\nconst ThemeContext = createContext();\n\nconst UserProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n\n  return (\n    <UserContext.Provider value={{ user, setUser }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nconst ThemeProvider = ({ children }) => {\n  const [theme, setTheme] = useState('light');\n\n  return (\n    <ThemeContext.Provider value={{ theme, setTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n};\n`})}),`\n`,(0,t.jsx)(e.h3,{children:\"Using selectors\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Using selectors can help you only rerender components that actually need the updated context value. Libraries like \",(0,t.jsx)(e.code,{children:\"use-context-selector\"}),\" can be very useful for this purpose.\"]}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:\"language-javascript\",children:`import { createContext, useContextSelector } from 'use-context-selector';\n\nconst MyContext = createContext();\n\nconst MyComponent = () => {\n  const state = useContextSelector(MyContext, (v) => v.state);\n\n  return <div>{state}</div>;\n};\n`})}),`\n`,(0,t.jsx)(e.h2,{children:\"Further reading\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"https://react.dev/learn/passing-data-deeply-with-context\",children:\"React documentation on context\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"https://react.dev/reference/react/useMemo\",children:\"useMemo Hook documentation\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"https://github.com/dai-shi/use-context-selector\",children:\"use-context-selector library\"})}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(h,{...n})}):h(n)}return C(w);})();\n;return Component;"
}
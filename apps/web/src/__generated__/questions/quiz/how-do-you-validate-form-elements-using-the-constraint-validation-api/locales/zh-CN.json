{
  "description": null,
  "info": {
    "excerpt": null,
    "title": "如何使用约束验证 API 验证表单元素？",
    "gitHubEditUrl": "https://github.com/yangshun/top-javascript-interview-questions/blob/main/questions/how-do-you-validate-form-elements-using-the-constraint-validation-api/zh-CN.mdx"
  },
  "solution": "var Component=(()=>{var h=Object.create;var l=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var y=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),v=(i,e)=>{for(var t in e)l(i,t,{get:e[t],enumerable:!0})},r=(i,e,t,d)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of p(e))!g.call(i,c)&&c!==t&&l(i,c,{get:()=>e[c],enumerable:!(d=u(e,c))||d.enumerable});return i};var V=(i,e,t)=>(t=i!=null?h(m(i)):{},r(e||!i||!i.__esModule?l(t,\"default\",{value:i,enumerable:!0}):t,i)),f=i=>r(l({},\"__esModule\",{value:!0}),i);var s=y((N,o)=>{o.exports=_jsx_runtime});var I={};v(I,{default:()=>j,frontmatter:()=>M});var n=V(s()),M={title:\"\\u5982\\u4F55\\u4F7F\\u7528\\u7EA6\\u675F\\u9A8C\\u8BC1 API \\u9A8C\\u8BC1\\u8868\\u5355\\u5143\\u7D20\\uFF1F\"};function a(i){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\",pre:\"pre\",hr:\"hr\",h3:\"h3\",h4:\"h4\",ul:\"ul\",li:\"li\",a:\"a\"},i.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"TL;DR\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7EA6\\u675F\\u9A8C\\u8BC1 API \\u63D0\\u4F9B\\u4E86\\u4E00\\u79CD\\u9A8C\\u8BC1 HTML \\u8868\\u5355\\u5143\\u7D20\\u7684\\u65B9\\u6CD5\\u3002\\u60A8\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"validity\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"validationMessage\"}),\" \\u7B49\\u5C5E\\u6027\\u4EE5\\u53CA \",(0,n.jsx)(e.code,{children:\"checkValidity()\"}),\" \\u548C \",(0,n.jsx)(e.code,{children:\"setCustomValidity()\"}),\" \\u7B49\\u65B9\\u6CD5\\u3002\\u4F8B\\u5982\\uFF0C\\u8981\\u68C0\\u67E5\\u8F93\\u5165\\u662F\\u5426\\u6709\\u6548\\uFF0C\\u60A8\\u53EF\\u4EE5\\u4F7F\\u7528\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`const input = document.querySelector('input');\nif (input.checkValidity()) {\n  console.log('Input is valid');\n} else {\n  console.log(input.validationMessage);\n}\n`})}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u5982\\u4F55\\u4F7F\\u7528\\u7EA6\\u675F\\u9A8C\\u8BC1 API \\u9A8C\\u8BC1\\u8868\\u5355\\u5143\\u7D20\\uFF1F\"}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u7B80\\u4ECB\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7EA6\\u675F\\u9A8C\\u8BC1 API \\u662F\\u4E00\\u7EC4\\u5728\\u8868\\u5355\\u5143\\u7D20\\u4E0A\\u53EF\\u7528\\u7684\\u65B9\\u6CD5\\u548C\\u5C5E\\u6027\\uFF0C\\u5141\\u8BB8\\u60A8\\u6267\\u884C\\u9A8C\\u8BC1\\u68C0\\u67E5\\u5E76\\u5411\\u7528\\u6237\\u63D0\\u4F9B\\u53CD\\u9988\\u3002\\u6B64 API \\u5185\\u7F6E\\u4E8E HTML5 \\u4E2D\\uFF0C\\u63D0\\u4F9B\\u4E86\\u4E00\\u79CD\\u9A8C\\u8BC1\\u8868\\u5355\\u8F93\\u5165\\u7684\\u65B9\\u6CD5\\uFF0C\\u800C\\u65E0\\u9700\\u7F16\\u5199\\u81EA\\u5B9A\\u4E49 JavaScript \\u9A8C\\u8BC1\\u903B\\u8F91\\u3002\"}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u5173\\u952E\\u5C5E\\u6027\\u548C\\u65B9\\u6CD5\"}),`\n`,(0,n.jsx)(e.h4,{children:(0,n.jsx)(e.code,{children:\"checkValidity()\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"checkValidity()\"}),\" \\u65B9\\u6CD5\\u68C0\\u67E5\\u5143\\u7D20\\u662F\\u5426\\u6EE1\\u8DB3\\u5176\\u6240\\u6709\\u9A8C\\u8BC1\\u7EA6\\u675F\\u3002\\u5982\\u679C\\u5143\\u7D20\\u6709\\u6548\\uFF0C\\u5219\\u8FD4\\u56DE \",(0,n.jsx)(e.code,{children:\"true\"}),\"\\uFF0C\\u5426\\u5219\\u8FD4\\u56DE \",(0,n.jsx)(e.code,{children:\"false\"}),\"\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`const input = document.querySelector('input');\nif (input.checkValidity()) {\n  console.log('Input is valid');\n} else {\n  console.log('Input is invalid');\n}\n`})}),`\n`,(0,n.jsx)(e.h4,{children:(0,n.jsx)(e.code,{children:\"reportValidity()\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"reportValidity()\"}),\" \\u65B9\\u6CD5\\u7684\\u5DE5\\u4F5C\\u65B9\\u5F0F\\u4E0E \",(0,n.jsx)(e.code,{children:\"checkValidity()\"}),\" \\u7C7B\\u4F3C\\uFF0C\\u4F46\\u5982\\u679C\\u5143\\u7D20\\u65E0\\u6548\\uFF0C\\u5B83\\u8FD8\\u4F1A\\u663E\\u793A\\u6D4F\\u89C8\\u5668\\u7684\\u9ED8\\u8BA4\\u9A8C\\u8BC1\\u6D88\\u606F\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`const input = document.querySelector('input');\nif (!input.reportValidity()) {\n  console.log('Input is invalid');\n}\n`})}),`\n`,(0,n.jsx)(e.h4,{children:(0,n.jsx)(e.code,{children:\"setCustomValidity()\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"setCustomValidity()\"}),\" \\u65B9\\u6CD5\\u5141\\u8BB8\\u60A8\\u8BBE\\u7F6E\\u81EA\\u5B9A\\u4E49\\u9A8C\\u8BC1\\u6D88\\u606F\\u3002\\u5982\\u679C\\u8BBE\\u7F6E\\u4E86\\u81EA\\u5B9A\\u4E49\\u6D88\\u606F\\uFF0C\\u5219\\u8BE5\\u5143\\u7D20\\u5C06\\u88AB\\u89C6\\u4E3A\\u65E0\\u6548\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`const input = document.querySelector('input');\ninput.setCustomValidity('This field is required');\nif (!input.checkValidity()) {\n  console.log(input.validationMessage); // Outputs: This field is required\n}\n`})}),`\n`,(0,n.jsx)(e.h4,{children:(0,n.jsx)(e.code,{children:\"validity\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"validity\"}),\" \\u5C5E\\u6027\\u662F\\u4E00\\u4E2A\\u5BF9\\u8C61\\uFF0C\\u5305\\u542B\\u51E0\\u4E2A\\u5E03\\u5C14\\u5C5E\\u6027\\uFF0C\\u6307\\u793A\\u5143\\u7D20\\u7684\\u6709\\u6548\\u6027\\u72B6\\u6001\\uFF0C\\u4F8B\\u5982 \",(0,n.jsx)(e.code,{children:\"valid\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"valueMissing\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"typeMismatch\"}),\" \\u7B49\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`const input = document.querySelector('input');\nif (input.validity.valueMissing) {\n  console.log('Value is missing');\n}\n`})}),`\n`,(0,n.jsx)(e.h4,{children:(0,n.jsx)(e.code,{children:\"validationMessage\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5982\\u679C\\u5143\\u7D20\\u65E0\\u6548\\uFF0C\",(0,n.jsx)(e.code,{children:\"validationMessage\"}),\" \\u5C5E\\u6027\\u5C06\\u8FD4\\u56DE\\u5C06\\u5411\\u7528\\u6237\\u663E\\u793A\\u7684\\u6D88\\u606F\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`const input = document.querySelector('input');\nif (!input.checkValidity()) {\n  console.log(input.validationMessage);\n}\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u793A\\u4F8B\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8FD9\\u662F\\u4E00\\u4E2A\\u5B8C\\u6574\\u7684\\u793A\\u4F8B\\uFF0C\\u6F14\\u793A\\u4E86\\u5982\\u4F55\\u4F7F\\u7528\\u7EA6\\u675F\\u9A8C\\u8BC1 API \\u6765\\u9A8C\\u8BC1\\u8868\\u5355\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-html\",children:`<form id=\"myForm\">\n  <input type=\"text\" id=\"username\" required />\n  <input type=\"submit\" value=\"Submit\" />\n</form>\n\n<script>\n  const form = document.getElementById('myForm');\n  const username = document.getElementById('username');\n\n  form.addEventListener('submit', function (event) {\n    if (!username.checkValidity()) {\n      username.setCustomValidity('Username is required');\n      username.reportValidity();\n      event.preventDefault();\n    } else {\n      username.setCustomValidity(''); // Clear custom message\n    }\n  });\n<\\/script>\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5728\\u6B64\\u793A\\u4F8B\\u4E2D\\uFF0C\\u5982\\u679C \",(0,n.jsx)(e.code,{children:\"username\"}),\" \\u8F93\\u5165\\u4E3A\\u7A7A\\uFF0C\\u5219\\u8868\\u5355\\u5C06\\u4E0D\\u4F1A\\u63D0\\u4EA4\\uFF0C\\u5E76\\u4E14\\u5C06\\u663E\\u793A\\u81EA\\u5B9A\\u4E49\\u9A8C\\u8BC1\\u6D88\\u606F\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u5EF6\\u4F38\\u9605\\u8BFB\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/zh-CN/docs/Web/Guide/HTML/Constraint_validation\",children:\"MDN Web Docs: Constraint Validation\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLFormElement/checkValidity\",children:\"MDN Web Docs: HTMLFormElement.checkValidity()\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLObjectElement/setCustomValidity\",children:\"MDN Web Docs: HTMLObjectElement.setCustomValidity()\"})}),`\n`]})]})}function C(i={}){let{wrapper:e}=i.components||{};return e?(0,n.jsx)(e,Object.assign({},i,{children:(0,n.jsx)(a,i)})):a(i)}var j=C;return f(I);})();\n;return Component;"
}
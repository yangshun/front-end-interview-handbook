{
  "description": null,
  "info": {
    "excerpt": null,
    "title": "你如何看待 CommonJS 与 ESM？",
    "gitHubEditUrl": "https://github.com/yangshun/top-javascript-interview-questions/blob/main/questions/what-do-you-think-of-amd-vs-commonjs/zh-CN.mdx"
  },
  "solution": "var Component=(()=>{var m=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var a=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var g=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports),M=(r,n)=>{for(var d in n)l(r,d,{get:n[d],enumerable:!0})},c=(r,n,d,o)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let i of a(n))!S.call(r,i)&&i!==d&&l(r,i,{get:()=>n[i],enumerable:!(o=p(n,i))||o.enumerable});return r};var j=(r,n,d)=>(d=r!=null?m(u(r)):{},c(n||!r||!r.__esModule?l(d,\"default\",{value:r,enumerable:!0}):d,r)),x=r=>c(l({},\"__esModule\",{value:!0}),r);var t=g((q,h)=>{h.exports=_jsx_runtime});var N={};M(N,{default:()=>J,frontmatter:()=>f});var e=j(t()),f={title:\"\\u4F60\\u5982\\u4F55\\u770B\\u5F85 CommonJS \\u4E0E ESM\\uFF1F\"};function s(r){let n=Object.assign({h2:\"h2\",p:\"p\",code:\"code\",hr:\"hr\",h3:\"h3\",h4:\"h4\",ul:\"ul\",li:\"li\",pre:\"pre\",strong:\"strong\",a:\"a\"},r.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h2,{children:\"TL;DR\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"JavaScript \\u5DF2\\u7ECF\\u6F14\\u8FDB\\u5176\\u6A21\\u5757\\u7CFB\\u7EDF\\u3002ESM (ECMAScript Modules) \\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"import\"}),\" / \",(0,e.jsx)(n.code,{children:\"export\"}),\" \\u662F\\u5B98\\u65B9\\u6807\\u51C6\\uFF0C\\u5728\\u73B0\\u4EE3\\u6D4F\\u89C8\\u5668\\u548C Node.js \\u4E2D\\u539F\\u751F\\u652F\\u6301\\uFF0C\\u4E13\\u4E3A\\u540C\\u6B65\\u548C\\u5F02\\u6B65\\u7528\\u4F8B\\u8BBE\\u8BA1\\u3002CommonJS (CJS) \\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"require\"}),\" / \",(0,e.jsx)(n.code,{children:\"module.exports\"}),\" \\u662F Node.js \\u7684\\u539F\\u59CB\\u6807\\u51C6\\uFF0C\\u4E3B\\u8981\\u7528\\u4E8E\\u540C\\u6B65\\uFF0C\\u5E76\\u4E14\\u4ECD\\u7136\\u5728 Node \\u751F\\u6001\\u7CFB\\u7EDF\\u4E2D\\u5360\\u4E3B\\u5BFC\\u5730\\u4F4D\\u3002AMD (Asynchronous Module Definition) \\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"define\"}),\" / \",(0,e.jsx)(n.code,{children:\"require\"}),\" \\u662F\\u65E9\\u671F\\u4E3A\\u6D4F\\u89C8\\u5668\\u4E2D\\u7684\\u5F02\\u6B65\\u52A0\\u8F7D\\u800C\\u8BBE\\u8BA1\\u7684\\u7CFB\\u7EDF\\uFF0C\\u4F46\\u73B0\\u5728\\u5DF2\\u7ECF\\u57FA\\u672C\\u8FC7\\u65F6\\uFF0C\\u88AB ESM \\u53D6\\u4EE3\\u3002\"]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.h3,{children:\"\\u6982\\u8FF0\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6A21\\u5757\\u7CFB\\u7EDF\\u901A\\u8FC7\\u5141\\u8BB8\\u4EE3\\u7801\\u88AB\\u62C6\\u5206\\u6210\\u5177\\u6709\\u6E05\\u6670\\u4F9D\\u8D56\\u5173\\u7CFB\\u7684\\u53EF\\u91CD\\u7528\\u90E8\\u5206\\uFF08\\u6A21\\u5757\\uFF09\\u6765\\u5E2E\\u52A9\\u7BA1\\u7406\\u8FD9\\u79CD\\u590D\\u6742\\u6027\\u3002\\u968F\\u7740\\u65F6\\u95F4\\u7684\\u63A8\\u79FB\\uFF0C\\u5728\\u5B98\\u65B9\\u6807\\u51C6\\u88AB\\u91C7\\u7528\\u4E4B\\u524D\\uFF0C\\u51FA\\u73B0\\u4E86\\u4E0D\\u540C\\u7684\\u6A21\\u5757\\u7CFB\\u7EDF\\u3002\"}),`\n`,(0,e.jsx)(n.h3,{children:\"CommonJS\"}),`\n`,(0,e.jsx)(n.h4,{children:\"\\u7279\\u70B9\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u4E13\\u4E3A\\u540C\\u6B65\\u52A0\\u8F7D\\u6A21\\u5757\\u800C\\u8BBE\\u8BA1\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4E3B\\u8981\\u7528\\u4E8E\\u670D\\u52A1\\u5668\\u7AEF\\u73AF\\u5883\\uFF0C\\u5982 Node.js\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"module.exports\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"require\"}),\" \\u6765\\u5B9A\\u4E49\\u548C\\u52A0\\u8F7D\\u6A21\\u5757\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h4,{children:\"\\u793A\\u4F8B\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-javascript\",children:`// \\u5728 CommonJS \\u4E2D\\u5B9A\\u4E49\\u4E00\\u4E2A\\u6A21\\u5757\nconst dep1 = require('dependency1');\nconst dep2 = require('dependency2');\n\nmodule.exports = {\n  // \\u6A21\\u5757\\u4EE3\\u7801\\u5728\\u8FD9\\u91CC\n};\n\n// \\u5728 CommonJS \\u4E2D\\u52A0\\u8F7D\\u4E00\\u4E2A\\u6A21\\u5757\nconst mod1 = require('module1');\nconst mod2 = require('module2');\n\n// \\u4F7F\\u7528 mod1 \\u548C mod2 \\u7684\\u4EE3\\u7801\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"ESM (ECMAScript Modules)\"}),`\n`,(0,e.jsx)(n.h4,{children:\"\\u7279\\u70B9\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u5B98\\u65B9 JavaScript \\u6807\\u51C6\\u6A21\\u5757\\u7CFB\\u7EDF\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5728\\u73B0\\u4EE3\\u6D4F\\u89C8\\u5668\\u548C Node.js \\u4E2D\\u539F\\u751F\\u652F\\u6301\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4E13\\u4E3A\\u5F02\\u6B65\\u548C\\u540C\\u6B65\\u573A\\u666F\\u8BBE\\u8BA1\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"export\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"import\"}),\" \\u5B9A\\u4E49\\u548C\\u52A0\\u8F7D\\u6A21\\u5757\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h4,{children:\"\\u793A\\u4F8B\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-javascript\",children:`import dep1 from 'dependency1'; // if dependency1 had a default export\nimport { dep2 } from 'dependency2'; // named import to import something specific from dependency2\n\n// Module code using dep1, dep2...\n\nexport function someFunction() {\n  // ... function logic ...\n}\nexport const someValue = 'hello';\n\n// Or export multiple things at once\n// export { someFunction, someValue };\n\n// Or export a default value\n// export default class MyClass {\n// ...\n// }\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"\\u4E3B\\u8981\\u533A\\u522B\"}),`\n`,(0,e.jsx)(n.h4,{children:\"\\u52A0\\u8F7D\\u673A\\u5236\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"CommonJS\"}),\": \\u540C\\u6B65\\uFF08\\u52A0\\u8F7D\\u5B8C\\u6210\\u524D\\u963B\\u585E\\uFF09\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"ESM\"}),\": \\u5F02\\u6B65\\u53CB\\u597D\\uFF08\\u5728\\u6D4F\\u89C8\\u5668\\u4E2D\\u975E\\u963B\\u585E\\uFF09\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h4,{children:\"\\u73AF\\u5883\\u9002\\u7528\\u6027\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"CommonJS\"}),\": Node.js \\u9057\\u7559\\u6807\\u51C6\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"ESM\"}),\": \\u5B98\\u65B9\\u6807\\u51C6\\uFF08\\u6D4F\\u89C8\\u5668\\u548C Node.js\\uFF09\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h4,{children:\"\\u8BED\\u6CD5\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"CommonJS\"}),\": \",(0,e.jsx)(n.code,{children:\"require()\"}),\" / \",(0,e.jsx)(n.code,{children:\"module.exports\"}),\"\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"ESM\"}),\": \",(0,e.jsx)(n.code,{children:\"import\"}),\" / \",(0,e.jsx)(n.code,{children:\"export\"}),\"\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h4,{children:\"\\u5206\\u6790\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"CommonJS\"}),\": \\u52A8\\u6001\\uFF08\\u8FD0\\u884C\\u65F6\\u5206\\u6790\\uFF09\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"ESM\"}),\": \\u9759\\u6001\\uFF08\\u7F16\\u8BD1\\u65F6\\u5206\\u6790\\uFF0C\\u542F\\u7528 tree-shaking\\uFF09\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{children:\"\\u7528\\u4F8B\"}),`\n`,(0,e.jsx)(n.h4,{children:\"CommonJS\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u65E7\\u7684 Node.js \\u9879\\u76EE\\u6216\\u9700\\u8981\\u540C\\u6B65\\u52A0\\u8F7D\\u7684\\u5730\\u65B9\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"Node.js \\u4E2D\\u7684\\u9ED8\\u8BA4\\u8BBE\\u7F6E\\uFF0C\\u9664\\u975E\\u914D\\u7F6E\\u4E3A ESM\\u3002\"}),`\n`]}),`\n`,(0,e.jsx)(n.h4,{children:\"ESM\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u73B0\\u4EE3 Web \\u5F00\\u53D1\\uFF08\\u539F\\u751F\\u6D4F\\u89C8\\u5668\\u652F\\u6301\\uFF09\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u65B0\\u7684 Node.js \\u9879\\u76EE\\uFF0C\\u7279\\u522B\\u662F\\u90A3\\u4E9B\\u9700\\u8981\\u5F02\\u6B65\\u7279\\u6027\\u6216\\u4F18\\u5316\\u7684\\u9879\\u76EE\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u65E2\\u7528\\u4E8E\\u6D4F\\u89C8\\u5668\\u53C8\\u7528\\u4E8E\\u670D\\u52A1\\u5668\\u7684\\u4EE3\\u7801\\u3002\"}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{children:\"\\u5EF6\\u4F38\\u9605\\u8BFB\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules\",children:\"MDN Web Docs on JavaScript modules\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://nodejs.org/api/modules.html\",children:\"Node.js: CommonJS modules\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://nodejs.org/api/esm.html\",children:\"Node.js: ESM\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://requirejs.org/docs/api.html\",children:\"RequireJS (AMD Loader - Historical)\"})}),`\n`]})]})}function C(r={}){let{wrapper:n}=r.components||{};return n?(0,e.jsx)(n,Object.assign({},r,{children:(0,e.jsx)(s,r)})):s(r)}var J=C;return x(N);})();\n;return Component;"
}
{
  "description": null,
  "metadata": {
    "access": "free",
    "author": null,
    "companies": [],
    "created": 1630800000,
    "difficulty": "hard",
    "duration": 5,
    "excerpt": null,
    "featured": false,
    "format": "quiz",
    "frameworkDefault": null,
    "frameworks": [],
    "href": "/questions/quiz/explain-how-jsonp-works-and-how-its-not-really-ajax",
    "importance": "low",
    "languages": [],
    "nextQuestions": [],
    "published": true,
    "ranking": 999,
    "similarQuestions": [],
    "slug": "explain-how-jsonp-works-and-how-its-not-really-ajax",
    "subtitle": null,
    "title": "解释 JSONP 的工作原理（以及它实际上并非 Ajax）",
    "topics": [
      "javascript",
      "networking",
      "security"
    ],
    "gitHubEditUrl": "https://github.com/yangshun/top-javascript-interview-questions/blob/main/questions/explain-how-jsonp-works-and-how-its-not-really-ajax/zh-CN.mdx"
  },
  "solution": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty;var u=(c,n)=>()=>(n||c((n={exports:{}}).exports,n),n.exports),P=(c,n)=>{for(var l in n)i(c,l,{get:n[l],enumerable:!0})},h=(c,n,l,t)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of m(n))!O.call(c,r)&&r!==l&&i(c,r,{get:()=>n[r],enumerable:!(t=S(n,r))||t.enumerable});return c};var x=(c,n,l)=>(l=c!=null?p(g(c)):{},h(n||!c||!c.__esModule?i(l,\"default\",{value:c,enumerable:!0}):l,c)),N=c=>h(i({},\"__esModule\",{value:!0}),c);var o=u((R,d)=>{d.exports=_jsx_runtime});var j={};P(j,{default:()=>s,frontmatter:()=>J});var e=x(o()),J={title:\"\\u89E3\\u91CA JSONP \\u7684\\u5DE5\\u4F5C\\u539F\\u7406\\uFF08\\u4EE5\\u53CA\\u5B83\\u5B9E\\u9645\\u4E0A\\u5E76\\u975E Ajax\\uFF09\"};function a(c){let n={a:\"a\",code:\"code\",h2:\"h2\",h3:\"h3\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",strong:\"strong\",ul:\"ul\",...c.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h2,{children:\"TL;DR\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"JSONP\\uFF08\\u5E26\\u586B\\u5145\\u7684 JSON\\uFF09\\u662F\\u4E00\\u79CD\\u7528\\u4E8E\\u514B\\u670D Web \\u6D4F\\u89C8\\u5668\\u4E2D\\u7684\\u540C\\u6E90\\u7B56\\u7565\\u7684\\u6280\\u672F\\uFF0C\\u5141\\u8BB8\\u60A8\\u4ECE\\u4E0D\\u540C\\u57DF\\u7684\\u670D\\u52A1\\u5668\\u8BF7\\u6C42\\u6570\\u636E\\u3002\\u5B83\\u7684\\u5DE5\\u4F5C\\u539F\\u7406\\u662F\\u52A8\\u6001\\u521B\\u5EFA \",(0,e.jsx)(n.code,{children:\"<script>\"}),\" \\u6807\\u7B7E\\uFF0C\\u5E76\\u5C06\\u5176 \",(0,e.jsx)(n.code,{children:\"src\"}),\" \\u5C5E\\u6027\\u8BBE\\u7F6E\\u4E3A\\u6570\\u636E\\u6E90\\u7684 URL\\u3002\\u670D\\u52A1\\u5668\\u4F7F\\u7528\\u4E00\\u4E2A\\u811A\\u672C\\u8FDB\\u884C\\u54CD\\u5E94\\uFF0C\\u8BE5\\u811A\\u672C\\u4F7F\\u7528\\u6570\\u636E\\u4F5C\\u4E3A\\u5176\\u53C2\\u6570\\u8C03\\u7528\\u9884\\u5B9A\\u4E49\\u7684 callback \\u51FD\\u6570\\u3002\\u4E0E Ajax \\u4E0D\\u540C\\uFF0CJSONP \\u4E0D\\u4F7F\\u7528 XMLHttpRequest \\u5BF9\\u8C61\\uFF0C\\u5E76\\u4E14\\u4EC5\\u9650\\u4E8E GET \\u8BF7\\u6C42\\u3002\"]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.h2,{children:\"JSONP \\u7684\\u5DE5\\u4F5C\\u539F\\u7406\\uFF08\\u4EE5\\u53CA\\u5B83\\u5B9E\\u9645\\u4E0A\\u5E76\\u975E Ajax\\uFF09\"}),`\n`,(0,e.jsx)(n.h3,{children:\"\\u4EC0\\u4E48\\u662F JSONP\\uFF1F\"}),`\n`,(0,e.jsx)(n.p,{children:\"JSONP \\u4EE3\\u8868\\u5E26\\u586B\\u5145\\u7684 JSON\\u3002\\u5B83\\u662F\\u4E00\\u79CD\\u7528\\u4E8E\\u7ED5\\u8FC7 Web \\u6D4F\\u89C8\\u5668\\u4E2D\\u7684\\u540C\\u6E90\\u7B56\\u7565\\u7684\\u6280\\u672F\\uFF0C\\u8BE5\\u7B56\\u7565\\u9650\\u5236\\u7F51\\u9875\\u5411\\u63D0\\u4F9B\\u8BE5\\u7F51\\u9875\\u7684\\u57DF\\u4EE5\\u5916\\u7684\\u57DF\\u53D1\\u51FA\\u8BF7\\u6C42\\u3002\"}),`\n`,(0,e.jsx)(n.h3,{children:\"JSONP \\u7684\\u5DE5\\u4F5C\\u539F\\u7406\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u52A8\\u6001\\u811A\\u672C\\u6807\\u7B7E\\u521B\\u5EFA\"}),\"\\uFF1A\\u52A8\\u6001\\u521B\\u5EFA \",(0,e.jsx)(n.code,{children:\"<script>\"}),\" \\u6807\\u7B7E\\uFF0C\\u5E76\\u5C06\\u5176 \",(0,e.jsx)(n.code,{children:\"src\"}),\" \\u5C5E\\u6027\\u8BBE\\u7F6E\\u4E3A\\u6570\\u636E\\u6E90\\u7684 URL\\uFF0C\\u5305\\u62EC\\u56DE\\u8C03\\u51FD\\u6570\\u540D\\u79F0\\u4F5C\\u4E3A\\u67E5\\u8BE2\\u53C2\\u6570\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u670D\\u52A1\\u5668\\u54CD\\u5E94\"}),\"\\uFF1A\\u670D\\u52A1\\u5668\\u4F7F\\u7528\\u4E00\\u4E2A\\u811A\\u672C\\u8FDB\\u884C\\u54CD\\u5E94\\uFF0C\\u8BE5\\u811A\\u672C\\u8C03\\u7528\\u56DE\\u8C03\\u51FD\\u6570\\uFF0C\\u5E76\\u5C06\\u6570\\u636E\\u4F5C\\u4E3A\\u53C2\\u6570\\u4F20\\u9012\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u56DE\\u8C03\\u6267\\u884C\"}),\"\\uFF1A\\u6D4F\\u89C8\\u5668\\u6267\\u884C\\u811A\\u672C\\uFF0C\\u4F7F\\u7528\\u6570\\u636E\\u8C03\\u7528\\u56DE\\u8C03\\u51FD\\u6570\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u8FD9\\u662F\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u4F8B\\u5B50\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-html\",children:`<!doctype html>\n<html>\n  <head>\n    <title>JSONP Example</title>\n    <script>\n      function handleResponse(data) {\n        console.log(data);\n      }\n\n      function fetchData() {\n        var script = document.createElement('script');\n        script.src = 'https://example.com/data?callback=handleResponse';\n        document.body.appendChild(script);\n      }\n    <\\/script>\n  </head>\n  <body>\n    <button onclick=\"fetchData()\">Fetch Data</button>\n  </body>\n</html>\n`})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728\\u6B64\\u793A\\u4F8B\\u4E2D\\uFF0C\\u5F53\\u5355\\u51FB\\u8BE5\\u6309\\u94AE\\u65F6\\uFF0C\\u5C06\\u521B\\u5EFA\\u4E00\\u4E2A \",(0,e.jsx)(n.code,{children:\"<script>\"}),\" \\u6807\\u7B7E\\uFF0C\\u5176 \",(0,e.jsx)(n.code,{children:\"src\"}),\" \\u5C5E\\u6027\\u8BBE\\u7F6E\\u4E3A \",(0,e.jsx)(n.code,{children:\"https://example.com/data?callback=handleResponse\"}),\"\\u3002\",(0,e.jsx)(n.code,{children:\"example.com\"}),\" \\u4E0A\\u7684\\u670D\\u52A1\\u5668\\u5C06\\u4F7F\\u7528\\u5982\\u4E0B\\u811A\\u672C\\u8FDB\\u884C\\u54CD\\u5E94\\uFF1A\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-javascript\",children:`handleResponse({\n  name: 'John',\n  age: 30,\n});\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"JSONP \\u4E0E Ajax \\u7684\\u533A\\u522B\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u4F20\\u8F93\\u673A\\u5236\"}),\"\\uFF1AJSONP \\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"<script>\"}),\" \\u6807\\u7B7E\\u6765\\u83B7\\u53D6\\u6570\\u636E\\uFF0C\\u800C Ajax \\u4F7F\\u7528 XMLHttpRequest \\u5BF9\\u8C61\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u8BF7\\u6C42\\u7C7B\\u578B\"}),\"\\uFF1AJSONP \\u4EC5\\u9650\\u4E8E GET \\u8BF7\\u6C42\\uFF0C\\u800C Ajax \\u53EF\\u4EE5\\u4F7F\\u7528\\u5404\\u79CD HTTP \\u65B9\\u6CD5\\uFF0C\\u5982 GET\\u3001POST\\u3001PUT\\u3001DELETE \\u7B49\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u540C\\u6E90\\u7B56\\u7565\"}),\"\\uFF1AJSONP \\u53EF\\u4EE5\\u7ED5\\u8FC7\\u540C\\u6E90\\u7B56\\u7565\\uFF0C\\u800C Ajax \\u8BF7\\u6C42\\u53D7\\u5176\\u7EA6\\u675F\\uFF0C\\u9664\\u975E\\u4F7F\\u7528 CORS\\uFF08\\u8DE8\\u57DF\\u8D44\\u6E90\\u5171\\u4EAB\\uFF09\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u9519\\u8BEF\\u5904\\u7406\"}),\"\\uFF1A\\u4E0E Ajax \\u76F8\\u6BD4\\uFF0CJSONP \\u7684\\u9519\\u8BEF\\u5904\\u7406\\u80FD\\u529B\\u6709\\u9650\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{children:\"JSONP \\u7684\\u5C40\\u9650\\u6027\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u5B89\\u5168\\u98CE\\u9669\"}),\"\\uFF1A\\u5982\\u679C\\u5916\\u90E8\\u670D\\u52A1\\u5668\\u53D7\\u5230\\u7834\\u574F\\u6216\\u6076\\u610F\\u653B\\u51FB\\uFF0CJSONP \\u53EF\\u80FD\\u4F1A\\u4F7F\\u60A8\\u7684\\u5E94\\u7528\\u7A0B\\u5E8F\\u9762\\u4E34\\u8DE8\\u7AD9\\u70B9\\u811A\\u672C (XSS) \\u653B\\u51FB\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u4EC5\\u9650\\u4E8E GET \\u8BF7\\u6C42\"}),\"\\uFF1AJSONP \\u4E0D\\u80FD\\u7528\\u4E8E POST \\u8BF7\\u6C42\\u6216\\u5176\\u4ED6 HTTP \\u65B9\\u6CD5\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u9519\\u8BEF\\u5904\\u7406\"}),\"\\uFF1A\\u4E0E Ajax \\u76F8\\u6BD4\\uFF0CJSONP \\u7F3A\\u4E4F\\u5F3A\\u5927\\u7684\\u9519\\u8BEF\\u5904\\u7406\\u673A\\u5236\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{children:\"\\u5EF6\\u4F38\\u9605\\u8BFB\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.w3schools.com/js/js_json_jsonp.asp\",children:\"W3Schools: JSONP\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy\",children:\"Same-origin policy\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\",children:\"Cross-Origin Resource Sharing (CORS)\"})}),`\n`]})]})}function s(c={}){let{wrapper:n}=c.components||{};return n?(0,e.jsx)(n,{...c,children:(0,e.jsx)(a,{...c})}):a(c)}return N(j);})();\n;return Component;"
}
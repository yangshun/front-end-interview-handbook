{
  "description": null,
  "info": {
    "excerpt": null,
    "title": "如何优化 DOM 操作以获得更好的性能？",
    "gitHubEditUrl": "https://github.com/yangshun/top-javascript-interview-questions/blob/main/questions/how-can-you-optimize-dom-manipulation-for-better-performance/zh-CN.mdx"
  },
  "solution": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var s=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var D=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),M=(t,e)=>{for(var l in e)c(t,l,{get:e[l],enumerable:!0})},d=(t,e,l,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of u(e))!g.call(t,o)&&o!==l&&c(t,o,{get:()=>e[o],enumerable:!(r=s(e,o))||r.enumerable});return t};var y=(t,e,l)=>(l=t!=null?h(p(t)):{},d(e||!t||!t.__esModule?c(l,\"default\",{value:t,enumerable:!0}):l,t)),E=t=>d(c({},\"__esModule\",{value:!0}),t);var a=D((x,i)=>{i.exports=_jsx_runtime});var w={};M(w,{default:()=>f,frontmatter:()=>O});var n=y(a()),O={title:\"\\u5982\\u4F55\\u4F18\\u5316 DOM \\u64CD\\u4F5C\\u4EE5\\u83B7\\u5F97\\u66F4\\u597D\\u7684\\u6027\\u80FD\\uFF1F\"};function m(t){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\",hr:\"hr\",h3:\"h3\",pre:\"pre\",ul:\"ul\",li:\"li\",a:\"a\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"TL;DR\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8981\\u4F18\\u5316 DOM \\u64CD\\u4F5C\\u4EE5\\u83B7\\u5F97\\u66F4\\u597D\\u7684\\u6027\\u80FD\\uFF0C\\u8BF7\\u5C3D\\u91CF\\u51CF\\u5C11\\u76F4\\u63A5\\u8BBF\\u95EE\\u548C\\u66F4\\u65B0 DOM\\u3002\\u4F7F\\u7528\\u8BF8\\u5982\\u6279\\u5904\\u7406 DOM \\u66F4\\u6539\\u3001\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"documentFragment\"}),\" \\u5904\\u7406\\u591A\\u4E2A\\u5143\\u7D20\\u4EE5\\u53CA\\u5229\\u7528 React \\u7B49\\u865A\\u62DF DOM \\u5E93\\u7B49\\u6280\\u672F\\u3002\\u6B64\\u5916\\uFF0C\\u8FD8\\u53EF\\u4EE5\\u8003\\u8651\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"requestAnimationFrame\"}),\" \\u8FDB\\u884C\\u52A8\\u753B\\u5904\\u7406\\uFF0C\\u5E76\\u901A\\u8FC7\\u5206\\u522B\\u8BFB\\u53D6\\u548C\\u5199\\u5165 DOM \\u5C5E\\u6027\\u6765\\u907F\\u514D\\u5E03\\u5C40\\u6296\\u52A8\\u3002\"]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u5982\\u4F55\\u4F18\\u5316 DOM \\u64CD\\u4F5C\\u4EE5\\u83B7\\u5F97\\u66F4\\u597D\\u7684\\u6027\\u80FD\\uFF1F\"}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u5C3D\\u91CF\\u51CF\\u5C11\\u76F4\\u63A5 DOM \\u8BBF\\u95EE\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8BBF\\u95EE DOM \\u76F8\\u5BF9\\u8F83\\u6162\\uFF0C\\u56E0\\u6B64\\u8BF7\\u5C3D\\u91CF\\u51CF\\u5C11\\u4ECE DOM \\u8BFB\\u53D6\\u6216\\u5199\\u5165 DOM \\u7684\\u6B21\\u6570\\u3002\\u76F8\\u53CD\\uFF0C\\u5C06\\u5BF9\\u5143\\u7D20\\u7684\\u5F15\\u7528\\u5B58\\u50A8\\u5728\\u53D8\\u91CF\\u4E2D\\uFF0C\\u5E76\\u4F7F\\u7528\\u8FD9\\u4E9B\\u53D8\\u91CF\\u3002\"}),`\n`,(0,n.jsx)(e.pre,{live:!0,children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// Creating an element for the example below\nconst newElement = document.createElement('div');\nnewElement.id = 'myElement';\ndocument.body.appendChild(newElement);\n\nconst element = document.getElementById('myElement'); // Access once\n// Then use the reference to edit style\nelement.style.color = 'red';\nelement.style.backgroundColor = 'blue';\n\nconsole.log(document.body); // Notice the edits\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u6279\\u5904\\u7406 DOM \\u66F4\\u6539\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4E0D\\u8981\\u4E00\\u6B21\\u5BF9 DOM \\u8FDB\\u884C\\u591A\\u6B21\\u66F4\\u6539\\uFF0C\\u800C\\u662F\\u5C06\\u5B83\\u4EEC\\u6279\\u5904\\u7406\\u5728\\u4E00\\u8D77\\u3002\\u8FD9\\u51CF\\u5C11\\u4E86\\u91CD\\u6392\\u548C\\u91CD\\u7ED8\\u7684\\u6B21\\u6570\\u3002\"}),`\n`,(0,n.jsx)(e.pre,{live:!0,children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// Creating an element for the example below\nconst newElement = document.createElement('div');\nnewElement.id = 'myElement';\ndocument.body.appendChild(newElement);\n\nconst element = document.getElementById('myElement');\nelement.style.cssText = 'color: red; background-color: blue;';\n\nconsole.log(document.body); // Notice the edits\n`})}),`\n`,(0,n.jsxs)(e.h3,{children:[\"\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"documentFragment\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5C06\\u591A\\u4E2A\\u5143\\u7D20\\u6DFB\\u52A0\\u5230 DOM \\u65F6\\uFF0C\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"documentFragment\"}),\" \\u4EE5\\u6700\\u5927\\u9650\\u5EA6\\u5730\\u51CF\\u5C11\\u91CD\\u6392\\u548C\\u91CD\\u7ED8\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{live:!0,children:(0,n.jsx)(e.code,{className:\"language-js\",children:`const fragment = document.createDocumentFragment();\nfor (let i = 0; i < 100; i++) {\n  const newElement = document.createElement('div');\n  newElement.textContent = \\`Item \\${i}\\`;\n  fragment.appendChild(newElement);\n}\ndocument.body.appendChild(fragment);\n\nconsole.log(document.body); // Notice that the divs have been added\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u5229\\u7528\\u865A\\u62DF DOM \\u5E93\"}),`\n`,(0,n.jsx)(e.p,{children:\"React \\u7B49\\u5E93\\u4F7F\\u7528\\u865A\\u62DF DOM \\u6765\\u6279\\u5904\\u7406\\u66F4\\u65B0\\u5E76\\u6700\\u5927\\u9650\\u5EA6\\u5730\\u51CF\\u5C11\\u76F4\\u63A5 DOM \\u64CD\\u4F5C\\uFF0C\\u8FD9\\u53EF\\u4EE5\\u663E\\u8457\\u63D0\\u9AD8\\u6027\\u80FD\\u3002\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`import React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst App = () => (\n  <div>\n    <h1>Hello, world!</h1>\n  </div>\n);\n\nReactDOM.render(<App />, document.getElementById('root'));\n`})}),`\n`,(0,n.jsxs)(e.h3,{children:[\"\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"requestAnimationFrame\"}),\" \\u8FDB\\u884C\\u52A8\\u753B\\u5904\\u7406\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4E3A\\u4E86\\u83B7\\u5F97\\u66F4\\u6D41\\u7545\\u7684\\u52A8\\u753B\\u6548\\u679C\\uFF0C\\u8BF7\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"requestAnimationFrame\"}),\" \\u786E\\u4FDD\\u66F4\\u65B0\\u4E0E\\u6D4F\\u89C8\\u5668\\u7684\\u91CD\\u7ED8\\u5468\\u671F\\u540C\\u6B65\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`function animate() {\n  // Update animation state\n  requestAnimationFrame(animate);\n}\nrequestAnimationFrame(animate);\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u907F\\u514D\\u5E03\\u5C40\\u6296\\u52A8\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5F53\\u60A8\\u4EE5\\u8FEB\\u4F7F\\u6D4F\\u89C8\\u5668\\u591A\\u6B21\\u91CD\\u65B0\\u8BA1\\u7B97\\u6837\\u5F0F\\u548C\\u5E03\\u5C40\\u7684\\u65B9\\u5F0F\\u53CD\\u590D\\u8BFB\\u53D6\\u548C\\u5199\\u5165 DOM \\u65F6\\uFF0C\\u5C31\\u4F1A\\u53D1\\u751F\\u5E03\\u5C40\\u6296\\u52A8\\u3002\\u4E3A\\u907F\\u514D\\u8FD9\\u79CD\\u60C5\\u51B5\\uFF0C\\u8BF7\\u5C06\\u8BFB\\u53D6\\u548C\\u5199\\u5165\\u64CD\\u4F5C\\u5206\\u5F00\\u3002\"}),`\n`,(0,n.jsx)(e.pre,{live:!0,children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// Creating an element for the example below\nconst newElement = document.createElement('div');\nnewElement.id = 'myElement';\ndocument.body.appendChild(newElement);\n\nconst element = document.getElementById('myElement');\nconst height = element.clientHeight; // Read\nelement.style.height = \\`\\${height + 10}px\\`; // Write\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u5EF6\\u4F38\\u9605\\u8BFB\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Manipulating_the_DOM\",children:\"MDN Web Docs: DOM manipulation\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://developers.google.com/web/fundamentals/performance/rendering/avoid-large-complex-layouts-and-layout-thrashing\",children:\"Google Developers: Avoid large, complex layouts and layout thrashing\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/learn\",children:\"React documentation\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame\",children:\"MDN Web Docs: Using requestAnimationFrame\"})}),`\n`]})]})}function b(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(m,t)})):m(t)}var f=b;return E(w);})();\n;return Component;"
}
{
  "description": null,
  "metadata": {
    "access": "free",
    "author": null,
    "companies": [],
    "created": 1630800000,
    "difficulty": "easy",
    "duration": 5,
    "excerpt": null,
    "featured": false,
    "format": "quiz",
    "frameworkDefault": null,
    "frameworks": [],
    "href": "/questions/quiz/explain-the-concept-of-a-microtask-queue",
    "importance": "low",
    "languages": [],
    "nextQuestions": [],
    "published": true,
    "ranking": 999,
    "similarQuestions": [],
    "slug": "explain-the-concept-of-a-microtask-queue",
    "subtitle": null,
    "title": "Explain the concept of a microtask queue",
    "topics": [
      "async",
      "javascript"
    ],
    "gitHubEditUrl": "https://github.com/yangshun/top-javascript-interview-questions/blob/main/questions/explain-the-concept-of-a-microtask-queue/en-US.mdx"
  },
  "solution": "var Component=(()=>{var d=Object.create;var s=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var r in e)s(n,r,{get:e[r],enumerable:!0})},c=(n,e,r,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of m(e))!k.call(n,o)&&o!==r&&s(n,o,{get:()=>e[o],enumerable:!(i=u(e,o))||i.enumerable});return n};var b=(n,e,r)=>(r=n!=null?d(p(n)):{},c(e||!n||!n.__esModule?s(r,\"default\",{value:n,enumerable:!0}):r,n)),x=n=>c(s({},\"__esModule\",{value:!0}),n);var l=g((S,a)=>{a.exports=_jsx_runtime});var y={};f(y,{default:()=>M,frontmatter:()=>v});var t=b(l()),v={title:\"Explain the concept of a microtask queue\"};function h(n){let e=Object.assign({h2:\"h2\",p:\"p\",hr:\"hr\",h3:\"h3\",code:\"code\",ol:\"ol\",li:\"li\",strong:\"strong\",pre:\"pre\",ul:\"ul\",a:\"a\"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{children:\"TL;DR\"}),`\n`,(0,t.jsx)(e.p,{children:\"The microtask queue is a queue of tasks that need to be executed after the currently executing script and before any other task. Microtasks are typically used for tasks that need to be executed immediately after the current operation, such as promise callbacks. The microtask queue is processed before the macrotask queue, ensuring that microtasks are executed as soon as possible.\"}),`\n`,(0,t.jsx)(e.hr,{}),`\n`,(0,t.jsx)(e.h2,{children:\"The concept of a microtask queue\"}),`\n`,(0,t.jsx)(e.h3,{children:\"What is a microtask queue?\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"The microtask queue is a part of the JavaScript event loop mechanism. It is a queue that holds tasks that need to be executed immediately after the currently executing script and before any other task in the macrotask queue. Microtasks are typically used for operations that need to be executed as soon as possible, such as promise callbacks and \",(0,t.jsx)(e.code,{children:\"MutationObserver\"}),\" callbacks.\"]}),`\n`,(0,t.jsx)(e.h3,{children:\"How does the microtask queue work?\"}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:\"Execution order\"}),\": The microtask queue is processed after the currently executing script and before the macrotask queue. This means that microtasks are given higher priority over macrotasks.\"]}),`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:\"Event loop\"}),\": During each iteration of the event loop, the JavaScript engine first processes all the microtasks in the microtask queue before moving on to the macrotask queue.\"]}),`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:\"Adding microtasks\"}),\": Microtasks can be added to the microtask queue using methods like \",(0,t.jsx)(e.code,{children:\"Promise.resolve().then()\"}),\" and \",(0,t.jsx)(e.code,{children:\"queueMicrotask()\"}),\".\"]}),`\n`]}),`\n`,(0,t.jsx)(e.h3,{children:\"Example\"}),`\n`,(0,t.jsx)(e.p,{children:\"Here is an example to illustrate how the microtask queue works:\"}),`\n`,(0,t.jsx)(e.pre,{live:!0,children:(0,t.jsx)(e.code,{className:\"language-js\",children:`console.log('Script start');\n\nsetTimeout(() => {\n  console.log('setTimeout');\n}, 0);\n\nPromise.resolve()\n  .then(() => {\n    console.log('Promise 1');\n  })\n  .then(() => {\n    console.log('Promise 2');\n  });\n\nconsole.log('Script end');\n`})}),`\n`,(0,t.jsx)(e.p,{children:\"Output:\"}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:`Script start\nScript end\nPromise 1\nPromise 2\nsetTimeout\n`})}),`\n`,(0,t.jsx)(e.p,{children:\"In this example:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[\"The synchronous code (\",(0,t.jsx)(e.code,{children:\"console.log('Script start')\"}),\" and \",(0,t.jsx)(e.code,{children:\"console.log('Script end')\"}),\") is executed first.\"]}),`\n`,(0,t.jsxs)(e.li,{children:[\"The promise callbacks (\",(0,t.jsx)(e.code,{children:\"Promise 1\"}),\" and \",(0,t.jsx)(e.code,{children:\"Promise 2\"}),\") are added to the microtask queue and executed next.\"]}),`\n`,(0,t.jsxs)(e.li,{children:[\"The \",(0,t.jsx)(e.code,{children:\"setTimeout\"}),\" callback is added to the macrotask queue and executed last.\"]}),`\n`]}),`\n`,(0,t.jsx)(e.h3,{children:\"Use cases\"}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:\"Promise callbacks\"}),\": Microtasks are commonly used for promise callbacks to ensure they are executed as soon as possible after the current operation.\"]}),`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:\"MutationObserver\"}),\": The \",(0,t.jsx)(e.code,{children:\"MutationObserver\"}),\" API uses microtasks to notify changes in the DOM.\"]}),`\n`]}),`\n`,(0,t.jsx)(e.h2,{children:\"Further reading\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/HTML_DOM_API/Microtask_guide\",children:\"MDN Web Docs: Microtask\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop\",children:\"JavaScript Event Loop Explained\"})}),`\n`,(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:\"https://javascript.info/microtask-queue\",children:\"Understanding the JavaScript Microtask Queue\"})}),`\n`]})]})}function q(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(h,n)})):h(n)}var M=q;return x(y);})();\n;return Component;"
}
{
  "description": null,
  "metadata": {
    "access": "free",
    "author": null,
    "companies": [],
    "created": 1630800000,
    "difficulty": "medium",
    "duration": 5,
    "excerpt": null,
    "featured": true,
    "format": "quiz",
    "frameworkDefault": "react",
    "frameworks": [
      {
        "framework": "react",
        "href": "/questions/quiz/what-is-the-difference-between-useeffect-and-uselayouteffect-in-react"
      }
    ],
    "href": "/questions/quiz/what-is-the-difference-between-useeffect-and-uselayouteffect-in-react",
    "importance": "low",
    "languages": [],
    "nextQuestions": [],
    "published": true,
    "ranking": 110,
    "similarQuestions": [],
    "slug": "what-is-the-difference-between-useeffect-and-uselayouteffect-in-react",
    "subtitle": null,
    "title": "React 中 `useEffect` 和 `useLayoutEffect` 有什么区别？",
    "topics": [
      "react"
    ],
    "gitHubEditUrl": "https://github.com/yangshun/top-reactjs-interview-questions/blob/main/questions/what-is-the-difference-between-useeffect-and-uselayouteffect-in-react/zh-CN.mdx"
  },
  "solution": "var Component=(()=>{var u=Object.create;var t=Object.defineProperty;var s=Object.getOwnPropertyDescriptor;var a=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var p=(c,e)=>()=>(e||c((e={exports:{}}).exports,e),e.exports),y=(c,e)=>{for(var l in e)t(c,l,{get:e[l],enumerable:!0})},d=(c,e,l,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of a(e))!m.call(c,r)&&r!==l&&t(c,r,{get:()=>e[r],enumerable:!(i=s(e,r))||i.enumerable});return c};var g=(c,e,l)=>(l=c!=null?u(E(c)):{},d(e||!c||!c.__esModule?t(l,\"default\",{value:c,enumerable:!0}):l,c)),L=c=>d(t({},\"__esModule\",{value:!0}),c);var h=p((j,o)=>{o.exports=_jsx_runtime});var O={};y(O,{default:()=>M,frontmatter:()=>R});var n=g(h()),R={title:\"React \\u4E2D `useEffect` \\u548C `useLayoutEffect` \\u6709\\u4EC0\\u4E48\\u533A\\u522B\\uFF1F\"};function f(c){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\",ul:\"ul\",li:\"li\",pre:\"pre\",hr:\"hr\",h3:\"h3\",a:\"a\"},c.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"TL;DR\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\" \\u548C \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" \\u662F React \\u94A9\\u5B50\\uFF0C\\u7528\\u4E8E\\u5904\\u7406\\u51FD\\u6570\\u7EC4\\u4EF6\\u4E2D\\u7684\\u526F\\u4F5C\\u7528\\uFF0C\\u4F46\\u5B83\\u4EEC\\u5728\\u65F6\\u673A\\u548C\\u7528\\u4F8B\\u4E0A\\u6709\\u6240\\u4E0D\\u540C\\uFF1A\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\"\\uFF1A\\u5728 DOM \\u7ED8\\u5236\\u540E\\u5F02\\u6B65\\u8FD0\\u884C\\u3002\\u5B83\\u9002\\u7528\\u4E8E\\u6570\\u636E\\u83B7\\u53D6\\u3001\\u8BA2\\u9605\\u6216\\u65E5\\u5FD7\\u8BB0\\u5F55\\u7B49\\u4EFB\\u52A1\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\"\\uFF1A\\u5728 DOM \\u66F4\\u6539\\u540E\\u4F46\\u5728\\u6D4F\\u89C8\\u5668\\u7ED8\\u5236\\u4E4B\\u524D\\u540C\\u6B65\\u8FD0\\u884C\\u3002\\u5C06\\u5176\\u7528\\u4E8E\\u6D4B\\u91CF DOM \\u5143\\u7D20\\u6216\\u5C06 UI \\u4E0E DOM \\u540C\\u6B65\\u7B49\\u4EFB\\u52A1\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4EE3\\u7801\\u793A\\u4F8B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-jsx\",children:`import React, { useEffect, useLayoutEffect, useRef } from 'react';\n\nfunction Example() {\n  const ref = useRef();\n\n  useEffect(() => {\n    console.log('useEffect: Runs after DOM paint');\n  });\n\n  useLayoutEffect(() => {\n    console.log('useLayoutEffect: Runs before DOM paint');\n    console.log('Element width:', ref.current.offsetWidth);\n  });\n\n  return <div ref={ref}>Hello</div>;\n}\n`})}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsxs)(e.h2,{children:[\"\\u4EC0\\u4E48\\u662F \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\"\\uFF1F\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\" \\u662F\\u4E00\\u4E2A React \\u94A9\\u5B50\\uFF0C\\u7528\\u4E8E\\u7BA1\\u7406\\u51FD\\u6570\\u7EC4\\u4EF6\\u4E2D\\u7684\\u526F\\u4F5C\\u7528\\u3002\\u526F\\u4F5C\\u7528\\u5305\\u62EC\\u83B7\\u53D6\\u6570\\u636E\\u3001\\u66F4\\u65B0\\u8BA2\\u9605\\u6216\\u4E0E\\u6D4F\\u89C8\\u5668\\u7684 DOM API \\u4EA4\\u4E92\\u7B49\\u64CD\\u4F5C\\u3002\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u5B83\\u5728 DOM \\u66F4\\u65B0\\u548C\\u7ED8\\u5236\\u540E\\u5F02\\u6B65\\u8FD0\\u884C\\u3002\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u5B83\\u4E0D\\u4F1A\\u963B\\u6B62\\u6D4F\\u89C8\\u5668\\u66F4\\u65B0 UI\\u3002\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u9ED8\\u8BA4\\u60C5\\u51B5\\u4E0B\\uFF0C\\u5B83\\u5728\\u6BCF\\u6B21\\u6E32\\u67D3\\u540E\\u8FD0\\u884C\\uFF0C\\u4F46\\u4F9D\\u8D56\\u9879\\u53EF\\u4EE5\\u63A7\\u5236\\u5176\\u6267\\u884C\\u3002\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u4EE3\\u7801\\u793A\\u4F8B\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-jsx\",children:`import React, { useEffect } from 'react';\n\nfunction Example() {\n  useEffect(() => {\n    console.log('Component mounted or updated');\n    return () => console.log('Cleanup on unmount or dependency change');\n  }, []); // Runs only on mount and unmount\n\n  return <div>Hello, World!</div>;\n}\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u5E38\\u89C1\\u7528\\u4F8B\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u4ECE API \\u83B7\\u53D6\\u6570\\u636E\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u8BBE\\u7F6E\\u8BA2\\u9605\\uFF08\\u4F8B\\u5982\\uFF0CWebSocket \\u8FDE\\u63A5\\uFF09\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u65E5\\u5FD7\\u8BB0\\u5F55\\u6216\\u5206\\u6790\\u8DDF\\u8E2A\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u6DFB\\u52A0\\u548C\\u5220\\u9664\\u4E8B\\u4EF6\\u4FA6\\u542C\\u5668\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{children:[\"\\u4EC0\\u4E48\\u662F \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\"\\uFF1F\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" \\u662F\\u4E00\\u4E2A\\u7C7B\\u4F3C\\u4E8E \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\" \\u7684 React \\u94A9\\u5B50\\uFF0C\\u4F46\\u5B83\\u5728\\u65F6\\u673A\\u4E0A\\u6709\\u6240\\u4E0D\\u540C\\u3002\\u5B83\\u5728 DOM \\u66F4\\u6539\\u540E\\u5E76\\u5728\\u6D4F\\u89C8\\u5668\\u7ED8\\u5236\\u5C4F\\u5E55\\u4E4B\\u524D\\u540C\\u6B65\\u8FD0\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u5B83\\u9002\\u7528\\u4E8E\\u9700\\u8981\\u5728\\u7ED8\\u5236\\u524D\\u8BBF\\u95EE DOM \\u7684\\u4EFB\\u52A1\\u3002\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u5B83\\u53EF\\u4EE5\\u963B\\u6B62\\u6E32\\u67D3\\uFF0C\\u56E0\\u6B64\\u5E94\\u8C28\\u614E\\u4F7F\\u7528\\u3002\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u4EE3\\u7801\\u793A\\u4F8B\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-jsx\",children:`import React, { useLayoutEffect, useRef } from 'react';\n\nfunction Example() {\n  const ref = useRef();\n\n  useLayoutEffect(() => {\n    console.log('Element dimensions:', ref.current.getBoundingClientRect());\n  });\n\n  return <div ref={ref}>Hello</div>;\n}\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u5E38\\u89C1\\u7528\\u4F8B\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u6D4B\\u91CF DOM \\u5143\\u7D20\\uFF08\\u4F8B\\u5982\\uFF0C\\u7528\\u4E8E\\u52A8\\u753B\\u6216\\u5E03\\u5C40\\uFF09\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u6839\\u636E\\u8BA1\\u7B97\\u8C03\\u6574 DOM \\u5C5E\\u6027\\u6216\\u6837\\u5F0F\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u4FEE\\u590D UI \\u540C\\u6B65\\u95EE\\u9898\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\" \\u548C \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" \\u4E4B\\u95F4\\u7684\\u4E3B\\u8981\\u533A\\u522B\"]}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u65F6\\u673A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\"\\uFF1A\\u5728\\u6D4F\\u89C8\\u5668\\u7ED8\\u5236 UI \\u540E\\u6267\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\"\\uFF1A\\u5728\\u6D4F\\u89C8\\u5668\\u7ED8\\u5236\\u4E4B\\u524D\\uFF0CDOM \\u66F4\\u6539\\u540E\\u7ACB\\u5373\\u6267\\u884C\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u963B\\u585E\\u884C\\u4E3A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\"\\uFF1A\\u975E\\u963B\\u585E\\uFF0C\\u5F02\\u6B65\\u8FD0\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\"\\uFF1A\\u963B\\u585E\\uFF0C\\u540C\\u6B65\\u8FD0\\u884C\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u7528\\u4F8B\\u793A\\u4F8B\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\"\\uFF1A\\u83B7\\u53D6\\u6570\\u636E\\u3001\\u66F4\\u65B0\\u72B6\\u6001\\u6216\\u6DFB\\u52A0\\u4E8B\\u4EF6\\u76D1\\u542C\\u5668\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\"\\uFF1A\\u6D4B\\u91CF DOM \\u5143\\u7D20\\u3001\\u7BA1\\u7406\\u52A8\\u753B\\u6216\\u89E3\\u51B3\\u5E03\\u5C40\\u95EE\\u9898\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u5EF6\\u4F38\\u9605\\u8BFB\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/hooks\",children:\"React Hooks \\u6587\\u6863\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.a,{href:\"https://react.dev/reference/react/useEffect\",children:[\"React \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\" API \\u6587\\u6863\"]})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.a,{href:\"https://react.dev/reference/react/useLayoutEffect\",children:[\"React \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" API \\u6587\\u6863\"]})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.a,{href:\"https://kentcdodds.com/blog/useeffect-vs-uselayouteffect\",children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\" \\u548C \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" \\u4E4B\\u95F4\\u7684\\u533A\\u522B\"]})}),`\n`]})]})}function D(c={}){let{wrapper:e}=c.components||{};return e?(0,n.jsx)(e,Object.assign({},c,{children:(0,n.jsx)(f,c)})):f(c)}var M=D;return L(O);})();\n;return Component;"
}
{
  "description": null,
  "metadata": {
    "access": "free",
    "author": null,
    "companies": [],
    "created": 1630800000,
    "difficulty": "medium",
    "duration": 5,
    "excerpt": null,
    "featured": true,
    "format": "quiz",
    "frameworkDefault": "react",
    "frameworks": [
      {
        "framework": "react",
        "href": "/questions/quiz/what-is-the-difference-between-useeffect-and-uselayouteffect-in-react"
      }
    ],
    "href": "/questions/quiz/what-is-the-difference-between-useeffect-and-uselayouteffect-in-react",
    "importance": "low",
    "languages": [],
    "nextQuestions": [],
    "published": true,
    "ranking": 110,
    "similarQuestions": [],
    "slug": "what-is-the-difference-between-useeffect-and-uselayouteffect-in-react",
    "subtitle": null,
    "title": "What is the difference between `useEffect` and `useLayoutEffect` in React?",
    "topics": [
      "react"
    ],
    "gitHubEditUrl": "https://github.com/yangshun/top-reactjs-interview-questions/blob/main/questions/what-is-the-difference-between-useeffect-and-uselayouteffect-in-react/en-US.mdx"
  },
  "solution": "var Component=(()=>{var u=Object.create;var r=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty;var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),E=(t,e)=>{for(var c in e)r(t,c,{get:e[c],enumerable:!0})},s=(t,e,c,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of g(e))!p.call(t,i)&&i!==c&&r(t,i,{get:()=>e[i],enumerable:!(o=f(e,i))||o.enumerable});return t};var b=(t,e,c)=>(c=t!=null?u(m(t)):{},s(e||!t||!t.__esModule?r(c,\"default\",{value:t,enumerable:!0}):c,t)),x=t=>s(r({},\"__esModule\",{value:!0}),t);var d=y((M,l)=>{l.exports=_jsx_runtime});var k={};E(k,{default:()=>h,frontmatter:()=>R});var n=b(d()),R={title:\"What is the difference between `useEffect` and `useLayoutEffect` in React?\"};function a(t){let e={a:\"a\",code:\"code\",h2:\"h2\",h3:\"h3\",hr:\"hr\",li:\"li\",p:\"p\",pre:\"pre\",ul:\"ul\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"TL;DR\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\" and \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" are React hooks used to handle side effects in functional components, but they differ in timing and use cases:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\": Runs asynchronously after the DOM has been painted. It is suitable for tasks like data fetching, subscriptions, or logging.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\": Runs synchronously after DOM mutations but before the browser paints. Use it for tasks like measuring DOM elements or synchronizing the UI with the DOM.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Code example:\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-jsx\",children:`import React, { useEffect, useLayoutEffect, useRef } from 'react';\n\nfunction Example() {\n  const ref = useRef();\n\n  useEffect(() => {\n    console.log('useEffect: Runs after DOM paint');\n  });\n\n  useLayoutEffect(() => {\n    console.log('useLayoutEffect: Runs before DOM paint');\n    console.log('Element width:', ref.current.offsetWidth);\n  });\n\n  return <div ref={ref}>Hello</div>;\n}\n`})}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsxs)(e.h2,{children:[\"What is \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\"?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\" is a React hook used for managing side effects in functional components. Side effects include operations like fetching data, updating a subscription, or interacting with the browser's DOM API.\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"It runs asynchronously after the DOM has been updated and painted.\"}),`\n`,(0,n.jsx)(e.li,{children:\"It does not block the browser from updating the UI.\"}),`\n`,(0,n.jsx)(e.li,{children:\"By default, it runs after every render, but dependencies can control its execution.\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"Code example\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-jsx\",children:`import React, { useEffect } from 'react';\n\nfunction Example() {\n  useEffect(() => {\n    console.log('Component mounted or updated');\n    return () => console.log('Cleanup on unmount or dependency change');\n  }, []); // Runs only on mount and unmount\n\n  return <div>Hello, World!</div>;\n}\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"Common use cases\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Fetching data from an API\"}),`\n`,(0,n.jsx)(e.li,{children:\"Setting up subscriptions (e.g., WebSocket connections)\"}),`\n`,(0,n.jsx)(e.li,{children:\"Logging or analytics tracking\"}),`\n`,(0,n.jsx)(e.li,{children:\"Adding and removing event listeners\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{children:[\"What is \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\"?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" is a React hook similar to \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\", but it differs in timing. It runs synchronously after DOM mutations and before the browser paints the screen.\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"It is suitable for tasks where the DOM needs to be accessed before the paint.\"}),`\n`,(0,n.jsx)(e.li,{children:\"It can block rendering, so it should be used sparingly.\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"Code example\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-jsx\",children:`import React, { useLayoutEffect, useRef } from 'react';\n\nfunction Example() {\n  const ref = useRef();\n\n  useLayoutEffect(() => {\n    console.log('Element dimensions:', ref.current.getBoundingClientRect());\n  });\n\n  return <div ref={ref}>Hello</div>;\n}\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"Common use cases\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Measuring DOM elements (e.g., for animations or layouts)\"}),`\n`,(0,n.jsx)(e.li,{children:\"Adjusting DOM properties or styles based on calculations\"}),`\n`,(0,n.jsx)(e.li,{children:\"Fixing UI synchronization issues\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{children:[\"key differences between \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\" and \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"})]}),`\n`,(0,n.jsx)(e.h3,{children:\"Timing\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\": Executes after the browser has painted the UI.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\": Executes before the browser paints, right after DOM changes.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"Blocking behavior\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\": Non-blocking, runs asynchronously.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\": Blocking, runs synchronously.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"Use case examples\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useEffect\"}),\": Fetching data, updating state, or adding event listeners.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\": Measuring DOM elements, managing animations, or solving layout issues.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{children:\"Further reading\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/hooks\",children:\"React Hooks documentation\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.a,{href:\"https://react.dev/reference/react/useEffect\",children:[\"React \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\" API documentation\"]})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.a,{href:\"https://react.dev/reference/react/useLayoutEffect\",children:[\"React \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" API documentation\"]})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.a,{href:\"https://kentcdodds.com/blog/useeffect-vs-uselayouteffect\",children:[\"Differences between \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\" and \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"})]})}),`\n`]})]})}function h(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(a,{...t})}):a(t)}return x(k);})();\n;return Component;"
}
{
  "description": null,
  "info": {
    "excerpt": null,
    "title": "如何为 JavaScript 代码编写单元测试？",
    "gitHubEditUrl": "https://github.com/yangshun/top-javascript-interview-questions/blob/main/questions/how-do-you-write-unit-tests-for-javascript-code/zh-CN.mdx"
  },
  "solution": "var Component=(()=>{var i=Object.create;var r=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),g=(t,e)=>{for(var c in e)r(t,c,{get:e[c],enumerable:!0})},d=(t,e,c,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of p(e))!j.call(t,s)&&s!==c&&r(t,s,{get:()=>e[s],enumerable:!(a=u(e,s))||a.enumerable});return t};var x=(t,e,c)=>(c=t!=null?i(m(t)):{},d(e||!t||!t.__esModule?r(c,\"default\",{value:t,enumerable:!0}):c,t)),b=t=>d(r({},\"__esModule\",{value:!0}),t);var o=f((k,h)=>{h.exports=_jsx_runtime});var w={};g(w,{default:()=>D,frontmatter:()=>q});var n=x(o()),q={title:\"\\u5982\\u4F55\\u4E3A JavaScript \\u4EE3\\u7801\\u7F16\\u5199\\u5355\\u5143\\u6D4B\\u8BD5\\uFF1F\"};function l(t){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\",pre:\"pre\",hr:\"hr\",h3:\"h3\",ul:\"ul\",li:\"li\",a:\"a\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"\\u603B\\u7ED3\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8981\\u4E3A JavaScript \\u4EE3\\u7801\\u7F16\\u5199\\u5355\\u5143\\u6D4B\\u8BD5\\uFF0C\\u60A8\\u901A\\u5E38\\u4F7F\\u7528 Jest \\u6216 Mocha \\u7B49\\u6D4B\\u8BD5\\u6846\\u67B6\\u3002\\u9996\\u5148\\uFF0C\\u60A8\\u901A\\u8FC7\\u5B89\\u88C5\\u5FC5\\u8981\\u7684\\u5E93\\u6765\\u8BBE\\u7F6E\\u6D4B\\u8BD5\\u73AF\\u5883\\u3002\\u7136\\u540E\\uFF0C\\u60A8\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"describe\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"it\"}),\" \\u6216 \",(0,n.jsx)(e.code,{children:\"test\"}),\" \\u7B49\\u51FD\\u6570\\u7F16\\u5199\\u6D4B\\u8BD5\\u7528\\u4F8B\\u6765\\u5B9A\\u4E49\\u60A8\\u7684\\u6D4B\\u8BD5\\u3002\\u6BCF\\u4E2A\\u6D4B\\u8BD5\\u7528\\u4F8B\\u90FD\\u5E94\\u4FA7\\u91CD\\u4E8E\\u4E00\\u5C0F\\u6BB5\\u5B64\\u7ACB\\u7684\\u529F\\u80FD\\u3002\\u60A8\\u4F7F\\u7528\\u65AD\\u8A00\\u6765\\u68C0\\u67E5\\u4EE3\\u7801\\u7684\\u8F93\\u51FA\\u662F\\u5426\\u4E0E\\u9884\\u671F\\u7ED3\\u679C\\u5339\\u914D\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4F7F\\u7528 Jest \\u7684\\u793A\\u4F8B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// sum.js\nfunction sum(a, b) {\n  return a + b;\n}\nmodule.exports = sum;\n\n// sum.test.js\nconst sum = require('./sum');\n\ntest('adds 1 + 2 to equal 3', () => {\n  expect(sum(1, 2)).toBe(3);\n});\n`})}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u8BBE\\u7F6E\\u6D4B\\u8BD5\\u73AF\\u5883\"}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u5B89\\u88C5 Jest\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8981\\u5F00\\u59CB\\u4F7F\\u7528 Jest\\uFF0C\\u60A8\\u9700\\u8981\\u901A\\u8FC7 npm \\u5B89\\u88C5\\u5B83\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-bash\",children:`npm install --save-dev jest\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u914D\\u7F6E Jest\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5C06\\u811A\\u672C\\u6DFB\\u52A0\\u5230\\u60A8\\u7684 \",(0,n.jsx)(e.code,{children:\"package.json\"}),\" \\u4EE5\\u8FD0\\u884C Jest\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-json\",children:`{\n  \"scripts\": {\n    \"test\": \"jest\"\n  }\n}\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u7F16\\u5199\\u6D4B\\u8BD5\\u7528\\u4F8B\"}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u57FA\\u672C\\u7ED3\\u6784\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6D4B\\u8BD5\\u6587\\u4EF6\\u901A\\u5E38\\u5305\\u542B\\u4E00\\u4E2A\\u6216\\u591A\\u4E2A \",(0,n.jsx)(e.code,{children:\"describe\"}),\" \\u5757\\uFF08\\u7528\\u4E8E\\u5206\\u7EC4\\u76F8\\u5173\\u6D4B\\u8BD5\\uFF09\\u548C \",(0,n.jsx)(e.code,{children:\"it\"}),\" \\u6216 \",(0,n.jsx)(e.code,{children:\"test\"}),\" \\u5757\\uFF08\\u7528\\u4E8E\\u5B9A\\u4E49\\u5355\\u4E2A\\u6D4B\\u8BD5\\u7528\\u4F8B\\uFF09\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u793A\\u4F8B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// sum.js\nfunction sum(a, b) {\n  return a + b;\n}\nmodule.exports = sum;\n\n// sum.test.js\nconst sum = require('./sum');\n\ndescribe('sum function', () => {\n  test('adds 1 + 2 to equal 3', () => {\n    expect(sum(1, 2)).toBe(3);\n  });\n\n  test('adds -1 + 1 to equal 0', () => {\n    expect(sum(-1, 1)).toBe(0);\n  });\n});\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u4F7F\\u7528\\u65AD\\u8A00\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u65AD\\u8A00\\u7528\\u4E8E\\u68C0\\u67E5\\u4EE3\\u7801\\u7684\\u8F93\\u51FA\\u662F\\u5426\\u4E0E\\u9884\\u671F\\u7ED3\\u679C\\u5339\\u914D\\u3002Jest \\u63D0\\u4F9B\\u4E86\\u5404\\u79CD\\u65AD\\u8A00\\u65B9\\u6CD5\\uFF0C\\u5982 \",(0,n.jsx)(e.code,{children:\"toBe\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"toEqual\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"toBeNull\"}),\" \\u7B49\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u793A\\u4F8B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`test('object assignment', () => {\n  const data = { one: 1 };\n  data['two'] = 2;\n  expect(data).toEqual({ one: 1, two: 2 });\n});\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u6A21\\u62DF\\u4F9D\\u8D56\\u9879\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6709\\u65F6\\uFF0C\\u60A8\\u9700\\u8981\\u6A21\\u62DF\\u4F9D\\u8D56\\u9879\\u4EE5\\u9694\\u79BB\\u60A8\\u6B63\\u5728\\u6D4B\\u8BD5\\u7684\\u4EE3\\u7801\\u5355\\u5143\\u3002 Jest \\u63D0\\u4F9B\\u4E86 \",(0,n.jsx)(e.code,{children:\"jest.fn()\"}),\" \\u548C \",(0,n.jsx)(e.code,{children:\"jest.mock()\"}),\" \\u7B49\\u529F\\u80FD\\u6765\\u5B9E\\u73B0\\u6B64\\u76EE\\u7684\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u793A\\u4F8B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// fetchData.js\nconst fetch = require('node-fetch');\n\nasync function fetchData(url) {\n  const response = await fetch(url);\n  return response.json();\n}\nmodule.exports = fetchData;\n\n// fetchData.test.js\nconst fetchData = require('./fetchData');\nconst fetch = require('node-fetch');\n\njest.mock('node-fetch');\n\ntest('fetches data from API', async () => {\n  const mockResponse = { data: '12345' };\n  fetch.mockResolvedValueOnce({\n    json: async () => mockResponse,\n  });\n\n  const data = await fetchData('https://api.example.com/data');\n  expect(data).toEqual(mockResponse);\n});\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u8FD0\\u884C\\u6D4B\\u8BD5\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8981\\u8FD0\\u884C\\u6D4B\\u8BD5\\uFF0C\\u8BF7\\u4F7F\\u7528\\u4EE5\\u4E0B\\u547D\\u4EE4\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-bash\",children:`npm test\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u5EF6\\u4F38\\u9605\\u8BFB\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://jestjs.io/docs/getting-started\",children:\"Jest \\u6587\\u6863\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://mochajs.org/\",children:\"Mocha \\u6587\\u6863\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://www.chaijs.com/\",children:\"Chai \\u6587\\u6863\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://sinonjs.org/\",children:\"Sinon \\u6587\\u6863\"})}),`\n`]})]})}function J(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(l,t)})):l(t)}var D=J;return b(w);})();\n;return Component;"
}
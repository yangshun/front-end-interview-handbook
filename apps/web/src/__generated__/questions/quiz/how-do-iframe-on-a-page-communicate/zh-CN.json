{
  "description": null,
  "metadata": {
    "access": "free",
    "author": null,
    "companies": [],
    "created": 1630800000,
    "difficulty": "easy",
    "duration": 5,
    "excerpt": null,
    "featured": false,
    "format": "quiz",
    "frameworkDefault": null,
    "frameworks": [],
    "href": "/questions/quiz/how-do-iframe-on-a-page-communicate",
    "importance": "low",
    "languages": [],
    "nextQuestions": [],
    "published": true,
    "ranking": 999,
    "similarQuestions": [],
    "slug": "how-do-iframe-on-a-page-communicate",
    "subtitle": null,
    "title": "页面上的 `<iframe>` 如何通信？",
    "topics": [
      "web-api",
      "javascript",
      "html"
    ],
    "gitHubEditUrl": "https://github.com/yangshun/top-javascript-interview-questions/blob/main/questions/how-do-iframe-on-a-page-communicate/zh-CN.mdx"
  },
  "solution": "var Component=(()=>{var m=Object.create;var c=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var w=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),M=(r,e)=>{for(var i in e)c(r,i,{get:e[i],enumerable:!0})},d=(r,e,i,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of p(e))!u.call(r,o)&&o!==i&&c(r,o,{get:()=>e[o],enumerable:!(t=g(e,o))||t.enumerable});return r};var v=(r,e,i)=>(i=r!=null?m(f(r)):{},d(e||!r||!r.__esModule?c(i,\"default\",{value:r,enumerable:!0}):i,r)),x=r=>d(c({},\"__esModule\",{value:!0}),r);var s=w((H,l)=>{l.exports=_jsx_runtime});var j={};M(j,{default:()=>h,frontmatter:()=>W});var n=v(s()),W={title:\"\\u9875\\u9762\\u4E0A\\u7684 `<iframe>` \\u5982\\u4F55\\u901A\\u4FE1\\uFF1F\"};function a(r){let e={a:\"a\",code:\"code\",h2:\"h2\",h3:\"h3\",h4:\"h4\",hr:\"hr\",li:\"li\",p:\"p\",pre:\"pre\",strong:\"strong\",ul:\"ul\",...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"\\u603B\\u7ED3\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u9875\\u9762\\u4E0A\\u7684 \",(0,n.jsx)(e.code,{children:\"<iframe>\"}),\" \\u5143\\u7D20\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"postMessage\"}),\" API \\u8FDB\\u884C\\u901A\\u4FE1\\u3002\\u8FD9\\u5141\\u8BB8\\u7236\\u9875\\u9762\\u548C iframe \\u4E4B\\u95F4\\u8FDB\\u884C\\u5B89\\u5168\\u7684\\u8DE8\\u6E90\\u901A\\u4FE1\\u3002\",(0,n.jsx)(e.code,{children:\"postMessage\"}),\" \\u65B9\\u6CD5\\u53D1\\u9001\\u6D88\\u606F\\uFF0C\\u800C \",(0,n.jsx)(e.code,{children:\"message\"}),\" \\u4E8B\\u4EF6\\u4FA6\\u542C\\u5668\\u63A5\\u6536\\u6D88\\u606F\\u3002\\u8FD9\\u662F\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u4F8B\\u5B50\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// \\u5728\\u7236\\u9875\\u9762\\u4E2D\nconst iframe = document.querySelector('iframe');\niframe.contentWindow.postMessage('Hello from parent', '*');\n\n// \\u5728 iframe \\u4E2D\nwindow.addEventListener('message', (event) => {\n  console.log(event.data); // 'Hello from parent'\n});\n`})}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsxs)(e.h2,{children:[\"\\u9875\\u9762\\u4E0A\\u7684 \",(0,n.jsx)(e.code,{children:\"<iframe>\"}),\" \\u5982\\u4F55\\u901A\\u4FE1\\uFF1F\"]}),`\n`,(0,n.jsxs)(e.h3,{children:[\"\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"postMessage\"}),\" API\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"postMessage\"}),\" API \\u662F iframe \\u76F8\\u4E92\\u4E4B\\u95F4\\u6216\\u4E0E\\u5176\\u7236\\u9875\\u9762\\u901A\\u4FE1\\u7684\\u6700\\u5E38\\u89C1\\u548C\\u6700\\u5B89\\u5168\\u7684\\u65B9\\u5F0F\\u3002\\u6B64\\u65B9\\u6CD5\\u5141\\u8BB8\\u8DE8\\u6E90\\u901A\\u4FE1\\uFF0C\\u8FD9\\u5BF9\\u4E8E\\u73B0\\u4EE3 Web \\u5E94\\u7528\\u7A0B\\u5E8F\\u81F3\\u5173\\u91CD\\u8981\\u3002\"]}),`\n`,(0,n.jsx)(e.h4,{children:\"\\u53D1\\u9001\\u6D88\\u606F\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8981\\u5C06\\u6D88\\u606F\\u4ECE\\u7236\\u9875\\u9762\\u53D1\\u9001\\u5230 iframe\\uFF0C\\u60A8\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"postMessage\"}),\" \\u65B9\\u6CD5\\u3002\\u8FD9\\u662F\\u4E00\\u4E2A\\u4F8B\\u5B50\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// \\u5728\\u7236\\u9875\\u9762\\u4E2D\nconst iframe = document.querySelector('iframe');\niframe.contentWindow.postMessage('Hello from parent', '*');\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5728\\u6B64\\u793A\\u4F8B\\u4E2D\\uFF0C\\u7236\\u9875\\u9762\\u9009\\u62E9 iframe \\u5E76\\u5411\\u5176\\u53D1\\u9001\\u6D88\\u606F\\u3002\\u7B2C\\u4E8C\\u4E2A\\u53C2\\u6570 \",(0,n.jsx)(e.code,{children:\"'*'\"}),\" \\u662F\\u76EE\\u6807 origin\\u3002\\u5B83\\u6307\\u5B9A\\u76EE\\u6807\\u7A97\\u53E3\\u7684 origin\\u3002\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"'*'\"}),\" \\u610F\\u5473\\u7740\\u4EFB\\u4F55 origin \\u90FD\\u53EF\\u4EE5\\u63A5\\u6536\\u6D88\\u606F\\uFF0C\\u4F46\\u51FA\\u4E8E\\u5B89\\u5168\\u539F\\u56E0\\uFF0C\\u6700\\u597D\\u6307\\u5B9A\\u786E\\u5207\\u7684 origin\\u3002\"]}),`\n`,(0,n.jsx)(e.h4,{children:\"\\u63A5\\u6536\\u6D88\\u606F\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8981\\u5728 iframe \\u4E2D\\u63A5\\u6536\\u6D88\\u606F\\uFF0C\\u60A8\\u9700\\u8981\\u4E3A \",(0,n.jsx)(e.code,{children:\"message\"}),\" \\u4E8B\\u4EF6\\u6DFB\\u52A0\\u4E00\\u4E2A\\u4E8B\\u4EF6\\u4FA6\\u542C\\u5668\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// \\u5728 iframe \\u4E2D\nwindow.addEventListener('message', (event) => {\n  console.log(event.data); // 'Hello from parent'\n});\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"event\"}),\" \\u5BF9\\u8C61\\u5305\\u542B \",(0,n.jsx)(e.code,{children:\"data\"}),\" \\u5C5E\\u6027\\uFF0C\\u8BE5\\u5C5E\\u6027\\u4FDD\\u5B58\\u7236\\u9875\\u9762\\u53D1\\u9001\\u7684\\u6D88\\u606F\\u3002\"]}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u5B89\\u5168\\u6CE8\\u610F\\u4E8B\\u9879\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"postMessage\"}),\" \\u65F6\\uFF0C\\u8003\\u8651\\u5B89\\u5168\\u6027\\u81F3\\u5173\\u91CD\\u8981\\uFF1A\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u6307\\u5B9A\\u76EE\\u6807 origin\"}),\"\\uFF1A\\u4E0D\\u8981\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"'*'\"}),\"\\uFF0C\\u800C\\u662F\\u6307\\u5B9A\\u786E\\u5207\\u7684 origin\\uFF0C\\u4EE5\\u786E\\u4FDD\\u4EC5\\u63A5\\u6536\\u6765\\u81EA\\u53D7\\u4FE1\\u4EFB\\u6765\\u6E90\\u7684\\u6D88\\u606F\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u9A8C\\u8BC1\\u6D88\\u606F\"}),\"\\uFF1A\\u59CB\\u7EC8\\u9A8C\\u8BC1\\u6D88\\u606F\\u5185\\u5BB9\\uFF0C\\u4EE5\\u9632\\u6B62\\u5904\\u7406\\u6076\\u610F\\u6570\\u636E\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u5E26\\u6709\\u76EE\\u6807 origin \\u7684\\u793A\\u4F8B\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8FD9\\u662F\\u4E00\\u4E2A\\u5E26\\u6709\\u6307\\u5B9A\\u76EE\\u6807\\u6765\\u6E90\\u7684\\u793A\\u4F8B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// In the parent page\nconst iframe = document.querySelector('iframe');\nconst targetOrigin = 'https://example.com';\niframe.contentWindow.postMessage('Hello from parent', targetOrigin);\n\n// In the iframe\nwindow.addEventListener('message', (event) => {\n  if (event.origin === 'https://parent.com') {\n    console.log(event.data); // 'Hello from parent'\n  }\n});\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5728\\u6B64\\u793A\\u4F8B\\u4E2D\\uFF0C\\u7236\\u9875\\u9762\\u4EC5\\u5411 \",(0,n.jsx)(e.code,{children:\"https://example.com\"}),\" \\u53D1\\u9001\\u6D88\\u606F\\uFF0C\\u5E76\\u4E14 iframe \\u4EC5\\u5728\\u6D88\\u606F\\u6765\\u81EA \",(0,n.jsx)(e.code,{children:\"https://parent.com\"}),\" \\u65F6\\u624D\\u5904\\u7406\\u8BE5\\u6D88\\u606F\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u5EF6\\u4F38\\u9605\\u8BFB\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage\",children:\"MDN Web Docs: Window.postMessage()\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://html.spec.whatwg.org/multipage/web-messaging.html#dom-window-postmessage\",children:\"HTML Living Standard: postMessage\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage#cross-document_messaging\",children:\"\\u8DE8\\u6587\\u6863\\u6D88\\u606F\\u4F20\\u9012\"})}),`\n`]})]})}function h(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(a,{...r})}):a(r)}return x(j);})();\n;return Component;"
}
{
  "description": "var Component=(()=>{var h=Object.create;var t=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var j=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),x=(o,e)=>{for(var c in e)t(o,c,{get:e[c],enumerable:!0})},s=(o,e,c,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of p(e))!u.call(o,l)&&l!==c&&t(o,l,{get:()=>e[l],enumerable:!(r=g(e,l))||r.enumerable});return o};var y=(o,e,c)=>(c=o!=null?h(m(o)):{},s(e||!o||!o.__esModule?t(c,\"default\",{value:o,enumerable:!0}):c,o)),_=o=>s(t({},\"__esModule\",{value:!0}),o);var a=j((J,i)=>{i.exports=_jsx_runtime});var v={};x(v,{default:()=>H,frontmatter:()=>f});var n=y(a()),f={title:\"Sleep\",excerpt:\"\\u5B9E\\u73B0\\u4E00\\u4E2A\\u5728\\u6062\\u590D\\u6267\\u884C\\u4E4B\\u524D\\u6682\\u505C\\u6307\\u5B9A\\u65F6\\u957F\\u7684\\u51FD\\u6570\"};function d(o){let e=Object.assign({p:\"p\",code:\"code\",pre:\"pre\",strong:\"strong\",h2:\"h2\"},o.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"\\u5728 JavaScript \\u4E2D\\uFF0C\",(0,n.jsx)(e.code,{children:\"setTimeout\"}),\" \\u51FD\\u6570\\u53EF\\u7528\\u4E8E\\u5728\\u5EF6\\u8FDF\\u540E\\u6267\\u884C\\u56DE\\u8C03\\u3002\\u4F46\\u662F\\uFF0C\\u5B83\\u4F1A\\u5728\\u4EE3\\u7801\\u4E2D\\u5F15\\u5165\\u4E00\\u5C42\\u5D4C\\u5957\\uFF0C\\u8FD9\\u53EF\\u80FD\\u4E0D\\u662F\\u6211\\u4EEC\\u60F3\\u8981\\u7684\\u3002\\u5982\\u679C\\u80FD\\u4EE5\\u8FD9\\u79CD\\u65B9\\u5F0F\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"setTimeout\"}),\" \\u5C31\\u597D\\u4E86\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// \\u6CE8\\u610F\\uFF1A\\u4EE5\\u4E0B\\u4EE3\\u7801\\u5305\\u542B\\u65E0\\u6548\\u8BED\\u6CD5\\uFF0C\\u65E0\\u6CD5\\u8FD0\\u884C\\u3002\nconsole.log('Hello!');\nsetTimeout(1000);\nconsole.log('Bye.');\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5728 Java \\u548C Python \\u7B49\\u8BED\\u8A00\\u4E2D\\uFF0C\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"sleep\"}),\" \\u51FD\\u6570\\u6765\\u6682\\u505C\\u8C03\\u7528\\u7EBF\\u7A0B\\u7684\\u6267\\u884C\\u3002\\u4F46\\u662F\\uFF0C\\u4E0E\\u5176\\u4ED6\\u8BED\\u8A00\\u4E0D\\u540C\\u7684\\u662F\\uFF0CJavaScript \\u662F\\u5355\\u7EBF\\u7A0B\\u7684\\uFF0C\\u963B\\u585E\\u4E3B\\u7EBF\\u7A0B\\u4E0D\\u662F\\u4E00\\u4E2A\\u597D\\u4E3B\\u610F\\u3002\\u56E0\\u6B64\\uFF0C\\u8BA9\\u6211\\u4EEC\\u5B9E\\u73B0\\u4E00\\u4E2A \",(0,n.jsx)(e.code,{children:\"sleep\"}),\" \\u51FD\\u6570\\u7684\",(0,n.jsx)(e.strong,{children:\"\\u5F02\\u6B65\"}),\"\\u7248\\u672C\\uFF0C\\u5B83\\u7684\\u5DE5\\u4F5C\\u65B9\\u5F0F\\u7C7B\\u4F3C\\uFF0C\\u4F46\\u4E0D\\u4F1A\\u963B\\u585E\\u4E3B\\u7EBF\\u7A0B\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u4F8B\\u5B50\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`async function greeting() {\n  console.log('Hello!');\n  await sleep(2000);\n  console.log('Bye.'); // \\u4EC5\\u5728 2000 \\u6BEB\\u79D2\\uFF082 \\u79D2\\uFF09\\u540E\\u8BB0\\u5F55\n}\n\ngreeting();\n// t = 0: Hello!\n// t = 2000: Bye.\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"sleep\"}),\" \\u51FD\\u6570\\u4E5F\\u5E94\\u8BE5\\u80FD\\u591F\\u5728\\u6CA1\\u6709 \",(0,n.jsx)(e.code,{children:\"await\"}),\" \\u7684\\u60C5\\u51B5\\u4E0B\\u4F7F\\u7528\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`console.log('Hello!');\nsleep(2000).then(() => {\n  console.log('Bye.'); // \\u4EC5\\u5728 2000 \\u6BEB\\u79D2\\uFF082 \\u79D2\\uFF09\\u540E\\u8BB0\\u5F55\n});\n`})})]})}function B(o={}){let{wrapper:e}=o.components||{};return e?(0,n.jsx)(e,Object.assign({},o,{children:(0,n.jsx)(d,o)})):d(o)}var H=B;return _(v);})();\n;return Component;",
  "files": {
    "/package.json": "{\n  \"name\": \"@gfe-questions/sleep\",\n  \"version\": \"0.0.1\",\n  \"main\": \"/src/sleep.ts\",\n  \"devDependencies\": {\n    \"@types/jest\": \"29.5.0\",\n    \"typescript\": \"5.0.2\"\n  }\n}\n",
    "/tsconfig.json": "{\n  \"include\": [\"./**/*\"],\n  \"compilerOptions\": {\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"lib\": [\"dom\", \"dom.iterable\", \"esnext\"],\n    \"jsx\": \"react-jsx\",\n    \"target\": \"es2020\"\n  }\n}\n",
    "/src/sleep.run.test.ts": "import sleep from './sleep';\n\ndescribe('sleep', () => {\n  test('returns a promise', () => {\n    const sleepPromise = sleep(1);\n    expect(sleepPromise instanceof Promise).toBe(true);\n  });\n\n  test('executes after delay', async () => {\n    expect.assertions(4);\n    let i = 0;\n    expect(i).toBe(0);\n    let now = Date.now();\n    await sleep(50);\n    expect(i).toBe(0);\n    i++;\n    expect(i).toBe(1);\n    expect(Date.now() - now).toBeGreaterThan(25);\n  });\n\n  test('does not block other async operations', (done) => {\n    expect.assertions(4);\n    let i = 0;\n    expect(i).toBe(0);\n    sleep(50).then(() => {\n      i++;\n      expect(i).toBe(3);\n      done();\n    });\n    setTimeout(() => {\n      i++;\n      expect(i).toBe(2);\n    }, 25);\n    i++;\n    expect(i).toBe(1);\n  });\n});\n",
    "/src/sleep.submit.test.ts": "import sleep from './sleep';\n\ndescribe('sleep', () => {\n  test('returns a promise', () => {\n    const sleepPromise = sleep(1);\n    expect(sleepPromise instanceof Promise).toBe(true);\n  });\n\n  describe('executes after delay', () => {\n    test('with await', async () => {\n      expect.assertions(4);\n      let i = 0;\n      expect(i).toBe(0);\n      let now = Date.now();\n      await sleep(50);\n      expect(i).toBe(0);\n      i++;\n      expect(i).toBe(1);\n      expect(Date.now() - now).toBeGreaterThan(25);\n    });\n\n    test('delay of 0', (done) => {\n      expect.assertions(3);\n      let i = 0;\n      expect(i).toBe(0);\n      sleep(0).then(() => {\n        i++;\n        expect(i).toBe(2);\n        done();\n      });\n      i++;\n      expect(i).toBe(1);\n    });\n\n    test('delay bigger than 0', (done) => {\n      expect.assertions(3);\n      let i = 0;\n      expect(i).toBe(0);\n      sleep(50).then(() => {\n        i++;\n        expect(i).toBe(2);\n        done();\n      });\n      i++;\n      expect(i).toBe(1);\n    });\n\n    test('does not block other async operations', (done) => {\n      expect.assertions(4);\n      let i = 0;\n      expect(i).toBe(0);\n      sleep(50).then(() => {\n        i++;\n        expect(i).toBe(3);\n        done();\n      });\n      setTimeout(() => {\n        i++;\n        expect(i).toBe(2);\n      }, 25);\n      i++;\n      expect(i).toBe(1);\n    });\n  });\n});\n",
    "/src/sleep.ts": "export default async function sleep(duration: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, duration));\n}\n"
  },
  "info": {
    "excerpt": "实现一个在恢复执行之前暂停指定时长的函数",
    "title": "Sleep"
  },
  "metadata": {
    "access": "premium",
    "author": null,
    "companies": [],
    "created": 1683331200,
    "difficulty": "easy",
    "duration": 5,
    "featured": false,
    "format": "javascript",
    "frameworkDefault": null,
    "frameworks": [],
    "href": "/questions/javascript/sleep",
    "importance": "low",
    "languages": [
      "js",
      "ts"
    ],
    "nextQuestions": [],
    "published": true,
    "ranking": 100,
    "similarQuestions": [],
    "slug": "sleep",
    "subtitle": null,
    "topics": [
      "async"
    ]
  },
  "skeleton": {
    "js": "/**\n * @param {number} duration\n * @return {Promise<void>}\n */\nexport default async function sleep(duration) {\n  throw 'Not implemented';\n}",
    "ts": "export default async function sleep(duration: number): Promise<void> {\n  throw 'Not implemented';\n}"
  },
  "solution": "var Component=(()=>{var m=Object.create;var r=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var x=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),j=(i,e)=>{for(var o in e)r(i,o,{get:e[o],enumerable:!0})},t=(i,e,o,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of T(e))!k.call(i,l)&&l!==o&&r(i,l,{get:()=>e[l],enumerable:!(c=g(e,l))||c.enumerable});return i};var v=(i,e,o)=>(o=i!=null?m(f(i)):{},t(e||!i||!i.__esModule?r(o,\"default\",{value:i,enumerable:!0}):o,i)),w=i=>t(r({},\"__esModule\",{value:!0}),i);var s=x((C,d)=>{d.exports=_jsx_runtime});var D={};j(D,{default:()=>B});var n=v(s());var a=MDXCodeBlock;var h=`/**\n * @param {number} duration\n * @return {Promise<void>}\n */\nexport default async function sleep(duration) {\n  return new Promise((resolve) => setTimeout(resolve, duration));\n}\n`;var u=`export default async function sleep(duration: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, duration));\n}\n`;function p(i){let e=Object.assign({h2:\"h2\",h3:\"h3\",code:\"code\",ol:\"ol\",li:\"li\",p:\"p\",pre:\"pre\",ul:\"ul\",a:\"a\"},i.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"\\u89E3\\u51B3\\u65B9\\u6848\"}),`\n`,(0,n.jsxs)(e.h3,{children:[\"\\u65B9\\u6CD5 1\\uFF1A\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"setTimeout\"}),\" \\u7684\\u975E\\u963B\\u585E\\u65B9\\u5F0F\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"sleep \\u51FD\\u6570\\u63A5\\u53D7\\u4E00\\u4E2A \",(0,n.jsx)(e.code,{children:\"duration\"}),\" \\u53C2\\u6570\\uFF0C\\u8868\\u793A\\u5E94\\u6682\\u505C\\u6267\\u884C\\u7684\\u6BEB\\u79D2\\u6570\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u5B83\\u8FD4\\u56DE\\u4E00\\u4E2A \",(0,n.jsx)(e.code,{children:\"Promise\"}),\"\\uFF0C\\u8BE5 Promise \\u5C06\\u5728\\u6307\\u5B9A\\u7684 \",(0,n.jsx)(e.code,{children:\"duration\"}),\" \\u4E4B\\u540E\\u89E3\\u6790\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u5728 \",(0,n.jsx)(e.code,{children:\"Promise\"}),\" \\u6784\\u9020\\u51FD\\u6570\\u4E2D\\uFF0C\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"setTimeout\"}),\" \\u5EF6\\u8FDF \",(0,n.jsx)(e.code,{children:\"resolve\"}),\" \\u51FD\\u6570\\u7684\\u6267\\u884C\\uFF0C\\u4ECE\\u800C\\u6709\\u6548\\u5730\\u6682\\u505C\\u6267\\u884C\\u6307\\u5B9A\\u7684\\u65F6\\u95F4\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(a,{languages:{jsx:h,tsx:u}}),`\n`,(0,n.jsxs)(e.h3,{children:[\"\\u65B9\\u6CD5 2\\uFF1A\",(0,n.jsx)(e.code,{children:\"sleep()\"}),\" \\u7684\\u963B\\u585E\\u7248\\u672C\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u53EF\\u4EE5\\u8FD9\\u6837\\u5B9E\\u73B0 \",(0,n.jsx)(e.code,{children:\"sleep\"}),\" \\u7684\\u540C\\u6B65\\u963B\\u585E\\u51FD\\u6570\\uFF0C\\u5176\\u4E2D CPU \\u9664\\u4E86\\u91CD\\u590D\\u68C0\\u67E5\\u81EA\\u51FD\\u6570\\u5F00\\u59CB\\u8FD0\\u884C\\u4EE5\\u6765 \",(0,n.jsx)(e.code,{children:\"duration\"}),\" \\u662F\\u5426\\u5DF2\\u8FC7\\u4E4B\\u5916\\uFF0C\\u4EC0\\u4E48\\u4E5F\\u4E0D\\u505A\\u3002\\u56E0\\u6B64\\uFF0C\\u5B83\\u5C06\\u6682\\u505C\\u4E3B\\u7EBF\\u7A0B\\u4E0A\\u7684\\u6240\\u6709\\u6267\\u884C\\uFF0C\\u901A\\u5E38\\u4E0D\\u5E0C\\u671B\\u8FD9\\u6837\\u505A\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`function sleep(duration) {\n  let now = new Date().getTime();\n  while (new Date().getTime() < now + duration) {\n    // \\u4EC0\\u4E48\\u4E5F\\u4E0D\\u505A\\u3002\n  }\n  // \\u5F53 \\`duration\\` \\u81EA \\`now\\` \\u4EE5\\u6765\\u5DF2\\u8FC7\\u65F6\\uFF0C\\u7EE7\\u7EED\\u3002\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u91CC\\u6709\\u4E00\\u4E2A\\u4F8B\\u5B50\\u6765\\u8BF4\\u660E \",(0,n.jsx)(e.code,{children:\"sleep\"}),\" \\u7684\\u4E24\\u4E2A\\u7248\\u672C\\u4E4B\\u95F4\\u7684\\u533A\\u522B\\uFF1A\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5F02\\u6B65 \",(0,n.jsx)(e.code,{children:\"sleep\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`async function greeting() {\n  console.log('Hello!');\n  await sleep(2000);\n  console.log('Bye.');\n}\n\nsetInterval(() => {\n  console.log('Tick');\n}, 500);\n\ngreeting();\n// t = 0: Hello!\n// t = 500: Tick\n// t = 1000: Tick\n// t = 1500: Tick\n// t = 2000: Tick\n// t = 2000: Bye.\n// t = 2500: Tick\n// t = 3000: Tick\n// ...\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u540C\\u6B65/\\u963B\\u585E \",(0,n.jsx)(e.code,{children:\"sleep\"}),\"\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`async function greeting() {\n  console.log('Hello!');\n  sleep(2000);\n  console.log('Bye.');\n}\n\nsetInterval(() => {\n  console.log('Tick');\n}, 500);\n\ngreeting();\n// t = 0: Hello!\n// t = 2000: Bye.\n// t = 2000: Tick\n// t = 2500: Tick\n// t = 3000: Tick\n// ...\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8BF7\\u6CE8\\u610F\\uFF0C\\u5728\\u6B64\\u793A\\u4F8B\\u4E2D\\uFF0C\\u4EC5\\u6253\\u5370\\u7B2C\\u4E00\\u4E2A\\u201CTick\\u201D\\uFF0C\\u56E0\\u4E3A \",(0,n.jsx)(e.code,{children:\"sleep()\"}),\" \\u51FD\\u6570\\u4E00\\u76F4\\u5728\\u6267\\u884C\\uFF08\\u68C0\\u67E5 \",(0,n.jsx)(e.code,{children:\"while\"}),\" \\u6761\\u4EF6\\u7684\\u6574\\u4E2A\\u6301\\u7EED\\u65F6\\u95F4\\uFF09\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u8D44\\u6E90\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://builtin.com/software-engineering-perspectives/javascript-sleep\",children:\"\\u5982\\u4F55\\u8BA9 JavaScript \\u7761\\u7720\\u6216\\u7B49\\u5F85\"})}),`\n`]})]})}function _(i={}){let{wrapper:e}=i.components||{};return e?(0,n.jsx)(e,Object.assign({},i,{children:(0,n.jsx)(p,i)})):p(i)}var B=_;return w(D);})();\n;return Component;",
  "workspace": {
    "main": "/src/sleep.ts",
    "run": "/src/sleep.run.test.ts",
    "submit": "/src/sleep.submit.test.ts"
  }
}
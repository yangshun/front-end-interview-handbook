{
  "files": {
    "/package.json": "{\n  \"name\": \"@gfe-questions/json-stringify-ii\",\n  \"version\": \"0.0.1\",\n  \"main\": \"/src/json-stringify-ii.ts\",\n  \"devDependencies\": {\n    \"@types/jest\": \"29.5.0\",\n    \"typescript\": \"5.0.2\"\n  }\n}\n",
    "/tsconfig.json": "{\n  \"include\": [\"./**/*\"],\n  \"compilerOptions\": {\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"lib\": [\"dom\", \"dom.iterable\", \"esnext\"],\n    \"jsx\": \"react-jsx\",\n    \"target\": \"es2020\"\n  }\n}\n",
    "/src/json-stringify-ii.run.test.ts": "import jsonStringify from './json-stringify-ii';\n\ndescribe('jsonStringify', () => {\n  test('strings', () => {\n    expect(jsonStringify('123')).toEqual('\"123\"');\n  });\n\n  test('array', () => {\n    expect(jsonStringify([1, 2, 3])).toEqual('[1,2,3]');\n  });\n\n  test('object', () => {\n    expect(jsonStringify({ name: 'John', age: 30 })).toEqual(\n      '{\"name\":\"John\",\"age\":30}',\n    );\n  });\n});\n",
    "/src/json-stringify-ii.submit.test.ts": "import jsonStringify from './json-stringify-ii';\n\ndescribe('jsonStringify', () => {\n  describe('primitives', () => {\n    test('undefined', () => {\n      expect(jsonStringify(undefined)).toEqual(undefined);\n    });\n\n    test('null', () => {\n      expect(jsonStringify(null)).toEqual('null');\n    });\n\n    test('boolean', () => {\n      expect(jsonStringify(true)).toEqual('true');\n      expect(jsonStringify(false)).toEqual('false');\n    });\n\n    test('numbers', () => {\n      expect(jsonStringify(1)).toEqual('1');\n      expect(jsonStringify(-1)).toEqual('-1');\n    });\n\n    test('strings', () => {\n      expect(jsonStringify('123')).toEqual('\"123\"');\n      expect(jsonStringify('foo')).toEqual('\"foo\"');\n      expect(jsonStringify('\"foo\"')).toEqual('\"\\\\\"foo\\\\\"\"');\n    });\n  });\n\n  describe('special values', () => {\n    test('NaN', () => {\n      expect(jsonStringify(NaN)).toEqual('null');\n    });\n\n    test('infinity', () => {\n      expect(jsonStringify(Infinity)).toEqual('null');\n    });\n\n    test('symbol', () => {\n      expect(jsonStringify(Symbol('foo'))).toEqual(undefined);\n    });\n\n    test('functions', () => {\n      expect(jsonStringify(() => {})).toEqual(undefined);\n      expect(jsonStringify(function () {})).toEqual(undefined);\n    });\n\n    test('regexp', () => {\n      expect(jsonStringify(/foo/)).toEqual('{}');\n    });\n\n    test('map', () => {\n      expect(jsonStringify(new Map())).toEqual('{}');\n    });\n\n    test('set', () => {\n      expect(jsonStringify(new Set())).toEqual('{}');\n    });\n\n    test('date', () => {\n      const date = new Date();\n      expect(jsonStringify(date)).toEqual(`\"${date.toISOString()}\"`);\n    });\n\n    test('BigInt throws', () => {\n      expect(() => jsonStringify(BigInt(1234567890))).toThrow();\n    });\n  });\n\n  describe('arrays', () => {\n    test('empty', () => {\n      expect(jsonStringify([])).toEqual('[]');\n    });\n\n    test('non-nested', () => {\n      expect(jsonStringify([1, 2, 3])).toEqual('[1,2,3]');\n      expect(jsonStringify([true, false])).toEqual('[true,false]');\n      expect(jsonStringify(['1', '2', '3'])).toEqual('[\"1\",\"2\",\"3\"]');\n      expect(jsonStringify([{}, {}])).toEqual('[{},{}]');\n      expect(jsonStringify([null, null])).toEqual('[null,null]');\n    });\n\n    test('nested', () => {\n      expect(jsonStringify([[]])).toEqual('[[]]');\n      expect(jsonStringify([[[]]])).toEqual('[[[]]]');\n      expect(jsonStringify([[], []])).toEqual('[[],[]]');\n      expect(jsonStringify([[1], [2]])).toEqual('[[1],[2]]');\n      expect(jsonStringify([1, [2, [3, [4, []]]]])).toEqual(\n        '[1,[2,[3,[4,[]]]]]',\n      );\n      expect(jsonStringify([1, 2, [3, 4, [5, 6], 7, 8]])).toEqual(\n        '[1,2,[3,4,[5,6],7,8]]',\n      );\n    });\n\n    test('mixed', () => {\n      expect(\n        jsonStringify([\n          42,\n          'Hello, World!',\n          true,\n          null,\n          { name: 'John', age: 30 },\n          [1, 2, 3],\n        ]),\n      ).toEqual(\n        '[42,\"Hello, World!\",true,null,{\"name\":\"John\",\"age\":30},[1,2,3]]',\n      );\n    });\n  });\n\n  describe('objects', () => {\n    test('empty', () => {\n      expect(jsonStringify({})).toEqual('{}');\n    });\n\n    test('non-nested', () => {\n      expect(jsonStringify({ foo: 1 })).toEqual('{\"foo\":1}');\n      expect(jsonStringify({ foo: true })).toEqual('{\"foo\":true}');\n      expect(jsonStringify({ foo: false })).toEqual('{\"foo\":false}');\n      expect(jsonStringify({ foo: 'bar' })).toEqual('{\"foo\":\"bar\"}');\n      expect(jsonStringify({ foo: [] })).toEqual('{\"foo\":[]}');\n      expect(jsonStringify({ foo: null })).toEqual('{\"foo\":null}');\n    });\n\n    test('nested', () => {\n      expect(jsonStringify({ foo: { foo: true } })).toEqual(\n        '{\"foo\":{\"foo\":true}}',\n      );\n      expect(jsonStringify({ foo: true, bar: { foo: 2 } })).toEqual(\n        '{\"foo\":true,\"bar\":{\"foo\":2}}',\n      );\n    });\n\n    test('mixed', () => {\n      expect(\n        jsonStringify({\n          name: 'foo',\n          age: 18,\n          attr: ['coding', 123],\n        }),\n      ).toEqual('{\"name\":\"foo\",\"age\":18,\"attr\":[\"coding\",123]}');\n    });\n\n    test('JSON-incompatible values', () => {\n      expect(jsonStringify([1, 2, 3])).toEqual('[1,2,3]');\n      expect(\n        jsonStringify({\n          name: 'foo',\n          age: 18,\n          attr: ['coding', 123],\n          uni: Symbol(2),\n          sayHi: function () {\n            console.log('hi');\n          },\n          info: {\n            sister: 'lily',\n            age: 16,\n            intro: {\n              money: undefined,\n              job: null,\n            },\n          },\n        }),\n      ).toEqual(\n        '{\"name\":\"foo\",\"age\":18,\"attr\":[\"coding\",123],\"info\":{\"sister\":\"lily\",\"age\":16,\"intro\":{\"job\":null}}}',\n      );\n    });\n  });\n\n  test('cyclic objects', () => {\n    const foo: any = {};\n    foo.a = foo;\n\n    expect(() => {\n      jsonStringify(foo);\n    }).toThrow('Converting circular structure to JSON');\n  });\n});\n",
    "/src/json-stringify-ii.ts": "function isCyclic(input: unknown): boolean {\n  const seen = new Set();\n\n  function dfsHelper(value: unknown): boolean {\n    if (typeof value !== 'object' || value === null) {\n      return false;\n    }\n\n    seen.add(value);\n    return Object.values(value).some(\n      (value_) => seen.has(value_) || dfsHelper(value_),\n    );\n  }\n\n  return dfsHelper(input);\n}\n\nconst QUOTE_ESCAPE = /\"/g;\n\nexport default function jsonStringify(value: unknown): string | undefined {\n  if (isCyclic(value)) {\n    throw new TypeError('Converting circular structure to JSON');\n  }\n\n  if (typeof value === 'bigint') {\n    throw new TypeError('Do not know how to serialize a BigInt');\n  }\n\n  if (value === null) {\n    // Handle null first because the type of null is 'object'.\n    return 'null';\n  }\n\n  const type = typeof value;\n\n  if (type === 'number') {\n    if (Number.isNaN(value) || !Number.isFinite(value)) {\n      // For NaN and Infinity we return 'null'.\n      return 'null';\n    }\n    return String(value);\n  }\n\n  if (type === 'boolean') {\n    return String(value);\n  }\n\n  if (type === 'function' || type === 'undefined' || type === 'symbol') {\n    return undefined; // Not the string 'undefined'.\n  }\n\n  if (type === 'string') {\n    // Wrap in double quotes/\n    return `\"${(value as string).replace(QUOTE_ESCAPE, '\\\\\"')}\"`;\n  }\n\n  // At this point `value` is either an array, a plain object,\n  // or other unsupported object types such as `Map` and `Set`.\n  if (typeof (value as any).toJSON === 'function') {\n    // If value has user-provided `toJSON` method, we use that instead.\n    return jsonStringify((value as any).toJSON());\n  }\n\n  if (Array.isArray(value)) {\n    const arrayValues = value.map((item) => jsonStringify(item));\n    return `[${arrayValues.join(',')}]`;\n  }\n\n  // `value` is a plain object.\n  const objectEntries = Object.entries(value as Object)\n    .map(([key, value]) => {\n      const shouldIgnoreEntry =\n        typeof key === 'symbol' ||\n        value === undefined ||\n        typeof value === 'function' ||\n        typeof value === 'symbol';\n\n      if (shouldIgnoreEntry) {\n        return;\n      }\n\n      return `\"${key}\":${jsonStringify(value)}`;\n    })\n    .filter((value) => value !== undefined);\n\n  return `{${objectEntries.join(',')}}`;\n}\n"
  },
  "skeleton": {
    "js": "/**\n * @param {*} value\n * @return {string}\n */\nexport default function jsonStringify(value) {\n  throw 'Not implemented!';\n}",
    "ts": "export default function jsonStringify(value: unknown): string {\n  throw 'Not implemented!';\n}"
  },
  "workspace": {
    "main": "/src/json-stringify-ii.ts",
    "run": "/src/json-stringify-ii.run.test.ts",
    "submit": "/src/json-stringify-ii.submit.test.ts"
  }
}
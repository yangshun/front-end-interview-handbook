{
  "description": "var Component=(()=>{var l=Object.create;var c=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),x=(n,e)=>{for(var o in e)c(n,o,{get:e[o],enumerable:!0})},a=(n,e,o,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of h(e))!m.call(n,r)&&r!==o&&c(n,r,{get:()=>e[r],enumerable:!(i=k(e,r))||i.enumerable});return n};var B=(n,e,o)=>(o=n!=null?l(u(n)):{},a(e||!n||!n.__esModule?c(o,\"default\",{value:n,enumerable:!0}):o,n)),g=n=>a(c({},\"__esModule\",{value:!0}),n);var d=b((C,p)=>{p.exports=_jsx_runtime});var H={};x(H,{default:()=>_,frontmatter:()=>j});var t=B(d()),j={title:\"useBreakpoint\",excerpt:\"\\u5B9E\\u73B0\\u4E00\\u4E2A\\u57FA\\u4E8E\\u5F53\\u524D\\u7A97\\u53E3\\u5BBD\\u5EA6\\u8FD4\\u56DE\\u5F53\\u524D\\u65AD\\u70B9\\u540D\\u79F0\\u7684 Hook\"};function s(n){let e=Object.assign({p:\"p\",code:\"code\",pre:\"pre\",h2:\"h2\"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[\"\\u5B9E\\u73B0\\u4E00\\u4E2A \",(0,t.jsx)(e.code,{children:\"createBreakpoint\"}),\" \\u51FD\\u6570\\uFF0C\\u8BE5\\u51FD\\u6570\\u63A5\\u53D7\\u4E00\\u4E2A\\u5BF9\\u8C61\\uFF08\\u5176\\u4E2D\\u952E\\u662F\\u65AD\\u70B9\\u540D\\u79F0\\uFF0C\\u503C\\u662F\\u6700\\u5C0F\\u5BBD\\u5EA6\\uFF09\\uFF0C\\u5E76\\u8FD4\\u56DE\\u4E00\\u4E2A \",(0,t.jsx)(e.code,{children:\"useBreakpoint\"}),\" Hook\\uFF0C\\u8BE5 Hook \\u57FA\\u4E8E\\u5F53\\u524D\\u7A97\\u53E3\\u5BBD\\u5EA6\\u8FD4\\u56DE\\u5F53\\u524D\\u7684\\u65AD\\u70B9\\u540D\\u79F0\\u3002\"]}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:\"language-jsx\",children:`const useBreakpoint = createBreakpoint({\n  mobile: 0,\n  tablet: 768,\n  desktop: 1024,\n});\n\nexport default function Component() {\n  const breakpoint = useBreakpoint();\n\n  return (\n    <div>\n      {breakpoint === 'mobile' && <p>Mobile</p>}\n      {breakpoint === 'tablet' && <p>Tablet</p>}\n      {breakpoint === 'desktop' && <p>Desktop</p>}\n    </div>\n  );\n}\n`})}),`\n`,(0,t.jsx)(e.h2,{children:\"\\u53C2\\u6570\"}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:\"createBreakpoint\"}),\" \\u51FD\\u6570\\u63A5\\u53D7\\u4E00\\u4E2A\\u952E\\u503C\\u5BF9\\u5BF9\\u8C61\\uFF0C\\u5176\\u4E2D\\u952E\\u662F\\u65AD\\u70B9\\u540D\\u79F0\\uFF08\",(0,t.jsx)(e.code,{children:\"string\"}),\"\\uFF09\\uFF0C\\u503C\\u662F\\u65AD\\u70B9\\u7684\\u6700\\u5C0F\\u5BBD\\u5EA6\\uFF08\",(0,t.jsx)(e.code,{children:\"number\"}),\"\\uFF09\\uFF0C\\u4EE5\\u50CF\\u7D20\\u4E3A\\u5355\\u4F4D\\u3002\"]}),`\n`,(0,t.jsx)(e.h2,{children:\"\\u8FD4\\u56DE\\u503C\"}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:\"createBreakpoint\"}),\" \\u51FD\\u6570\\u8FD4\\u56DE\\u4E00\\u4E2A\\u51FD\\u6570\\uFF0C\\u8BE5\\u51FD\\u6570\\u662F\\u5B9E\\u9645\\u7684 \",(0,t.jsx)(e.code,{children:\"useBreakpoint\"}),\" Hook\\u3002\\u6B64 Hook \\u4E0D\\u63A5\\u53D7\\u4EFB\\u4F55\\u53C2\\u6570\\uFF0C\\u5E76\\u8FD4\\u56DE\\u6700\\u63A5\\u8FD1\\u5F53\\u524D\\u7A97\\u53E3\\u5BBD\\u5EA6\\u7684\\u5F53\\u524D\\u65AD\\u70B9\\u540D\\u79F0\\uFF08\",(0,t.jsx)(e.code,{children:\"string\"}),\"\\uFF09\\u3002\\u8C03\\u6574\\u7A97\\u53E3\\u5927\\u5C0F\\u5C06\\u5BFC\\u81F4 Hook \\u91CD\\u65B0\\u8FD0\\u884C\\uFF0C\\u5E76\\u53EF\\u80FD\\u6839\\u636E\\u7A97\\u53E3\\u5927\\u5C0F\\u8FD4\\u56DE\\u4E0D\\u540C\\u7684\\u503C\\u3002\"]})]})}function f(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(s,n)})):s(n)}var _=f;return g(H);})();\n;return Component;",
  "files": {
    "/package.json": "{\n  \"name\": \"@gfe-questions/use-breakpoint\",\n  \"version\": \"0.0.1\",\n  \"main\": \"/src/use-breakpoint.ts\",\n  \"dependencies\": {\n    \"@testing-library/react\": \"14.0.0\",\n    \"react\": \"18.2.0\",\n    \"react-dom\": \"18.2.0\"\n  },\n  \"devDependencies\": {\n    \"@types/jest\": \"29.5.0\",\n    \"@types/react\": \"18.2.25\",\n    \"@types/react-dom\": \"18.2.10\",\n    \"typescript\": \"5.0.2\"\n  }\n}\n",
    "/tsconfig.json": "{\n  \"include\": [\"./**/*\"],\n  \"compilerOptions\": {\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"lib\": [\"dom\", \"dom.iterable\", \"esnext\"],\n    \"jsx\": \"react-jsx\",\n    \"target\": \"es2020\"\n  }\n}\n",
    "/src/use-breakpoint.run.test.ts": "import { renderHook } from '@testing-library/react';\n\nimport createBreakpoint from './use-breakpoint';\n\nconst breakpoints = { sm: 40, lg: 64, xl: 80 };\n\nconst getCurrentBreakpoint = (width: number) =>\n  Object.entries(breakpoints).reduce(\n    (acc, [name, size]) => (width >= size ? name : acc),\n    'sm',\n  );\n\ndescribe('useBreakpoint', () => {\n  test('return values', () => {\n    const { result } = renderHook(() => createBreakpoint(breakpoints)());\n\n    expect(typeof result.current).toBe('string');\n  });\n\n  test('initial value', () => {\n    const { result } = renderHook(() => createBreakpoint(breakpoints)());\n\n    expect(result.current).toBe(getCurrentBreakpoint(window.innerWidth));\n  });\n});\n",
    "/src/use-breakpoint.submit.test.ts": "import { act, fireEvent, renderHook } from '@testing-library/react';\n\nimport createBreakpoint from './use-breakpoint';\n\nconst breakpoints = { sm: 40, lg: 64, xl: 80 };\n\nconst getCurrentBreakpoint = (width: number) =>\n  Object.entries(breakpoints).reduce(\n    (acc, [name, size]) => (width >= size ? name : acc),\n    'sm',\n  );\n\ndescribe('useBreakpoint', () => {\n  test('return values', () => {\n    const { result } = renderHook(() => createBreakpoint(breakpoints)());\n\n    expect(typeof result.current).toBe('string');\n  });\n\n  test('initial value', () => {\n    const { result } = renderHook(() => createBreakpoint(breakpoints)());\n\n    expect(result.current).toBe(getCurrentBreakpoint(window.innerWidth));\n  });\n\n  test('resize', () => {\n    const { result } = renderHook(() => createBreakpoint(breakpoints)());\n\n    act(() => {\n      window.innerWidth = 50;\n      fireEvent.resize(window);\n    });\n\n    expect(result.current).toBe(getCurrentBreakpoint(50));\n  });\n});\n",
    "/src/use-breakpoint.ts": "import { useEffect, useMemo, useState } from 'react';\n\nexport default function createBreakpoint<T extends Record<string, number>>(\n  breakpoints: T,\n): () => keyof T {\n  return function (): keyof T {\n    const [width, setWidth] = useState(window.innerWidth);\n\n    useEffect(() => {\n      function resize() {\n        setWidth(window.innerWidth);\n      }\n\n      resize();\n      window.addEventListener('resize', resize);\n\n      return () => {\n        window.removeEventListener('resize', resize);\n      };\n    }, []);\n\n    const sortedBreakpoints = useMemo(\n      () => Object.entries(breakpoints).sort((a, b) => a[1] - b[1]),\n      [breakpoints],\n    );\n\n    return useMemo(\n      () =>\n        sortedBreakpoints.reduce(\n          (acc, [name, size]) => (width >= size ? name : acc),\n          sortedBreakpoints[0][0],\n        ),\n      [sortedBreakpoints, width],\n    );\n  };\n}\n"
  },
  "metadata": {
    "access": "premium",
    "author": "phillmont",
    "companies": [],
    "created": 1742169600,
    "difficulty": "medium",
    "duration": 15,
    "excerpt": "实现一个基于当前窗口宽度返回当前断点名称的 Hook",
    "featured": false,
    "format": "javascript",
    "frameworkDefault": "react",
    "frameworks": [
      {
        "framework": "react",
        "href": "/questions/javascript/use-breakpoint"
      }
    ],
    "href": "/questions/javascript/use-breakpoint",
    "importance": "low",
    "languages": [
      "js",
      "ts"
    ],
    "nextQuestions": [],
    "published": true,
    "ranking": 100,
    "similarQuestions": [
      "use-media-query",
      "use-window-size"
    ],
    "slug": "use-breakpoint",
    "subtitle": null,
    "title": "useBreakpoint",
    "topics": [
      "react-hooks"
    ]
  },
  "skeleton": {
    "js": "/**\n * @param {Object<string, number>} breakpoints\n * @returns {string}\n */\nexport default function createBreakpoint(breakpoints) {\n  throw 'Not implemented';\n}",
    "ts": "export default function createBreakpoint<T extends Record<string, number>>(\n  breakpoints: T,\n): () => keyof T {\n  throw 'Not implemented';\n}"
  },
  "solution": "var Component=(()=>{var m=Object.create;var i=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var B=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),x=(t,e)=>{for(var r in e)i(t,r,{get:e[r],enumerable:!0})},c=(t,e,r,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of l(e))!w.call(t,o)&&o!==r&&i(t,o,{get:()=>e[o],enumerable:!(s=f(e,o))||s.enumerable});return t};var b=(t,e,r)=>(r=t!=null?m(k(t)):{},c(e||!t||!t.__esModule?i(r,\"default\",{value:t,enumerable:!0}):r,t)),j=t=>c(i({},\"__esModule\",{value:!0}),t);var a=B((T,d)=>{d.exports=_jsx_runtime});var g={};x(g,{default:()=>_});var n=b(a());var u=MDXCodeBlock;var p=`import { useEffect, useMemo, useState } from 'react';\n\nexport default function createBreakpoint<T extends Record<string, number>>(\n  breakpoints: T,\n): () => keyof T {\n  return function (): keyof T {\n    const [width, setWidth] = useState(window.innerWidth);\n\n    useEffect(() => {\n      function resize() {\n        setWidth(window.innerWidth);\n      }\n\n      resize();\n      window.addEventListener('resize', resize);\n\n      return () => {\n        window.removeEventListener('resize', resize);\n      };\n    }, []);\n\n    const sortedBreakpoints = useMemo(\n      () => Object.entries(breakpoints).sort((a, b) => a[1] - b[1]),\n      [breakpoints],\n    );\n\n    return useMemo(\n      () =>\n        sortedBreakpoints.reduce(\n          (acc, [name, size]) => (width >= size ? name : acc),\n          sortedBreakpoints[0][0],\n        ),\n      [sortedBreakpoints, width],\n    );\n  };\n}\n`;function h(t){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"\\u89E3\\u51B3\\u65B9\\u6848\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"useBreakpoint\"}),\" \\u94A9\\u5B50\\u53EF\\u4EE5\\u5728 \",(0,n.jsx)(e.code,{children:\"createBreakpoint\"}),\" \\u4E2D\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"useState\"}),\" \\u94A9\\u5B50\\u6765\\u5B9E\\u73B0\\uFF0C\\u4EE5\\u5B58\\u50A8\\u5F53\\u524D\\u7684\\u7A97\\u53E3\\u5BBD\\u5EA6\\uFF0C\\u5E76\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\" \\u94A9\\u5B50\\u5728\\u8C03\\u6574\\u7A97\\u53E3\\u5927\\u5C0F\\u65F6\\u66F4\\u65B0\\u5BBD\\u5EA6\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4E4B\\u540E\\uFF0C\\u6309\\u9012\\u589E\\u503C\\u5BF9\\u65AD\\u70B9\\u8FDB\\u884C\\u6392\\u5E8F\\uFF0C\\u7136\\u540E\\u641C\\u7D22\\u6700\\u5C0F\\u5BBD\\u5EA6\\u5C0F\\u4E8E\\u5F53\\u524D\\u7A97\\u53E3\\u5BBD\\u5EA6\\u7684\\u6700\\u540E\\u4E00\\u4E2A\\u65AD\\u70B9\\u3002\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5982\\u679C\\u60A8\\u4F7F\\u7528 TypeScript\\uFF0C\\u60A8\\u53EF\\u4EE5\\u4F7F \",(0,n.jsx)(e.code,{children:\"createBreakpoint\"}),\" \\u51FD\\u6570\\u6CDB\\u578B\\uFF0C\\u4EE5\\u4FBF\\u8FD4\\u56DE\\u7684 \",(0,n.jsx)(e.code,{children:\"useBreakpoint\"}),\" \\u7684\\u8FD4\\u56DE\\u7C7B\\u578B\\u4EC5\\u4E3A\\u7ED9\\u5B9A \",(0,n.jsx)(e.code,{children:\"breakpoints\"}),\" \\u5BF9\\u8C61\\u7684\\u952E\\u7684\\u5B57\\u7B26\\u4E32\\uFF0C\\u4ECE\\u800C\\u786E\\u4FDD\\u6700\\u5927\\u7684\\u7C7B\\u578B\\u5B89\\u5168\\u3002\"]}),`\n`,(0,n.jsx)(u,{children:p})]})}function M(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(h,t)})):h(t)}var _=M;return j(g);})();\n;return Component;",
  "workspace": {
    "main": "/src/use-breakpoint.ts",
    "run": "/src/use-breakpoint.run.test.ts",
    "submit": "/src/use-breakpoint.submit.test.ts"
  }
}
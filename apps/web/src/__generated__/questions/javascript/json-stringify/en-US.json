{
  "description": "var Component=(()=>{var d=Object.create;var a=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var m=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),S=(n,e)=>{for(var t in e)a(n,t,{get:e[t],enumerable:!0})},l=(n,e,t,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of p(e))!u.call(n,i)&&i!==t&&a(n,i,{get:()=>e[i],enumerable:!(o=h(e,i))||o.enumerable});return n};var b=(n,e,t)=>(t=n!=null?d(g(n)):{},l(e||!n||!n.__esModule?a(t,\"default\",{value:n,enumerable:!0}):t,n)),j=n=>l(a({},\"__esModule\",{value:!0}),n);var c=m((N,s)=>{s.exports=_jsx_runtime});var x={};S(x,{default:()=>v,frontmatter:()=>y});var r=b(c()),y={title:\"JSON.stringify\",excerpt:\"Implement a function that converts a JavaScript value into a JSON string\"};function f(n){let e=Object.assign({p:\"p\",code:\"code\",a:\"a\",ul:\"ul\",li:\"li\",h2:\"h2\",pre:\"pre\"},n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.p,{children:[\"Implement a function \",(0,r.jsx)(e.code,{children:\"jsonStringify\"}),\", similar to \",(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify\",children:(0,r.jsx)(e.code,{children:\"JSON.stringify\"})}),\" that converts a JavaScript value into a JSON string.\"]}),`\n`,(0,r.jsxs)(e.ul,{children:[`\n`,(0,r.jsxs)(e.li,{children:[\"Only JSON-serializable values (i.e. boolean, number, \",(0,r.jsx)(e.code,{children:\"null\"}),\", array, object) will be present in the input value.\"]}),`\n`,(0,r.jsxs)(e.li,{children:[\"Ignore the \",(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#parameters\",children:\"second and the third\"}),\" optional parameters in the original API.\"]}),`\n`]}),`\n`,(0,r.jsx)(e.h2,{children:\"Examples\"}),`\n`,(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:\"language-js\",children:`jsonStringify({ foo: 'bar' }); // '{\"foo\":\"bar\"}'\njsonStringify({ foo: 'bar', bar: [1, 2, 3] }); // '{\"foo\":\"bar\",\"bar\":[1,2,3]}'\njsonStringify({ foo: true, bar: false }); // '{\"foo\":true,\"bar\":false}'\n`})}),`\n`,(0,r.jsx)(e.p,{children:\"Other types\"}),`\n`,(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:\"language-js\",children:`jsonStringify(null); // 'null'\njsonStringify(true); // 'true'\njsonStringify(false); // 'false'\njsonStringify(1); // '1'\njsonStringify('foo'); // '\"foo\"'\n`})})]})}function O(n={}){let{wrapper:e}=n.components||{};return e?(0,r.jsx)(e,Object.assign({},n,{children:(0,r.jsx)(f,n)})):f(n)}var v=O;return j(x);})();\n;return Component;",
  "files": {
    "/package.json": "{\n  \"name\": \"@gfe-questions/json-stringify\",\n  \"version\": \"0.0.1\",\n  \"main\": \"/src/json-stringify.ts\",\n  \"devDependencies\": {\n    \"@types/jest\": \"29.5.0\",\n    \"typescript\": \"5.0.2\"\n  }\n}\n",
    "/tsconfig.json": "{\n  \"include\": [\"./**/*\"],\n  \"compilerOptions\": {\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"lib\": [\"dom\", \"esnext\"],\n    \"jsx\": \"react-jsx\"\n  }\n}\n",
    "/src/json-stringify.run.test.ts": "import jsonStringify from './json-stringify';\n\ndescribe('jsonStringify', () => {\n  test('strings', () => {\n    expect(jsonStringify('123')).toEqual('\"123\"');\n  });\n\n  test('array', () => {\n    expect(jsonStringify([1, 2, 3])).toEqual('[1,2,3]');\n  });\n\n  test('object', () => {\n    expect(jsonStringify({ name: 'John', age: 30 })).toEqual(\n      '{\"name\":\"John\",\"age\":30}',\n    );\n  });\n});\n",
    "/src/json-stringify.submit.test.ts": "import jsonStringify from './json-stringify';\n\ndescribe('jsonStringify', () => {\n  describe('primitives', () => {\n    test('null', () => {\n      expect(jsonStringify(null)).toEqual('null');\n    });\n\n    test('boolean', () => {\n      expect(jsonStringify(true)).toEqual('true');\n      expect(jsonStringify(false)).toEqual('false');\n    });\n\n    test('numbers', () => {\n      expect(jsonStringify(1)).toEqual('1');\n      expect(jsonStringify(-1)).toEqual('-1');\n    });\n\n    test('strings', () => {\n      expect(jsonStringify('123')).toEqual('\"123\"');\n      expect(jsonStringify('foo')).toEqual('\"foo\"');\n    });\n  });\n\n  describe('arrays', () => {\n    test('empty', () => {\n      expect(jsonStringify([])).toEqual('[]');\n    });\n\n    test('non-nested', () => {\n      expect(jsonStringify([1, 2, 3])).toEqual('[1,2,3]');\n      expect(jsonStringify([true, false])).toEqual('[true,false]');\n      expect(jsonStringify(['1', '2', '3'])).toEqual('[\"1\",\"2\",\"3\"]');\n      expect(jsonStringify([{}, {}])).toEqual('[{},{}]');\n      expect(jsonStringify([null, null])).toEqual('[null,null]');\n    });\n\n    test('nested', () => {\n      expect(jsonStringify([[]])).toEqual('[[]]');\n      expect(jsonStringify([[[]]])).toEqual('[[[]]]');\n      expect(jsonStringify([[], []])).toEqual('[[],[]]');\n      expect(jsonStringify([[1], [2]])).toEqual('[[1],[2]]');\n      expect(jsonStringify([1, [2, [3, [4, []]]]])).toEqual(\n        '[1,[2,[3,[4,[]]]]]',\n      );\n      expect(jsonStringify([1, 2, [3, 4, [5, 6], 7, 8]])).toEqual(\n        '[1,2,[3,4,[5,6],7,8]]',\n      );\n    });\n\n    test('mixed', () => {\n      expect(\n        jsonStringify([\n          42,\n          'Hello, World!',\n          true,\n          null,\n          { name: 'John', age: 30 },\n          [1, 2, 3],\n        ]),\n      ).toEqual(\n        '[42,\"Hello, World!\",true,null,{\"name\":\"John\",\"age\":30},[1,2,3]]',\n      );\n    });\n  });\n\n  describe('objects', () => {\n    test('empty', () => {\n      expect(jsonStringify({})).toEqual('{}');\n    });\n\n    test('non-nested', () => {\n      expect(jsonStringify({ foo: 1 })).toEqual('{\"foo\":1}');\n      expect(jsonStringify({ foo: true })).toEqual('{\"foo\":true}');\n      expect(jsonStringify({ foo: false })).toEqual('{\"foo\":false}');\n      expect(jsonStringify({ foo: 'bar' })).toEqual('{\"foo\":\"bar\"}');\n      expect(jsonStringify({ foo: [] })).toEqual('{\"foo\":[]}');\n      expect(jsonStringify({ foo: null })).toEqual('{\"foo\":null}');\n    });\n\n    test('nested', () => {\n      expect(jsonStringify({ foo: { foo: true } })).toEqual(\n        '{\"foo\":{\"foo\":true}}',\n      );\n      expect(jsonStringify({ foo: true, bar: { foo: 2 } })).toEqual(\n        '{\"foo\":true,\"bar\":{\"foo\":2}}',\n      );\n    });\n\n    test('mixed', () => {\n      expect(\n        jsonStringify({\n          name: 'foo',\n          age: 18,\n          attr: ['coding', 123],\n        }),\n      ).toEqual('{\"name\":\"foo\",\"age\":18,\"attr\":[\"coding\",123]}');\n    });\n  });\n});\n",
    "/src/json-stringify.ts": "export default function jsonStringify(value: unknown): string {\n  if (Array.isArray(value)) {\n    const arrayValues = value.map((item) => jsonStringify(item));\n    return `[${arrayValues.join(',')}]`;\n  }\n\n  if (typeof value === 'object' && value !== null) {\n    const objectEntries = Object.entries(value).map(\n      ([key, value]) => `\"${key}\":${jsonStringify(value)}`,\n    );\n    return `{${objectEntries.join(',')}}`;\n  }\n\n  if (typeof value === 'string') {\n    return `\"${value}\"`;\n  }\n\n  return String(value);\n}\n"
  },
  "metadata": {
    "access": "standard",
    "author": null,
    "companies": [
      "snap",
      "amazon",
      "google"
    ],
    "created": 1653177600,
    "difficulty": "medium",
    "duration": 20,
    "excerpt": "Implement a function that converts a JavaScript value into a JSON string",
    "featured": true,
    "format": "javascript",
    "frameworkDefault": null,
    "frameworks": [],
    "href": "/questions/javascript/json-stringify",
    "importance": "low",
    "languages": [
      "js",
      "ts"
    ],
    "nextQuestions": [
      "json-stringify-ii"
    ],
    "published": true,
    "ranking": 100,
    "similarQuestions": [
      "html-serializer"
    ],
    "slug": "json-stringify",
    "subtitle": null,
    "title": "JSON.stringify",
    "topics": [
      "recursion"
    ]
  },
  "skeleton": {
    "js": "/**\n * @param {*} value\n * @return {string}\n */\nexport default function jsonStringify(value) {\n  throw 'Not implemented!';\n}",
    "ts": "export default function jsonStringify(value: unknown): string {\n  throw 'Not implemented!';\n}"
  },
  "solution": "var Component=(()=>{var f=Object.create;var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),S=(t,e)=>{for(var i in e)a(t,i,{get:e[i],enumerable:!0})},c=(t,e,i,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!j.call(t,r)&&r!==i&&a(t,r,{get:()=>e[r],enumerable:!(o=p(e,r))||o.enumerable});return t};var w=(t,e,i)=>(i=t!=null?f(g(t)):{},c(e||!t||!t.__esModule?a(i,\"default\",{value:t,enumerable:!0}):i,t)),k=t=>c(a({},\"__esModule\",{value:!0}),t);var d=b((_,s)=>{s.exports=_jsx_runtime});var V={};S(V,{default:()=>O});var n=w(d());var l=MDXCodeBlock;var h=`/**\n * @param {*} value\n * @return {string}\n */\nexport default function jsonStringify(value) {\n  if (Array.isArray(value)) {\n    const arrayValues = value.map((item) => jsonStringify(item));\n    return \\`[\\${arrayValues.join(',')}]\\`;\n  }\n\n  if (typeof value === 'object' && value !== null) {\n    const objectEntries = Object.entries(value).map(\n      ([key, value]) => \\`\"\\${key}\":\\${jsonStringify(value)}\\`,\n    );\n    return \\`{\\${objectEntries.join(',')}}\\`;\n  }\n\n  if (typeof value === 'string') {\n    return \\`\"\\${value}\"\\`;\n  }\n\n  return String(value);\n}\n`;var u=`export default function jsonStringify(value: unknown): string {\n  if (Array.isArray(value)) {\n    const arrayValues = value.map((item) => jsonStringify(item));\n    return \\`[\\${arrayValues.join(',')}]\\`;\n  }\n\n  if (typeof value === 'object' && value !== null) {\n    const objectEntries = Object.entries(value).map(\n      ([key, value]) => \\`\"\\${key}\":\\${jsonStringify(value)}\\`,\n    );\n    return \\`{\\${objectEntries.join(',')}}\\`;\n  }\n\n  if (typeof value === 'string') {\n    return \\`\"\\${value}\"\\`;\n  }\n\n  return String(value);\n}\n`;var y=`function getType(value) {\n  if (value === null) {\n    return 'null';\n  }\n\n  if (Array.isArray(value)) {\n    return 'array';\n  }\n\n  return typeof value;\n}\n\n/**\n * @param {*} value\n * @return {string}\n */\nexport default function jsonStringify(value) {\n  const type = getType(value);\n\n  switch (type) {\n    case 'array':\n      const arrayValues = value.map((item) => jsonStringify(item)).join(',');\n      return \\`[\\${arrayValues}]\\`;\n    case 'object':\n      const objectValues = Object.entries(value)\n        .map(([key, value]) => \\`\"\\${key}\":\\${jsonStringify(value)}\\`)\n        .join(',');\n      return \\`{\\${objectValues}}\\`;\n    case 'string':\n      return \\`\"\\${value}\"\\`;\n    default:\n      // Handles null, boolean, numbers.\n      return String(value);\n  }\n}\n`;function v(t){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\",ul:\"ul\",li:\"li\",a:\"a\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"Solution\"}),`\n`,(0,n.jsx)(e.p,{children:\"Because non-primitive values can contain both primitive and non-primitive values, we have to use a recursive solution.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"We can think of the \",(0,n.jsx)(e.code,{children:\"value\"}),'s like a tree. Primitive values are nodes that do not have children, and array/object types are nodes that have children of any value type. We can convert each node into a tree by converting each of its children into strings. We can work upwards from the \"leaf\" nodes, which in this case is primitive values because they cannot contain any children, and build the string up from the leaf nodes all the way to the root.']}),`\n`,(0,n.jsx)(e.p,{children:\"Let's define how to stringify each value type:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"null\"}),\": Directly convert it into the string \",(0,n.jsx)(e.code,{children:\"null\"}),\".\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"boolean\"}),\": Directly convert \",(0,n.jsx)(e.code,{children:\"true\"}),\"/\",(0,n.jsx)(e.code,{children:\"false\"}),\" into a string via \",(0,n.jsx)(e.code,{children:\"String()\"}),\".\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"number\"}),\"s: Directly convert into a string via \",(0,n.jsx)(e.code,{children:\"String()\"}),\".\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"string\"}),\"s: We have to wrap the value with double quotes as it's required by JSON.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Arrays: Recursively stringify each child item, then concatenate them with a comma, and wrap them in square brackets: \",(0,n.jsx)(e.code,{children:\"[\"}),\" and \",(0,n.jsx)(e.code,{children:\"]\"}),\".\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Objects: Convert each key/value pair (also called an entry) into a \",(0,n.jsx)(e.code,{children:'\"key\":{stringifiedValue}'}),\" format by recursively stringifying the values, concatenate them with a comma, and wrap them in braces: \",(0,n.jsx)(e.code,{children:\"{\"}),\" and \",(0,n.jsx)(e.code,{children:\"}\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Now that we know how to stringify each value, we just have to know how to determine the type of value. Since \",(0,n.jsx)(e.code,{children:\"null\"}),\", \",(0,n.jsx)(e.code,{children:\"boolean\"}),\", \",(0,n.jsx)(e.code,{children:\"number\"}),\"s can produce the desired string just by using \",(0,n.jsx)(e.code,{children:\"String()\"}),\", we can handle them together as the default case at the bottom. To determine the types:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"Arrays: Use \",(0,n.jsx)(e.code,{children:\"Array.isArray()\"}),\".\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Objects: Use \",(0,n.jsx)(e.code,{children:\"typeof value === 'object' && value !== null\"}),\". The check for \",(0,n.jsx)(e.code,{children:\"!== null\"}),\" is important because \",(0,n.jsx)(e.code,{children:\"typeof null\"}),\" is \",(0,n.jsx)(e.code,{children:\"'object'\"}),\" but we have to handle \",(0,n.jsx)(e.code,{children:\"null\"}),\"s differently from objects.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Strings: Use \",(0,n.jsx)(e.code,{children:\"typeof value === 'string'\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Here's the code that determines the type of a value and stringify each value type appropriately.\"}),`\n`,(0,n.jsx)(l,{languages:{jsx:h,tsx:u}}),`\n`,(0,n.jsxs)(e.p,{children:[\"Here's an alternative that does the typechecking in a cleaner fashion by using \",(0,n.jsx)(e.code,{children:\"switch\"}),\" cases:\"]}),`\n`,(0,n.jsx)(l,{children:y}),`\n`,(0,n.jsx)(e.h2,{children:\"Limitations\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The code above is a simplified version of \",(0,n.jsx)(e.code,{children:\"JSON.stringify\"}),\" and doesn't handle many other types available in JavaScript nor support the API's replacer and formatting options. Some other cases:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Cyclic references within the objects.\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"Doesn't handle other types like \",(0,n.jsx)(e.code,{children:\"undefined\"}),\", \",(0,n.jsx)(e.code,{children:\"Function\"}),\", \",(0,n.jsx)(e.code,{children:\"Map\"}),\", \",(0,n.jsx)(e.code,{children:\"Set\"}),\", \",(0,n.jsx)(e.code,{children:\"Symbol\"}),\", \",(0,n.jsx)(e.code,{children:\"RegExp\"}),\", \",(0,n.jsx)(e.code,{children:\"Date\"}),\", and more.\"]}),`\n`,(0,n.jsx)(e.li,{children:\"Double quotes and other special characters like backslashes, tabs, within strings should be escaped.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"To practice handling of such cases, try out \",(0,n.jsxs)(e.a,{href:\"/questions/javascript/json-stringify-ii\",children:[(0,n.jsx)(e.code,{children:\"JSON.stringify\"}),\" II\"]}),\".\"]})]})}function D(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(v,t)})):v(t)}var O=D;return k(V);})();\n;return Component;",
  "workspace": {
    "main": "/src/json-stringify.ts",
    "run": "/src/json-stringify.run.test.ts",
    "submit": "/src/json-stringify.submit.test.ts"
  }
}
{
  "description": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var M=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),b=(l,n)=>{for(var t in n)c(l,t,{get:n[t],enumerable:!0})},i=(l,n,t,a)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of g(n))!u.call(l,r)&&r!==t&&c(l,r,{get:()=>n[r],enumerable:!(a=p(n,r))||a.enumerable});return l};var j=(l,n,t)=>(t=l!=null?h(m(l)):{},i(n||!l||!l.__esModule?c(t,\"default\",{value:l,enumerable:!0}):t,l)),f=l=>i(c({},\"__esModule\",{value:!0}),l);var s=M((I,o)=>{o.exports=_jsx_runtime});var _={};b(_,{default:()=>w,frontmatter:()=>x});var e=j(s()),x={title:\"\\u5355\\u4F8B\\u6A21\\u5F0F\",excerpt:\"\\u5B9E\\u73B0\\u4E00\\u4E2A\\u5355\\u4F8B\\u7C7B\\uFF0C\\u786E\\u4FDD\\u4E00\\u4E2A\\u7C7B\\u53EA\\u6709\\u4E00\\u4E2A\\u5B9E\\u4F8B\\uFF0C\\u540C\\u65F6\\u63D0\\u4F9B\\u5BF9\\u8BE5\\u5B9E\\u4F8B\\u7684\\u5168\\u5C40\\u8BBF\\u95EE\\u70B9\"};function d(l){let n=Object.assign({p:\"p\",ul:\"ul\",li:\"li\",strong:\"strong\",code:\"code\",h2:\"h2\",pre:\"pre\",a:\"a\"},l.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"\\u5F53\\u60A8\\u5E0C\\u671B\\u786E\\u4FDD\\u4E00\\u4E2A\\u7C7B\\u53EA\\u6709\\u4E00\\u4E2A\\u5B9E\\u4F8B\\u5E76\\u63D0\\u4F9B\\u5BF9\\u8BE5\\u5B9E\\u4F8B\\u7684\\u5168\\u5C40\\u8BBF\\u95EE\\u70B9\\u65F6\\uFF0C\\u5C06\\u4F7F\\u7528\\u5355\\u4F8B\\u6A21\\u5F0F\\u3002\\u5355\\u4F8B\\u6A21\\u5F0F\\u9002\\u7528\\u4E8E\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u5355\\u4E00\\u63A7\\u5236\\u70B9\\uFF1A\"}),\" \\u5F53\\u60A8\\u9700\\u8981\\u4E00\\u4E2A\\u5355\\u4E00\\u7684\\u63A7\\u5236\\u70B9\\u6765\\u6267\\u884C\\u64CD\\u4F5C\\u65F6\\uFF0C\\u4F8B\\u5982\\u7BA1\\u7406\\u914D\\u7F6E\\u5BF9\\u8C61\\u3001\\u65E5\\u5FD7\\u8BB0\\u5F55\\u6216\\u63A7\\u5236\\u5BF9\\u5171\\u4EAB\\u8D44\\u6E90\\u7684\\u8BBF\\u95EE\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u5168\\u5C40\\u72B6\\u6001\\uFF1A\"}),\" \\u5F53\\u60A8\\u5E0C\\u671B\\u7EF4\\u62A4\\u4E00\\u4E2A\\u5E94\\u8BE5\\u53EF\\u4EE5\\u4ECE\\u5E94\\u7528\\u7A0B\\u5E8F\\u7684\\u4E0D\\u540C\\u90E8\\u5206\\u8BBF\\u95EE\\u7684\\u5168\\u5C40\\u72B6\\u6001\\u65F6\\u3002\\u8FD9\\u5728\\u8DE8\\u5404\\u79CD\\u7EC4\\u4EF6\\u5171\\u4EAB\\u516C\\u5171\\u6570\\u636E\\u65F6\\u7279\\u522B\\u6709\\u7528\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u9632\\u6B62\\u91CD\\u590D\\u521D\\u59CB\\u5316\\uFF1A\"}),\" \\u786E\\u4FDD\\u53EA\\u521B\\u5EFA\\u4E00\\u4E2A\\u7C7B\\u7684\\u5B9E\\u4F8B\\uFF0C\\u9632\\u6B62\\u91CD\\u590D\\u521D\\u59CB\\u5316\\u5E76\\u907F\\u514D\\u4E0E\\u591A\\u4E2A\\u5B9E\\u4F8B\\u76F8\\u5173\\u7684\\u6F5C\\u5728\\u95EE\\u9898\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u7F13\\u5B58\\uFF1A\"}),\" \\u7528\\u4E8E\\u5B9E\\u73B0\\u7F13\\u5B58\\u673A\\u5236\\uFF0C\\u60A8\\u5E0C\\u671B\\u5728\\u6574\\u4E2A\\u5E94\\u7528\\u7A0B\\u5E8F\\u4E2D\\u7EF4\\u62A4\\u4E00\\u4E2A\\u5355\\u4E00\\u7684\\u7F13\\u5B58\\u5B9E\\u4F8B\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4F7F\\u7528\\u5355\\u4F8B\\u6A21\\u5F0F\\u5728 JavaScript \\u4E2D\\u5B9E\\u73B0 \",(0,e.jsx)(n.code,{children:\"GlobalMap\"}),\" \\u6A21\\u5757\\u3002\",(0,e.jsx)(n.code,{children:\"GlobalMap\"}),\" \\u6A21\\u5757\\u5BFC\\u51FA\\u4E00\\u4E2A\\u5BF9\\u8C61\\uFF0C\\u8BE5\\u5BF9\\u8C61\\u5177\\u6709\\u4E00\\u4E2A\\u5355\\u4E00\\u7684 \",(0,e.jsx)(n.code,{children:\"getInstance()\"}),\" \\u65B9\\u6CD5\\uFF0C\\u8BE5\\u65B9\\u6CD5\\u8FD4\\u56DE\\u4E00\\u4E2A \",(0,e.jsx)(n.code,{children:\"Map\"}),\" \\u5BF9\\u8C61\\uFF0C\\u8BE5\\u5BF9\\u8C61\\u53EF\\u7528\\u4F5C\\u5168\\u5C40\\u7F13\\u5B58/\\u8BB0\\u5FC6\\u5316\\u7684\\u952E/\\u503C\\u5B58\\u50A8\\u3002\"]}),`\n`,(0,e.jsx)(n.h2,{children:\"\\u793A\\u4F8B\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`// fileA.js\nimport GlobalMap from './GlobalMap';\n\nconst gbMap = GlobalMap.getInstance();\ngbMap.set('count', 42);\n`})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u53E6\\u4E00\\u4E2A\\u6587\\u4EF6\\u4E2D\\uFF0C\\u5728\\u7B2C\\u4E00\\u4E2A\\u6587\\u4EF6\\u4E4B\\u540E\\u6267\\u884C\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`// fileB.js\nimport GlobalMap from './GlobalMap';\n\nconst gbMap = GlobalMap.getInstance();\nconsole.log(gbMap.get('count')); // 42\n`})}),`\n`,(0,e.jsx)(n.h2,{children:\"\\u8D44\\u6E90\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.patterns.dev/vanilla/singleton-pattern\",children:\"\\u5355\\u4F8B\\u6A21\\u5F0F | patterns.dev\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.digitalocean.com/community/tutorials/js-js-singletons\",children:\"\\u5982\\u4F55\\u5728 JavaScript \\u4E2D\\u4F7F\\u7528\\u5355\\u4F8B\"})}),`\n`]})]})}function G(l={}){let{wrapper:n}=l.components||{};return n?(0,e.jsx)(n,Object.assign({},l,{children:(0,e.jsx)(d,l)})):d(l)}var w=G;return f(_);})();\n;return Component;",
  "files": {
    "/package.json": "{\n  \"name\": \"@gfe-questions/singleton\",\n  \"version\": \"0.0.1\",\n  \"main\": \"/src/singleton.ts\",\n  \"devDependencies\": {\n    \"@types/jest\": \"29.5.0\",\n    \"typescript\": \"5.0.2\"\n  }\n}\n",
    "/tsconfig.json": "{\n  \"include\": [\"./**/*\"],\n  \"compilerOptions\": {\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"lib\": [\"dom\", \"esnext\"],\n    \"jsx\": \"react-jsx\"\n  }\n}\n",
    "/src/singleton.run.test.ts": "import Singleton from './singleton';\nimport Singleton2 from './singleton';\n\ndescribe('singleton', () => {\n  test('returns an object with the required method', () => {\n    expect(Singleton).toBeInstanceOf(Object);\n    expect(Singleton.getInstance).toBeInstanceOf(Function);\n  });\n\n  describe('instance', () => {\n    test('getInstance returns a Map', () => {\n      expect(Singleton.getInstance()).toBeInstanceOf(Map);\n    });\n\n    test('Map methods work', () => {\n      const globalMap = Singleton.getInstance();\n      globalMap.set('count', 42);\n      expect(globalMap.get('count')).toBe(42);\n    });\n\n    test('separate modules use the same instance', () => {\n      const globalMap = Singleton.getInstance();\n      globalMap.set('count', 42);\n\n      const globalMap2 = Singleton2.getInstance();\n      expect(globalMap2.get('count')).toBe(42);\n    });\n  });\n});\n",
    "/src/singleton.submit.test.ts": "import Singleton from './singleton';\nimport Singleton2 from './singleton';\n\ndescribe('singleton', () => {\n  test('returns an object with the required method', () => {\n    expect(Singleton).toBeInstanceOf(Object);\n    expect(Singleton.getInstance).toBeInstanceOf(Function);\n  });\n\n  describe('instance', () => {\n    test('getInstance returns a Map', () => {\n      expect(Singleton.getInstance()).toBeInstanceOf(Map);\n    });\n\n    test('Map methods work', () => {\n      const globalMap = Singleton.getInstance();\n      globalMap.set('count', 42);\n      expect(globalMap.get('count')).toBe(42);\n    });\n\n    test('separate modules use the same instance', () => {\n      const globalMap = Singleton.getInstance();\n      globalMap.set('count', 42);\n\n      const globalMap2 = Singleton2.getInstance();\n      expect(globalMap2.get('count')).toBe(42);\n    });\n  });\n});\n",
    "/src/singleton.ts": "const globalMap = new Map();\n\nexport default {\n  getInstance() {\n    return globalMap;\n  },\n};\n"
  },
  "metadata": {
    "access": "premium",
    "author": null,
    "companies": [],
    "created": 1699747200,
    "difficulty": "easy",
    "duration": 10,
    "excerpt": "实现一个单例类，确保一个类只有一个实例，同时提供对该实例的全局访问点",
    "featured": false,
    "format": "javascript",
    "frameworkDefault": null,
    "frameworks": [],
    "href": "/questions/javascript/singleton",
    "importance": "low",
    "languages": [
      "js",
      "ts"
    ],
    "nextQuestions": [],
    "published": true,
    "ranking": 100,
    "similarQuestions": [],
    "slug": "singleton",
    "subtitle": null,
    "title": "单例模式",
    "topics": []
  },
  "skeleton": {
    "js": "// No skeleton is provided. Export an object that has a single `getInstance()` method.",
    "ts": "// No skeleton is provided. Export an object that has a single `getInstance()` method."
  },
  "solution": "var Component=(()=>{var u=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var I=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var x=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),j=(t,n)=>{for(var l in n)c(t,l,{get:n[l],enumerable:!0})},i=(t,n,l,r)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let a of f(n))!b.call(t,a)&&a!==l&&c(t,a,{get:()=>n[a],enumerable:!(r=m(n,a))||r.enumerable});return t};var w=(t,n,l)=>(l=t!=null?u(I(t)):{},i(n||!t||!t.__esModule?c(l,\"default\",{value:t,enumerable:!0}):l,t)),E=t=>i(c({},\"__esModule\",{value:!0}),t);var p=x((X,d)=>{d.exports=_jsx_runtime});var C={};j(C,{default:()=>y});var e=w(p());var o=MDXCodeBlock;var h=`const globalMap = new Map();\n\nexport default {\n  getInstance() {\n    return globalMap;\n  },\n};\n`;var s=`let globalMap: Map<any, any>;\n\nexport default {\n  getInstance() {\n    if (globalMap === undefined) {\n      globalMap = new Map();\n    }\n\n    return globalMap;\n  },\n};\n`;var g=`const GlobalMap = (function () {\n  const _privateMap = new Map();\n\n  return {\n    getInstance: function () {\n      return _privateMap;\n    },\n  };\n})();\n\nexport default GlobalMap;\n`;function M(t){let n=Object.assign({h2:\"h2\",h3:\"h3\",p:\"p\",code:\"code\",ul:\"ul\",li:\"li\",a:\"a\"},t.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h2,{children:\"\\u89E3\\u51B3\\u65B9\\u6848\"}),`\n`,(0,e.jsx)(n.h3,{children:\"\\u65B9\\u6CD5 1\\uFF1AES6 \\u6A21\\u5757\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u7531\\u4E8E\\u7F16\\u7801\\u5DE5\\u4F5C\\u533A\\u4E2D\\u7684\\u6BCF\\u4E2A\\u6587\\u4EF6\\u90FD\\u662F\\u4E00\\u4E2A\\u6A21\\u5757\\uFF0C\\u5E76\\u4E14 ES6 \\u6A21\\u5757\\u662F\\u6A21\\u5757\\u7684\\u5355\\u4E2A\\u5B9E\\u4F8B\\uFF0C\\u56E0\\u6B64\\u6211\\u4EEC\\u53EF\\u4EE5\\u4F7F\\u7528\\u5B83\\u8F7B\\u677E\\u5B9E\\u73B0\\u5355\\u4F8B\\u6A21\\u5F0F\\u3002\\u6B64\\u6A21\\u5757\\u5BFC\\u51FA\\u4E00\\u4E2A\\u5177\\u6709\\u5355\\u4E2A\\u65B9\\u6CD5 \",(0,e.jsx)(n.code,{children:\"getInstance\"}),\" \\u7684\\u5BF9\\u8C61\\u3002\",(0,e.jsx)(n.code,{children:\"getInstance\"}),\" \\u65B9\\u6CD5\\u8D1F\\u8D23\\u63D0\\u4F9B\\u5BF9 \",(0,e.jsx)(n.code,{children:\"globalMap\"}),\" \\u5B9E\\u4F8B\\u7684\\u8BBF\\u95EE\\u3002\\u5F53\\u5E94\\u7528\\u7A0B\\u5E8F\\u7684\\u5176\\u4ED6\\u90E8\\u5206\\u5BFC\\u5165\\u6B64\\u6A21\\u5757\\u5E76\\u8C03\\u7528 \",(0,e.jsx)(n.code,{children:\"getInstance\"}),\" \\u65F6\\uFF0C\\u5B83\\u4EEC\\u4F1A\\u6536\\u5230\\u5BF9\\u540C\\u4E00 \",(0,e.jsx)(n.code,{children:\"globalMap\"}),\" \\u5B9E\\u4F8B\\u7684\\u5F15\\u7528\\u3002\"]}),`\n`,(0,e.jsx)(o,{children:h}),`\n`,(0,e.jsx)(n.h3,{children:\"\\u65B9\\u6CD5 2\\uFF1A\\u5177\\u6709\\u5EF6\\u8FDF\\u5B9E\\u4F8B\\u5316\\u7684 ES6 \\u6A21\\u5757\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728\\u7B2C\\u4E00\\u4E2A\\u89E3\\u51B3\\u65B9\\u6848\\u4E2D\\uFF0C\",(0,e.jsx)(n.code,{children:\"Map\"}),\" \\u5B9E\\u4F8B\\u4ECE\\u4E00\\u5F00\\u59CB\\u5C31\\u88AB\\u5B9E\\u4F8B\\u5316\\u3002\\u4F46\\u662F\\uFF0C\\u5728\\u67D0\\u4E9B\\u60C5\\u51B5\\u4E0B\\uFF0C\\u5B9E\\u4F8B\\u5316\\u6210\\u672C\\u5F88\\u9AD8\\uFF0C\\u800C\\u4E14\\u60A8\\u5F88\\u53EF\\u80FD\\u6839\\u672C\\u4E0D\\u9700\\u8981\\u4F7F\\u7528\\u8BE5\\u5B9E\\u4F8B\\uFF0C\\u90A3\\u4E48\\u5EF6\\u8FDF\\u5B9E\\u4F8B\\u5316\\u65B9\\u6CD5\\u66F4\\u597D\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728\\u6B64\\u4FEE\\u6539\\u540E\\u7684\\u7248\\u672C\\u4E2D\\uFF0C\",(0,e.jsx)(n.code,{children:\"getInstance\"}),\" \\u65B9\\u6CD5\\u5728\\u521B\\u5EFA\\u65B0\\u5B9E\\u4F8B\\u4E4B\\u524D\\u68C0\\u67E5\\u662F\\u5426\\u5DF2\\u5B9E\\u4F8B\\u5316 \",(0,e.jsx)(n.code,{children:\"globalMap\"}),\"\\u3002\\u5982\\u679C \",(0,e.jsx)(n.code,{children:\"globalMap\"}),\" \\u5DF2\\u7ECF\\u5B9E\\u4F8B\\u5316\\uFF0C\\u5B83\\u53EA\\u662F\\u8FD4\\u56DE\\u73B0\\u6709\\u5B9E\\u4F8B\\u3002\\u8FD9\\u6837\\uFF0C\\u4EC5\\u5F53\\u7B2C\\u4E00\\u6B21\\u8C03\\u7528 \",(0,e.jsx)(n.code,{children:\"getInstance\"}),\" \\u65B9\\u6CD5\\u65F6\\u624D\\u521B\\u5EFA map\\uFF0C\\u4ECE\\u800C\\u5B9E\\u73B0\\u5EF6\\u8FDF\\u5B9E\\u4F8B\\u5316\\u3002\\u7528\\u6CD5\\u4FDD\\u6301\\u4E0D\\u53D8\\u3002\"]}),`\n`,(0,e.jsx)(o,{children:s}),`\n`,(0,e.jsx)(n.h3,{children:\"\\u65B9\\u6CD5 3\\uFF1A\\u7ACB\\u5373\\u8C03\\u7528\\u51FD\\u6570\\u8868\\u8FBE\\u5F0F (IIFE)\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728 ES6 \\u6A21\\u5757\\u51FA\\u73B0\\u4E4B\\u524D\\uFF0C\\u7ACB\\u5373\\u8C03\\u7528\\u51FD\\u6570\\u8868\\u8FBE\\u5F0F (IIFE) \\u53EF\\u7528\\u4E8E\\u5C01\\u88C5\\u6570\\u636E\\u4EE5\\u83B7\\u53D6\\u6A21\\u5757\\u3002\\u5728\\u6B64\\u7248\\u672C\\u4E2D\\uFF0C\\u6574\\u4E2A\\u5355\\u4F8B\\u6A21\\u5F0F\\u88AB\\u5305\\u88C5\\u5728 IIFE \\u4E2D\\uFF0C\\u521B\\u5EFA\\u4E86\\u4E00\\u4E2A\\u5C01\\u88C5 \",(0,e.jsx)(n.code,{children:\"globalMap\"}),\" \\u53D8\\u91CF\\u7684\\u95ED\\u5305\\u3002\",(0,e.jsx)(n.code,{children:\"getInstance\"}),\" \\u65B9\\u6CD5\\u901A\\u8FC7\\u8FD4\\u56DE\\u7684\\u5BF9\\u8C61\\u516C\\u5F00\\uFF0C\\u5141\\u8BB8\\u8BBF\\u95EE\\u5171\\u4EAB\\u7684 map \\u5B9E\\u4F8B\\u3002\"]}),`\n`,(0,e.jsx)(o,{children:g}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E00\\u822C\\u6765\\u8BF4\\uFF0CES6 \\u6A21\\u5757\\u7248\\u672C\\u662F\\u9996\\u9009\\uFF0C\\u56E0\\u4E3A\\u5B83\\u662F\\u672A\\u6765\\u3002\\u4F46\\u662F\\uFF0C\\u5982\\u679C\\u60A8\\u5728\\u4E0D\\u652F\\u6301 ES6 \\u6A21\\u5757\\u7684\\u73AF\\u5883\\u4E2D\\u5DE5\\u4F5C\\uFF08\\u65E7\\u7248\\u6D4F\\u89C8\\u5668\\u3001Node.js \\u6CA1\\u6709\\u6A21\\u5757\\u652F\\u6301\\u7B49\\uFF09\\uFF0C\\u90A3\\u4E48\\u4F7F\\u7528 IIFE \\u662F\\u5C01\\u88C5\\u548C\\u6784\\u5EFA\\u4EE3\\u7801\\u7684\\u5E38\\u7528\\u65B9\\u6CD5\\u3002\"}),`\n`,(0,e.jsx)(n.h2,{children:\"\\u8D44\\u6E90\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.patterns.dev/vanilla/singleton-pattern\",children:\"\\u5355\\u4F8B\\u6A21\\u5F0F | patterns.dev\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.digitalocean.com/community/tutorials/js-js-singletons\",children:\"\\u5982\\u4F55\\u5728 JavaScript \\u4E2D\\u4F7F\\u7528\\u5355\\u4F8B\"})}),`\n`]})]})}function F(t={}){let{wrapper:n}=t.components||{};return n?(0,e.jsx)(n,Object.assign({},t,{children:(0,e.jsx)(M,t)})):M(t)}var y=F;return E(C);})();\n;return Component;",
  "workspace": {
    "main": "/src/singleton.ts",
    "run": "/src/singleton.run.test.ts",
    "submit": "/src/singleton.submit.test.ts"
  }
}
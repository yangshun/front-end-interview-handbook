{
  "description": "var Component=(()=>{var h=Object.create;var o=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),m=(t,e)=>{for(var c in e)o(t,c,{get:e[c],enumerable:!0})},i=(t,e,c,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!j.call(t,r)&&r!==c&&o(t,r,{get:()=>e[r],enumerable:!(l=p(e,r))||l.enumerable});return t};var f=(t,e,c)=>(c=t!=null?h(b(t)):{},i(e||!t||!t.__esModule?o(c,\"default\",{value:t,enumerable:!0}):c,t)),v=t=>i(o({},\"__esModule\",{value:!0}),t);var a=O((C,d)=>{d.exports=_jsx_runtime});var S={};m(S,{default:()=>_,frontmatter:()=>x});var n=f(a()),x={title:\"useObject\",excerpt:\"\\u5B9E\\u73B0\\u4E00\\u4E2A\\u7BA1\\u7406\\u5BF9\\u8C61\\u503C\\u7684 Hook\"};function s(t){let e=Object.assign({p:\"p\",code:\"code\",a:\"a\",pre:\"pre\",h2:\"h2\",ul:\"ul\",li:\"li\",ol:\"ol\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"\\u5B9E\\u73B0\\u4E00\\u4E2A \",(0,n.jsx)(e.code,{children:\"useObject\"}),\" hook\\uFF0C\\u7528\\u4E8E\\u7BA1\\u7406 JavaScript \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object\",children:(0,n.jsx)(e.code,{children:\"Object\"})}),\" \\u7684\\u72B6\\u6001\\uFF0C\\u4E5F\\u79F0\\u4E3A POJO\\uFF08Plain Old JavaScript Object\\uFF09\\uFF0C\\u5B83\\u662F\\u4E00\\u4E2A\\u4F7F\\u7528 \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer\",children:(0,n.jsx)(e.code,{children:\"{}\"})}),\" \\u521D\\u59CB\\u5316\\u7684\\u952E\\u503C\\u5BF9\\u5B58\\u50A8\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5F53\\u4F7F\\u7528\\u5BF9\\u8C61\\u8C03\\u7528 set state \\u51FD\\u6570\\u65F6\\uFF0C\\u5B83\\u5C06\\u4E0E\\u73B0\\u6709\\u5BF9\\u8C61\\u5408\\u5E76\\u3002\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"useObject\"}),\" \\u6BD4\\u666E\\u901A\\u7684 \",(0,n.jsx)(e.code,{children:\"useState\"}),\" \\u66F4\\u65B9\\u4FBF\\uFF0C\\u56E0\\u4E3A\\u5728\\u540E\\u4E00\\u79CD\\u60C5\\u51B5\\u4E0B\\uFF0C\\u4F60\\u603B\\u662F\\u9700\\u8981\\u521B\\u5EFA\\u4E00\\u4E2A\\u65B0\\u5BF9\\u8C61\\uFF0C\\u4FEE\\u6539\\u5B83\\uFF0C\\u7136\\u540E\\u8BBE\\u7F6E\\u72B6\\u6001\\u4EE5\\u4F7F\\u7528\\u65B0\\u5BF9\\u8C61\\uFF08\\u6216\\u901A\\u8FC7\\u5BF9\\u8C61\\u5C55\\u5F00\\u521B\\u5EFA\\u65B0\\u5BF9\\u8C61\\uFF09\\uFF0C\\u8FD9\\u53EF\\u80FD\\u975E\\u5E38\\u9EBB\\u70E6\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-jsx\",children:`export default function Component() {\n  const [record, setRecord] = useObject({ a: 1, b: 2 });\n\n  return (\n    <div>\n      <pre>{JSON.stringify(record, null, 2)}</pre>\n      <button onClick={() => setRecord((prev) => ({ a: prev.a + 1 }))}>\n        \\u589E\\u52A0 a\n      </button>\n      <button onClick={() => setRecord((prev) => ({ b: prev.b + 1 }))}>\n        \\u589E\\u52A0 b\n      </button>\n      <button onClick={() => setRecord(() => ({ c: 3 }))}>\\u6DFB\\u52A0 c</button>\n    </div>\n  );\n}\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u53C2\\u6570\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"initialValue\"}),\": \\u5BF9\\u8C61\\u7684\\u521D\\u59CB\\u503C\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u8FD4\\u56DE\\u503C\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8BE5 hook \\u8FD4\\u56DE\\u4E00\\u4E2A\\u5305\\u542B\\u4E24\\u4E2A\\u5143\\u7D20\\u7684\\u6570\\u7EC4\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u5F53\\u524D\\u5BF9\\u8C61\\u72B6\\u6001\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u4E00\\u4E2A\\u53EF\\u4EE5\\u66F4\\u65B0\\u5BF9\\u8C61\\u72B6\\u6001\\u7684\\u66F4\\u65B0\\u51FD\\u6570\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u66F4\\u65B0\\u51FD\\u6570\\u53EF\\u4EE5\\u63A5\\u6536\\u4EE5\\u4E0B\\u4EFB\\u4E00\\u53C2\\u6570\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u4E00\\u4E2A\\u5C06\\u4E0E\\u5F53\\u524D\\u72B6\\u6001\\u5BF9\\u8C61\\u5408\\u5E76\\u7684\\u5BF9\\u8C61\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u4E00\\u4E2A\\u63A5\\u6536\\u5F53\\u524D\\u72B6\\u6001\\u5BF9\\u8C61\\u5E76\\u8FD4\\u56DE\\u4E00\\u4E2A\\u5C06\\u4E0E\\u5F53\\u524D\\u72B6\\u6001\\u5BF9\\u8C61\\u5408\\u5E76\\u7684\\u5BF9\\u8C61\\u7684\\u66F4\\u65B0\\u51FD\\u6570\"}),`\n`]})]})}function g(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(s,t)})):s(t)}var _=g;return v(S);})();\n;return Component;",
  "info": {
    "excerpt": "实现一个管理对象值的 Hook",
    "title": "useObject"
  },
  "solution": "var Component=(()=>{var h=Object.create;var a=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var m=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),S=(r,e)=>{for(var n in e)a(r,n,{get:e[n],enumerable:!0})},i=(r,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of O(e))!f.call(r,c)&&c!==n&&a(r,c,{get:()=>e[c],enumerable:!(o=b(e,c))||o.enumerable});return r};var g=(r,e,n)=>(n=r!=null?h(j(r)):{},i(e||!r||!r.__esModule?a(n,\"default\",{value:r,enumerable:!0}):n,r)),v=r=>i(a({},\"__esModule\",{value:!0}),r);var d=m((F,l)=>{l.exports=_jsx_runtime});var y={};S(y,{default:()=>w});var t=g(d());var s=MDXCodeBlock;var p=`import { useCallback, useState } from 'react';\n\nfunction isPlainObject(value: unknown) {\n  return Object.prototype.toString.call(value) === '[object Object]';\n}\n\ntype UseObjectUpdater<T extends Record<string | number | symbol, any>> = (\n  partialOrUpdaterFunction: Partial<T> | ((prev: T) => Partial<T>),\n) => void;\n\nexport default function useObject<\n  T extends Record<string | number | symbol, any>,\n>(initialValue: T): [T, UseObjectUpdater<T>] {\n  const [state, setState] = useState(initialValue);\n\n  const merge: UseObjectUpdater<T> = useCallback((partialOrUpdaterFunction) => {\n    if (partialOrUpdaterFunction instanceof Function)\n      return setState((previousState) => {\n        const newState = partialOrUpdaterFunction(previousState);\n        if (!isPlainObject(newState)) {\n          throw new Error('Invalid new state');\n        }\n\n        return { ...previousState, ...newState };\n      });\n\n    if (!isPlainObject(partialOrUpdaterFunction)) {\n      throw new Error('Invalid new state');\n    }\n\n    setState((previousState) => ({\n      ...previousState,\n      ...partialOrUpdaterFunction,\n    }));\n  }, []);\n\n  return [state, merge];\n}\n`;function u(r){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\",a:\"a\",strong:\"strong\",pre:\"pre\"},r.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{children:\"\\u89E3\\u51B3\\u65B9\\u6848\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,t.jsx)(e.code,{children:\"useState\"}),\" \\u94A9\\u5B50\\u5B9E\\u73B0 \",(0,t.jsx)(e.code,{children:\"useObject\"}),\" \\u94A9\\u5B50\\uFF0C\\u5E76\\u5B9E\\u73B0\\u66F4\\u65B0\\u5668\\u51FD\\u6570\\u4EE5\\u5C06\\u5F53\\u524D\\u72B6\\u6001\\u5BF9\\u8C61\\u4E0E\\u65B0\\u7684\\u4F20\\u5165\\u5BF9\\u8C61\\u5408\\u5E76\\u3002\\u8981\\u5408\\u5E76\\u5BF9\\u8C61\\uFF0C\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,t.jsxs)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\",children:[\"spread (\",(0,t.jsx)(e.code,{children:\"...\"}),\") \\u8BED\\u6CD5\"]}),\"\\u3002\"]}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:\"\\u6CE8\\u610F\"}),\"\\uFF1A\",(0,t.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\",children:(0,t.jsx)(e.code,{children:\"Object.assign\"})}),\" \\u4E5F\\u53EF\\u4EE5\\u5408\\u5E76\\u5BF9\\u8C61\\uFF0C\\u4F46\\u4E0D\\u5EFA\\u8BAE\\u8FD9\\u6837\\u505A\\uFF0C\\u56E0\\u4E3A\\u5B83\\u4F1A\\u6539\\u53D8\\u76EE\\u6807\\u5BF9\\u8C61\\u3002\"]}),`\n`,(0,t.jsx)(s,{children:p}),`\n`,(0,t.jsx)(e.h2,{children:\"\\u8FB9\\u7F18\\u60C5\\u51B5\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"\\u4EC5\\u901A\\u8FC7\\u4F7F\\u7528 \",(0,t.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof\",children:(0,t.jsx)(e.code,{children:\"typeof\"})}),\" \\u68C0\\u67E5\\u5BF9\\u8C61\\u662F\\u5426\\u4E3A \",(0,t.jsx)(e.code,{children:\"Object\"}),\" \\u5E76\\u4E0D\\u8DB3\\u4EE5\\u786E\\u4FDD\\u53D8\\u91CF\\u662F POJO\\u3002\\u4F8B\\u5982\\uFF0C\",(0,t.jsx)(e.code,{children:\"typeof\"}),\" \\u8FD0\\u7B97\\u7B26\\u5BF9\\u6570\\u7EC4\\u3001\",(0,t.jsx)(e.code,{children:\"null\"}),\" \\u548C\\u5176\\u4ED6\\u5BF9\\u8C61\\uFF08\\u5982 \",(0,t.jsx)(e.code,{children:\"Date\"}),\"\\u3001\",(0,t.jsx)(e.code,{children:\"RegExp\"}),\" \\u548C \",(0,t.jsx)(e.code,{children:\"Error\"}),\"\\uFF09\\u8FD4\\u56DE \",(0,t.jsx)(e.code,{children:\"'object'\"}),\"\\u3002\"]}),`\n`,(0,t.jsx)(e.p,{children:\"\\u6709\\u5F88\\u591A\\u65B9\\u6CD5\\u53EF\\u4EE5\\u68C0\\u67E5\\u4E00\\u4E2A\\u5BF9\\u8C61\\u662F\\u5426\\u4E3A POJO\\u3002\\u672C\\u89E3\\u51B3\\u65B9\\u6848\\u4E2D\\u5B9A\\u4E49\\u4E86\\u4E00\\u4E2A\\u793A\\u4F8B\\u3002\"}),`\n`,(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:\"language-ts\",children:`function isPlainObject(value: unknown) {\n  return Object.prototype.toString.call(value) === '[object Object]';\n}\n`})}),`\n`,(0,t.jsxs)(e.p,{children:[\"\\u53E6\\u4E00\\u79CD\\u65B9\\u6CD5\\u662F\\u4F7F\\u7528 \",(0,t.jsxs)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/Object\",children:[(0,t.jsx)(e.code,{children:\"Object()\"}),\" \\u6784\\u9020\\u51FD\\u6570\"]}),\" \\u91CD\\u65B0\\u5B9E\\u4F8B\\u5316\\u6709\\u95EE\\u9898\\u7684\\u5BF9\\u8C61\\u3002\\u6B64\\u65B9\\u6CD5\\u7684\\u5B9A\\u4E49\\u7559\\u7ED9\\u8BFB\\u8005\\u4F5C\\u4E3A\\u7EC3\\u4E60\\u3002\\u60A8\\u80FD\\u60F3\\u5230\\u5176\\u4ED6\\u53EF\\u9760\\u7684\\u65B9\\u6CD5\\u6765\\u68C0\\u67E5\\u4E00\\u4E2A\\u5BF9\\u8C61\\u662F\\u5426\\u4E3A POJO \\u5417\\uFF1F\"]})]})}function x(r={}){let{wrapper:e}=r.components||{};return e?(0,t.jsx)(e,Object.assign({},r,{children:(0,t.jsx)(u,r)})):u(r)}var w=x;return v(y);})();\n;return Component;"
}
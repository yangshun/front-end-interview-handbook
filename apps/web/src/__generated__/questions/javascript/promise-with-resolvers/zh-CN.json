{
  "description": "var Component=(()=>{var m=Object.create;var i=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var v=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),j=(n,e)=>{for(var o in e)i(n,o,{get:e[o],enumerable:!0})},c=(n,e,o,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of p(e))!g.call(n,s)&&s!==o&&i(n,s,{get:()=>e[s],enumerable:!(t=h(e,s))||t.enumerable});return n};var P=(n,e,o)=>(o=n!=null?m(u(n)):{},c(e||!n||!n.__esModule?i(o,\"default\",{value:n,enumerable:!0}):o,n)),f=n=>c(i({},\"__esModule\",{value:!0}),n);var a=v((O,l)=>{l.exports=_jsx_runtime});var _={};j(_,{default:()=>x,frontmatter:()=>R});var r=P(a()),R={title:\"Promise.withResolvers\",excerpt:\"\\u5B9E\\u73B0\\u4E00\\u4E2A\\u51FD\\u6570\\uFF0C\\u8BE5\\u51FD\\u6570\\u8FD4\\u56DE\\u4E00\\u4E2A\\u5305\\u542B\\u65B0\\u7684 `Promise` \\u5BF9\\u8C61\\u548C\\u4E24\\u4E2A\\u7528\\u4E8E\\u89E3\\u51B3\\u6216\\u62D2\\u7EDD\\u5B83\\u7684\\u51FD\\u6570\\u7684\\u5BF9\\u8C61\"};function d(n){let e=Object.assign({p:\"p\",code:\"code\",em:\"em\",a:\"a\",pre:\"pre\",h2:\"h2\",ul:\"ul\",li:\"li\"},n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.p,{children:[\"\\u9759\\u6001\\u65B9\\u6CD5 \",(0,r.jsx)(e.code,{children:\"Promise.withResolvers()\"}),\" \\u8FD4\\u56DE\\u4E00\\u4E2A\\u5305\\u542B\\u65B0\\u7684 \",(0,r.jsx)(e.code,{children:\"Promise\"}),\" \\u5BF9\\u8C61\\u548C\\u4E24\\u4E2A\\u7528\\u4E8E\\u89E3\\u51B3\\u6216\\u62D2\\u7EDD\\u5B83\\u7684\\u51FD\\u6570\\u7684\\u5BF9\\u8C61\\uFF0C\\u8FD9\\u4E24\\u4E2A\\u51FD\\u6570\\u5BF9\\u5E94\\u4E8E\\u4F20\\u9012\\u7ED9 \",(0,r.jsx)(e.code,{children:\"Promise()\"}),\" \\u6784\\u9020\\u51FD\\u6570\\u7684\\u6267\\u884C\\u5668\\u7684\\u4E24\\u4E2A\\u53C2\\u6570\\u3002\"]}),`\n`,(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.em,{children:[\"\\u6765\\u6E90\\uFF1A\",(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/withResolvers\",children:\"Promise.withResolvers() - JavaScript | MDN\"})]})}),`\n`,(0,r.jsxs)(e.p,{children:[\"\\u8FD9\\u79CD\\u7528\\u6CD5\\u53EF\\u4EE5\\u63D0\\u9AD8\\u4EE3\\u7801\\u53EF\\u8BFB\\u6027\\uFF0C\\u5E76\\u4F7F\\u5176\\u66F4\\u5BB9\\u6613\\u7BA1\\u7406\\u5F02\\u6B65\\u64CD\\u4F5C\\uFF0C\\u5C24\\u5176\\u662F\\u5728\\u60A8\\u9700\\u8981\\u4ECE\\u4EE3\\u7801\\u7684\\u4E0D\\u540C\\u90E8\\u5206\\u89E3\\u51B3\\u6216\\u62D2\\u7EDD \",(0,r.jsx)(e.code,{children:\"Promise\"}),\" \\u65F6\\u3002\"]}),`\n`,(0,r.jsx)(e.p,{children:\"\\u4EE5\\u4E0B\\u662F\\u5B83\\u5982\\u4F55\\u4F7F\\u7528\\u7684\\u4E00\\u4E2A\\u793A\\u4F8B\\uFF1A\"}),`\n`,(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:\"language-js\",children:`function delayedGreeting(name) {\n  const { promise, resolve, reject } = Promise.withResolvers();\n\n  setTimeout(() => {\n    if (name) {\n      resolve(\\`Hello, \\${name}!\\`);\n    } else {\n      reject(new Error('Name is required.'));\n    }\n  }, 1000);\n\n  return promise;\n}\n\ndelayedGreeting('Alice')\n  .then((message) => console.log(message)) // Output: Hello, Alice!\n  .catch((error) => console.error(error));\n\ndelayedGreeting()\n  .then((message) => console.log(message))\n  .catch((error) => console.error(error)); // Output: Error: Name is required.\n`})}),`\n`,(0,r.jsx)(e.h2,{children:\"\\u8981\\u6C42\"}),`\n`,(0,r.jsxs)(e.p,{children:[\"\\u5C06 \",(0,r.jsx)(e.code,{children:\"Promise.withResolvers\"}),\" \\u51FD\\u6570\\u5B9E\\u73B0\\u4E3A \",(0,r.jsx)(e.code,{children:\"promiseWithResolvers\"}),\"\\uFF0C\\u4E00\\u4E2A\\u72EC\\u7ACB\\u7684\\u5B9E\\u7528\\u51FD\\u6570\\u3002\"]}),`\n`,(0,r.jsx)(e.h2,{children:\"\\u793A\\u4F8B\"}),`\n`,(0,r.jsx)(e.p,{children:\"\\u6210\\u529F\\u6848\\u4F8B\\uFF1A\"}),`\n`,(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:\"language-js\",children:`const { promise, resolve, reject } = promiseWithResolvers();\n\n// \\u7A0D\\u540E\\u5728\\u60A8\\u7684\\u4EE3\\u7801\\u4E2D\nresolve('Success!');\npromise.then((result) => console.log(result)); // Output: Success!\n`})}),`\n`,(0,r.jsx)(e.p,{children:\"\\u5B9E\\u73B0\\u8D85\\u65F6\\uFF1A\"}),`\n`,(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:\"language-js\",children:`function timeoutPromise(duration) {\n  const { promise, resolve, reject } = promiseWithResolvers();\n\n  setTimeout(() => reject(new Error('Timeout')), duration);\n\n  return promise;\n}\n\ntimeoutPromise(2000).catch((error) => console.error(error.message)); // Output after 2 seconds: Timeout\n`})}),`\n`,(0,r.jsx)(e.h2,{children:\"\\u8D44\\u6E90\"}),`\n`,(0,r.jsxs)(e.ul,{children:[`\n`,(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/withResolvers\",children:\"Promise.withResolvers() - JavaScript | MDN\"})}),`\n`]})]})}function w(n={}){let{wrapper:e}=n.components||{};return e?(0,r.jsx)(e,Object.assign({},n,{children:(0,r.jsx)(d,n)})):d(n)}var x=w;return f(_);})();\n;return Component;",
  "info": {
    "excerpt": "实现一个函数，该函数返回一个包含新的 `Promise` 对象和两个用于解决或拒绝它的函数的对象",
    "title": "Promise.withResolvers"
  },
  "solution": "var Component=(()=>{var v=Object.create;var i=Object.defineProperty;var j=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var P=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),R=(o,e)=>{for(var s in e)i(o,s,{get:e[s],enumerable:!0})},t=(o,e,s,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let n of u(e))!x.call(o,n)&&n!==s&&i(o,n,{get:()=>e[n],enumerable:!(c=j(e,n))||c.enumerable});return o};var g=(o,e,s)=>(s=o!=null?v(f(o)):{},t(e||!o||!o.__esModule?i(s,\"default\",{value:o,enumerable:!0}):s,o)),w=o=>t(i({},\"__esModule\",{value:!0}),o);var d=P((S,l)=>{l.exports=_jsx_runtime});var T={};R(T,{default:()=>D});var r=g(d());var h=MDXCodeBlock;var a=`/**\n * @returns { promise: Promise, resolve: Function, reject: Function }\n */\nexport default function promiseWithResolvers() {\n  let resolve, reject;\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n\n  return { promise, resolve, reject };\n}\n`;var m=`export default function promiseWithResolvers<T>(): Readonly<{\n  promise: Promise<T>;\n  resolve: (value: T) => void;\n  reject: (reason?: any) => void;\n}> {\n  let resolve: (value: T) => void = () => {};\n  let reject: (reason?: any) => void = () => {};\n\n  const promise = new Promise<T>((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n\n  return { promise, resolve, reject };\n}\n`;function p(o){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\",a:\"a\",pre:\"pre\",ul:\"ul\",li:\"li\"},o.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{children:\"\\u89E3\\u51B3\\u65B9\\u6848\"}),`\n`,(0,r.jsxs)(e.p,{children:[\"\\u5728\\u5927\\u591A\\u6570\\u60C5\\u51B5\\u4E0B\\uFF0C\",(0,r.jsx)(e.code,{children:\"Promise.withResolvers()\"}),\" \\u53EA\\u662F\\u8BED\\u6CD5\\u7CD6\\u3002 \\u83B7\\u5F97 \",(0,r.jsx)(e.code,{children:\"resolve\"}),\" \\u548C \",(0,r.jsx)(e.code,{children:\"reject\"}),\" \\u51FD\\u6570\\u7684\\u552F\\u4E00\\u65B9\\u6CD5\\u662F \",(0,r.jsx)(e.code,{children:\"Promise\"}),\" \\u6784\\u9020\\u51FD\\u6570\\u7684\\u53C2\\u6570\\u3002 \\u56E0\\u6B64\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5728\\u521B\\u5EFA \",(0,r.jsx)(e.code,{children:\"Promise\"}),\" \\u4E4B\\u524D\\u521B\\u5EFA \",(0,r.jsx)(e.code,{children:\"resolve\"}),\" \\u548C \",(0,r.jsx)(e.code,{children:\"reject\"}),\" \\u51FD\\u6570\\uFF0C\\u7136\\u540E\\u4ECE\\u6784\\u9020\\u51FD\\u6570\\u4E2D\\u516C\\u5F00\\u5B83\\u3002\"]}),`\n`,(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:\"Promise\"}),\" \\u6784\\u9020\\u51FD\\u6570\\u53C2\\u6570\\u540C\\u6B65\\u8FD0\\u884C\\uFF0C\\u56E0\\u6B64\\u6211\\u4EEC\\u53EF\\u4EE5\\u786E\\u4FDD\\u5728 \",(0,r.jsx)(e.code,{children:\"return\"}),\" \\u8BED\\u53E5\\u4E4B\\u524D\\u5C06 \",(0,r.jsx)(e.code,{children:\"resolve\"}),\" \\u548C \",(0,r.jsx)(e.code,{children:\"reject\"}),\" \\u53D8\\u91CF\\u5206\\u914D\\u7ED9\\u6B63\\u786E\\u7684\\u503C\\u3002\"]}),`\n`,(0,r.jsx)(h,{languages:{jsx:a,tsx:m}}),`\n`,(0,r.jsxs)(e.p,{children:[\"\\u4E8B\\u5B9E\\u4E0A\\uFF0CMDN \\u751A\\u81F3\\u63D0\\u5230 \",(0,r.jsx)(e.code,{children:\"Promise.withResolvers()\"}),\" \",(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/withResolvers#description\",children:\"\\u5B8C\\u5168\\u7B49\\u540C\\u4E8E\\u4EE5\\u4E0B\\u4EE3\\u7801\"}),\":\"]}),`\n`,(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:\"language-js\",children:`let resolve, reject;\nconst promise = new Promise((res, rej) => {\n  resolve = res;\n  reject = rej;\n});\n`})}),`\n`,(0,r.jsx)(e.h2,{children:\"\\u8D44\\u6E90\"}),`\n`,(0,r.jsxs)(e.ul,{children:[`\n`,(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/withResolvers\",children:\"Promise.withResolvers() - JavaScript | MDN\"})}),`\n`]})]})}function M(o={}){let{wrapper:e}=o.components||{};return e?(0,r.jsx)(e,Object.assign({},o,{children:(0,r.jsx)(p,o)})):p(o)}var D=M;return w(T);})();\n;return Component;"
}
{
  "description": "var Component=(()=>{var u=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var a=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var m=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),v=(t,e)=>{for(var o in e)i(t,o,{get:e[o],enumerable:!0})},d=(t,e,o,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of a(e))!b.call(t,c)&&c!==o&&i(t,c,{get:()=>e[c],enumerable:!(r=p(e,c))||r.enumerable});return t};var S=(t,e,o)=>(o=t!=null?u(x(t)):{},d(e||!t||!t.__esModule?i(o,\"default\",{value:t,enumerable:!0}):o,t)),j=t=>d(i({},\"__esModule\",{value:!0}),t);var s=m((N,l)=>{l.exports=_jsx_runtime});var _={};v(_,{default:()=>C,frontmatter:()=>k});var n=S(s()),k={title:\"useStep\",excerpt:\"\\u5B9E\\u73B0\\u4E00\\u4E2A\\u7BA1\\u7406\\u591A\\u6B65\\u9AA4\\u6D41\\u7A0B\\u7684\\u6B65\\u9AA4\\u8BA1\\u6570\\u5668\\u7684 hook\"};function h(t){let e=Object.assign({p:\"p\",code:\"code\",pre:\"pre\",h2:\"h2\",ul:\"ul\",li:\"li\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"\\u5B9E\\u73B0\\u4E00\\u4E2A \",(0,n.jsx)(e.code,{children:\"useStep\"}),\" hook\\uFF0C\\u7528\\u4E8E\\u7BA1\\u7406\\u591A\\u6B65\\u9AA4\\u6D41\\u7A0B\\u7684\\u6B65\\u9AA4\\u8BA1\\u6570\\u5668\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8BE5 hook \\u5E94\\u63D0\\u4F9B\\u5B9E\\u7528\\u65B9\\u6CD5\\u6765\\u8F6C\\u5230\\u4E0B\\u4E00\\u6B65\\u548C\\u4E0A\\u4E00\\u6B65\\uFF0C\\u5E76\\u5141\\u8BB8\\u91CD\\u7F6E\\u6B65\\u9AA4\\u8BA1\\u6570\\u5668\\u3002 \\u6B65\\u9AA4\\u53F7\\u4ECE 1 \\u5F00\\u59CB\\uFF0C\\u6700\\u591A\\u589E\\u52A0\\u5230 \",(0,n.jsx)(e.code,{children:\"maxStep\"}),\"\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-jsx\",children:`export default function Component() {\n  const { step, next, previous, reset, setStep, hasNext, hasPrevious } =\n    useStep(3);\n\n  return (\n    <div>\n      <p>Step {step}</p>\n      <button onClick={previous} disabled={!hasPrevious}>\n        Previous\n      </button>\n      <button onClick={next} disabled={!hasNext}>\n        Next\n      </button>\n      <button onClick={reset}>Reset</button>\n      <button onClick={() => setStep(3)}>Go to step 3</button>\n    </div>\n  );\n}\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u53C2\\u6570\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"maxStep: number\"}),\": \\u6700\\u5927\\u6B65\\u9AA4\\u6570\\uFF0C\\u5373\\u6700\\u540E\\u4E00\\u6B65\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u8FD4\\u56DE\\u503C\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8BE5 hook \\u8FD4\\u56DE\\u4E00\\u4E2A\\u5177\\u6709\\u4EE5\\u4E0B\\u5C5E\\u6027/\\u65B9\\u6CD5\\u7684\\u5BF9\\u8C61\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"step\"}),\": \\u5F53\\u524D\\u6B65\\u9AA4\\u6570\\u3002\\u5B83\\u88AB\\u521D\\u59CB\\u5316\\u4E3A \",(0,n.jsx)(e.code,{children:\"1\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"next: () => void\"}),\": \\u4E00\\u4E2A\\u9012\\u589E\\u6B65\\u9AA4\\u6570\\u7684\\u51FD\\u6570\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"previous: () => void\"}),\": \\u4E00\\u4E2A\\u9012\\u51CF\\u6B65\\u9AA4\\u6570\\u7684\\u51FD\\u6570\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"hasNext: boolean\"}),\": \\u4E00\\u4E2A\\u6307\\u793A\\u662F\\u5426\\u5B58\\u5728\\u4E0B\\u4E00\\u6B65\\u7684\\u5E03\\u5C14\\u503C\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"hasPrevious: boolean\"}),\": \\u4E00\\u4E2A\\u6307\\u793A\\u662F\\u5426\\u5B58\\u5728\\u4E0A\\u4E00\\u6B65\\u7684\\u5E03\\u5C14\\u503C\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"reset: () => void\"}),\": \\u4E00\\u4E2A\\u5C06\\u6B65\\u9AA4\\u6570\\u91CD\\u7F6E\\u4E3A \",(0,n.jsx)(e.code,{children:\"1\"}),\" \\u7684\\u51FD\\u6570\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"setStep\"}),\": \\u4E00\\u4E2A\\u5C06\\u6B65\\u9AA4\\u6570\\u8BBE\\u7F6E\\u4E3A\\u7279\\u5B9A\\u6B65\\u9AA4\\u7684\\u51FD\\u6570\\u3002 \\u8FD9\\u5E94\\u8BE5\\u63A5\\u53D7\\u4E00\\u4E2A \",(0,n.jsx)(e.code,{children:\"number\"}),\" \\u548C\\u4E00\\u4E2A\\u66F4\\u65B0\\u5668\\u51FD\\u6570 \",(0,n.jsx)(e.code,{children:\"(currentStep: number) => void\"}),\"\\uFF0C\\u7C7B\\u4F3C\\u4E8E \",(0,n.jsx)(e.code,{children:\"useState\"}),\" \\u7684 setter \\u51FD\\u6570\\u63A5\\u53D7\\u7684\\u5185\\u5BB9\"]}),`\n`]})]})}function f(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(h,t)})):h(t)}var C=f;return j(_);})();\n;return Component;",
  "files": {
    "/package.json": "{\n  \"name\": \"@gfe-questions/use-step\",\n  \"version\": \"0.0.1\",\n  \"main\": \"/src/use-step.ts\",\n  \"dependencies\": {\n    \"@testing-library/react\": \"14.0.0\",\n    \"react\": \"18.2.0\",\n    \"react-dom\": \"18.2.0\"\n  },\n  \"devDependencies\": {\n    \"@types/jest\": \"29.5.0\",\n    \"@types/react\": \"18.2.25\",\n    \"@types/react-dom\": \"18.2.10\",\n    \"typescript\": \"5.0.2\"\n  }\n}\n",
    "/src/use-step.run.test.ts": "import { act, renderHook } from '@testing-library/react';\n\nimport useStep from './use-step';\n\ndescribe('useStep', () => {\n  test('return values', () => {\n    const { result } = renderHook(() => useStep(1));\n\n    expect(typeof result.current.step).toBe('number');\n    expect(typeof result.current.next).toBe('function');\n    expect(typeof result.current.previous).toBe('function');\n    expect(typeof result.current.setStep).toBe('function');\n    expect(typeof result.current.reset).toBe('function');\n    expect(typeof result.current.hasNext).toBe('boolean');\n    expect(typeof result.current.hasPrevious).toBe('boolean');\n  });\n\n  test('initial value', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    expect(result.current.step).toBe(1);\n  });\n\n  test('next step', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.next());\n\n    expect(result.current.step).toBe(2);\n  });\n\n  test('previous step', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(3));\n    act(() => result.current.previous());\n\n    expect(result.current.step).toBe(2);\n  });\n\n  test('set step', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(3));\n\n    expect(result.current.step).toBe(3);\n  });\n\n  test('reset step', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(3));\n    act(() => result.current.reset());\n\n    expect(result.current.step).toBe(1);\n  });\n\n  test('has next if step is first', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    expect(result.current.hasNext).toBe(true);\n  });\n\n  test('has previous if step is last', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(5));\n\n    expect(result.current.hasPrevious).toBe(true);\n  });\n});\n",
    "/src/use-step.submit.test.ts": "import { act, renderHook } from '@testing-library/react';\n\nimport useStep from './use-step';\n\ndescribe('useStep', () => {\n  test('return values', () => {\n    const { result } = renderHook(() => useStep(1));\n\n    expect(typeof result.current.step).toBe('number');\n    expect(typeof result.current.next).toBe('function');\n    expect(typeof result.current.previous).toBe('function');\n    expect(typeof result.current.setStep).toBe('function');\n    expect(typeof result.current.reset).toBe('function');\n    expect(typeof result.current.hasNext).toBe('boolean');\n    expect(typeof result.current.hasPrevious).toBe('boolean');\n  });\n\n  test('initial value', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    expect(result.current.step).toBe(1);\n  });\n\n  test('next step', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.next());\n\n    expect(result.current.step).toBe(2);\n  });\n\n  test('previous step', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(3));\n    act(() => result.current.previous());\n\n    expect(result.current.step).toBe(2);\n  });\n\n  test('set step', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(3));\n\n    expect(result.current.step).toBe(3);\n  });\n\n  test('reset step', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(3));\n    act(() => result.current.reset());\n\n    expect(result.current.step).toBe(1);\n  });\n\n  test('has next if step is first', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    expect(result.current.hasNext).toBe(true);\n  });\n\n  test('not has previous if step is first', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    expect(result.current.hasPrevious).toBe(false);\n  });\n\n  test('not has next if step is last', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(5));\n\n    expect(result.current.hasNext).toBe(false);\n  });\n\n  test('has previous if step is last', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(5));\n\n    expect(result.current.hasPrevious).toBe(true);\n  });\n\n  test('has next and has previous if step is not first or last', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(3));\n\n    expect(result.current.hasNext).toBe(true);\n    expect(result.current.hasPrevious).toBe(true);\n  });\n\n  test(\"next doesn't go beyond max step\", () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(5));\n    act(() => result.current.next());\n\n    expect(result.current.step).toBe(5);\n  });\n\n  test(\"previous doesn't go beyond min step\", () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(1));\n    act(() => result.current.previous());\n\n    expect(result.current.step).toBe(1);\n  });\n\n  test(\"setStep doesn't go beyond max step\", () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(6));\n\n    expect(result.current.step).toBe(1);\n  });\n\n  test(\"setStep doesn't go beyond min step\", () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep(0));\n\n    expect(result.current.step).toBe(1);\n  });\n\n  test('setStep works with an updater function', () => {\n    const { result } = renderHook(() => useStep(5));\n\n    act(() => result.current.setStep((step) => step + 2));\n\n    expect(result.current.step).toBe(3);\n  });\n});\n",
    "/src/use-step.ts": "import { Dispatch, SetStateAction, useCallback, useState } from 'react';\n\ninterface UseStepReturn {\n  step: number;\n  next: () => void;\n  previous: () => void;\n  reset: () => void;\n  hasNext: boolean;\n  hasPrevious: boolean;\n  setStep: Dispatch<SetStateAction<number>>;\n}\n\nexport default function useStep(maxStep: number): UseStepReturn {\n  const [currentStep, setCurrentStep] = useState(1);\n\n  const setStep: UseStepReturn['setStep'] = useCallback(\n    (step) => {\n      const newStep = typeof step === 'function' ? step(currentStep) : step;\n      if (newStep < 1 || newStep > maxStep) return;\n\n      setCurrentStep(newStep);\n    },\n    [maxStep, currentStep],\n  );\n\n  const next: UseStepReturn['next'] = useCallback(() => {\n    setCurrentStep((step) => Math.min(step + 1, maxStep));\n  }, [maxStep]);\n\n  const previous: UseStepReturn['previous'] = useCallback(() => {\n    setCurrentStep((step) => Math.max(step - 1, 1));\n  }, []);\n\n  const reset: UseStepReturn['reset'] = useCallback(() => {\n    setCurrentStep(1);\n  }, []);\n\n  return {\n    step: currentStep,\n    next,\n    previous,\n    hasNext: currentStep < maxStep,\n    hasPrevious: currentStep > 1,\n    setStep,\n    reset,\n  };\n}\n"
  },
  "metadata": {
    "access": "premium",
    "author": "phillmont",
    "companies": [],
    "created": 1742169600,
    "difficulty": "medium",
    "duration": 15,
    "excerpt": "实现一个管理多步骤流程的步骤计数器的 hook",
    "featured": false,
    "format": "javascript",
    "frameworkDefault": "react",
    "frameworks": [
      {
        "framework": "react",
        "href": "/questions/javascript/use-step"
      }
    ],
    "href": "/questions/javascript/use-step",
    "importance": "low",
    "languages": [
      "js",
      "ts"
    ],
    "nextQuestions": [],
    "published": true,
    "ranking": 100,
    "similarQuestions": [],
    "slug": "use-step",
    "subtitle": null,
    "title": "useStep",
    "topics": [
      "react-hooks"
    ]
  },
  "skeleton": {
    "js": "/**\n * @param {number} maxStep\n */\nexport default function useStep(maxStep) {\n  throw 'Not implemented';\n}",
    "ts": "import { Dispatch, SetStateAction } from 'react';\n\ninterface UseStepReturn {\n  step: number;\n  next: () => void;\n  previous: () => void;\n  reset: () => void;\n  hasNext: boolean;\n  hasPrevious: boolean;\n  setStep: Dispatch<SetStateAction<number>>;\n}\n\nexport default function useStep(maxStep: number): UseStepReturn {\n  throw 'Not implemented';\n}"
  },
  "solution": "var Component=(()=>{var d=Object.create;var p=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),b=(t,e)=>{for(var r in e)p(t,r,{get:e[r],enumerable:!0})},c=(t,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of x(e))!C.call(t,s)&&s!==r&&p(t,s,{get:()=>e[s],enumerable:!(o=m(e,s))||o.enumerable});return t};var k=(t,e,r)=>(r=t!=null?d(h(t)):{},c(e||!t||!t.__esModule?p(r,\"default\",{value:t,enumerable:!0}):r,t)),v=t=>c(p({},\"__esModule\",{value:!0}),t);var a=f((U,u)=>{u.exports=_jsx_runtime});var D={};b(D,{default:()=>_});var n=k(a());var S=MDXCodeBlock;var i=`import { Dispatch, SetStateAction, useCallback, useState } from 'react';\n\ninterface UseStepReturn {\n  step: number;\n  next: () => void;\n  previous: () => void;\n  reset: () => void;\n  hasNext: boolean;\n  hasPrevious: boolean;\n  setStep: Dispatch<SetStateAction<number>>;\n}\n\nexport default function useStep(maxStep: number): UseStepReturn {\n  const [currentStep, setCurrentStep] = useState(1);\n\n  const setStep: UseStepReturn['setStep'] = useCallback(\n    (step) => {\n      const newStep = typeof step === 'function' ? step(currentStep) : step;\n      if (newStep < 1 || newStep > maxStep) return;\n\n      setCurrentStep(newStep);\n    },\n    [maxStep, currentStep],\n  );\n\n  const next: UseStepReturn['next'] = useCallback(() => {\n    setCurrentStep((step) => Math.min(step + 1, maxStep));\n  }, [maxStep]);\n\n  const previous: UseStepReturn['previous'] = useCallback(() => {\n    setCurrentStep((step) => Math.max(step - 1, 1));\n  }, []);\n\n  const reset: UseStepReturn['reset'] = useCallback(() => {\n    setCurrentStep(1);\n  }, []);\n\n  return {\n    step: currentStep,\n    next,\n    previous,\n    hasNext: currentStep < maxStep,\n    hasPrevious: currentStep > 1,\n    setStep,\n    reset,\n  };\n}\n`;function l(t){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"\\u89E3\\u51B3\\u65B9\\u6848\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"useStep\"}),\" hook \\u53EF\\u4EE5\\u901A\\u8FC7\\u5C06\\u6B65\\u9AA4\\u7F16\\u53F7\\u5B58\\u50A8\\u5728 \",(0,n.jsx)(e.code,{children:\"useState\"}),\" \\u72B6\\u6001\\u4E2D\\u6765\\u5B9E\\u73B0\\uFF0C\\u5E76\\u5B9A\\u4E49\\u5B9E\\u7528\\u65B9\\u6CD5\\u6765\\u6839\\u636E\\u72B6\\u6001\\u7684 setter \\u51FD\\u6570\\u64CD\\u4F5C\\u6B65\\u9AA4\\u7F16\\u53F7\\u3002 \\u6211\\u4EEC\\u5C06\\u6B65\\u9AA4\\u66F4\\u65B0\\u9650\\u5236\\u5728 \",(0,n.jsx)(e.code,{children:\"1\"}),\" \\u548C \",(0,n.jsx)(e.code,{children:\"maxStep\"}),\" \\u4E4B\\u95F4\\uFF0C\\u4EE5\\u786E\\u4FDD\\u6B65\\u9AA4\\u7F16\\u53F7\\u4E0D\\u4F1A\\u8D85\\u51FA\\u8303\\u56F4\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8BF7\\u8BB0\\u4F4F\\u5C06\\u5B9E\\u7528\\u65B9\\u6CD5\\u5305\\u88C5\\u5728 \",(0,n.jsx)(e.code,{children:\"useCallback\"}),\" \\u4E2D\\uFF0C\\u4EE5\\u9632\\u6B62\\u8C03\\u7528\\u7EC4\\u4EF6\\u7684\\u4E0D\\u5FC5\\u8981\\u7684\\u91CD\\u65B0\\u6E32\\u67D3\\u3002\"]}),`\n`,(0,n.jsx)(S,{children:i})]})}function M(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(l,t)})):l(t)}var _=M;return v(D);})();\n;return Component;",
  "workspace": {
    "main": "/src/use-step.ts",
    "run": "/src/use-step.run.test.ts",
    "submit": "/src/use-step.submit.test.ts"
  }
}